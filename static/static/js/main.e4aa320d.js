/*! For license information please see main.e4aa320d.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),o=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function c(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(c(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var P=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case I:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case C:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var N=Array.isArray,x=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},D=[],H=-1;function z(e){return{current:e}}function F(e){0>H||(e.current=D[H],D[H]=null,H--)}function U(e,t){H++,D[H]=e.current,e.current=t}var B=z(null),K=z(null),j=z(null),W=z(null);function Q(e,t){switch(U(j,t),U(K,e),U(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?od(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=od(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(B),U(B,e)}function V(){F(B),F(K),F(j)}function G(e){null!==e.memoizedState&&U(W,e);var t=B.current,n=id(t,e.type);t!==n&&(U(K,e),U(B,n))}function Y(e){K.current===e&&(F(B),F(K)),W.current===e&&(F(W),Gd._currentValue=q)}var J=Object.prototype.hasOwnProperty,$=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,oe=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,ce=r.log,le=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof ce&&le(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?o=ve(r):0!==(a&=s)?o=ve(a):n||0!==(n=s&~e)&&(o=ve(n)):0!==(s=r&~i)?o=ve(s):0!==a?o=ve(a):n||0!==(n=r&~e)&&(o=ve(n)),0===o?0:0!==t&&t!==o&&0===(t&i)&&((i=o&-o)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:o}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ie(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function _e(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:lh(e.type)}var Oe=Math.random().toString(36).slice(2),Me="__reactFiber$"+Oe,Ne="__reactProps$"+Oe,xe="__reactContainer$"+Oe,Le="__reactEvents$"+Oe,qe="__reactListeners$"+Oe,De="__reactHandles$"+Oe,He="__reactResources$"+Oe,ze="__reactMarker$"+Oe;function Fe(e){delete e[Me],delete e[Ne],delete e[Le],delete e[qe],delete e[De]}function Ue(e){var t=e[Me];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xe]||n[Me]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Me])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Me]||e[xe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ke(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function je(e){var t=e[He];return t||(t=e[He]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[ze]=!0}var Qe=new Set,Ve={};function Ge(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ve[e]=t,e=0;e<t.length;e++)Qe.add(t[e])}var Je,$e,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(o=t,J.call(et,o)||!J.call(Ze,o)&&(Xe.test(o)?et[o]=!0:(Ze[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ot(e){if(void 0===Je)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+$e}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],s=i[1];if(a&&s){var c=a.split("\n"),l=s.split("\n");for(o=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;o<l.length&&!l[o].includes("DetermineComponentFrameRoot");)o++;if(r===c.length||o===l.length)for(r=c.length-1,o=l.length-1;1<=r&&0<=o&&c[r]!==l[o];)o--;for(;1<=r&&0<=o;r--,o--)if(c[r]!==l[o]){if(1!==r||1!==o)do{if(r--,0>--o||c[r]!==l[o]){var u="\n"+c[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ot(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return ot("Activity");default:return""}}function ct(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,r,o,i,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+lt(t)):e.value!==""+lt(t)&&(e.value=""+lt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,lt(t)):null!=n?vt(e,a,lt(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+lt(s):e.removeAttribute("name")}function yt(e,t,n,r,o,i,a,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+lt(n):"",t=null!=t?""+lt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+lt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+lt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(N(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=lt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function It(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&It(e,o,r)}else for(var i in t)t.hasOwnProperty(i)&&It(e,i,t[i])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Nt=null;function xt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Ne]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[Ne]||null;if(!o)throw Error(a(90));mt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Lt=!1;function qt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Mt||null!==Nt)&&(Ul(),Mt&&(t=Mt,e=Nt,Nt=Mt=null,xt(t),e)))for(t=0;t<e.length;t++)xt(e[t])}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ne]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ht=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Ht)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch(Nh){zt=!1}var Ut=null,Bt=null,Kt=null;function jt(){if(Kt)return Kt;var e,t,n=Bt,r=n.length,o="value"in Ut?Ut.value:Ut.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Kt=o.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function Vt(){return!1}function Gt(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Qt:Vt,this.isPropagationStopped=Vt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var Yt,Jt,$t,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Gt(Xt),en=h({},Xt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Yt=e.screenX-$t.screenX,Jt=e.screenY-$t.screenY):Jt=Yt=0,$t=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),rn=Gt(nn),on=Gt(h({},nn,{dataTransfer:0})),an=Gt(h({},en,{relatedTarget:0})),sn=Gt(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),cn=Gt(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Gt(h({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var gn=Gt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Gt(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Gt(h({},Xt,{newState:0,oldState:0})),Cn=[9,13,27,32],kn=Ht&&"CompositionEvent"in window,Sn=null;Ht&&"documentMode"in document&&(Sn=document.documentMode);var In=Ht&&"TextEvent"in window&&!Sn,Tn=Ht&&(!kn||Sn&&8<Sn&&11>=Sn),An=String.fromCharCode(32),_n=!1;function En(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Nn(e,t,n,r){Mt?Nt?Nt.push(r):Nt=[r]:Mt=r,0<(t=ju(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xn=null,Ln=null;function qn(e){qu(e,0)}function Dn(e){if(ht(Ke(e)))return e}function Hn(e,t){if("change"===e)return t}var zn=!1;if(Ht){var Fn;if(Ht){var Un="oninput"in document;if(!Un){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),Un="function"===typeof Bn.oninput}Fn=Un}else Fn=!1;zn=Fn&&(!document.documentMode||9<document.documentMode)}function Kn(){xn&&(xn.detachEvent("onpropertychange",jn),Ln=xn=null)}function jn(e){if("value"===e.propertyName&&Dn(Ln)){var t=[];Nn(t,Ln,e,Ot(e)),qt(qn,t)}}function Wn(e,t,n){"focusin"===e?(Kn(),Ln=n,(xn=t).attachEvent("onpropertychange",jn)):"focusout"===e&&Kn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(Ln)}function Vn(e,t){if("click"===e)return Dn(t)}function Gn(e,t){if("input"===e||"change"===e)return Dn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!J.call(t,o)||!Yn(e[o],t[o]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=$n(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$n(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ht&&"documentMode"in document&&11>=document.documentMode,rr=null,or=null,ir=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Jn(ir,r)||(ir=r,0<(r=ju(or,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!lr[e])return e;var t,n=lr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ht&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),gr=hr("animationstart"),mr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),wr=hr("transitionend"),br=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){br.set(e,t),Ge(t,[e])}Cr.push("scrollEnd");var Sr=new WeakMap;function Ir(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ct(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:ct(t)}}var Tr=[],Ar=0,_r=0;function Er(){for(var e=Ar,t=_r=Ar=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var o=Tr[t];Tr[t++]=null;var i=Tr[t];if(Tr[t++]=null,null!==r&&null!==o){var a=r.pending;null===a?o.next=o:(o.next=a.next,a.next=o),r.pending=o}0!==i&&Mr(n,o,i)}}function Pr(e,t,n,r){Tr[Ar++]=e,Tr[Ar++]=t,Tr[Ar++]=n,Tr[Ar++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Pr(e,t,n,r),Nr(e)}function Or(e,t){return Pr(e,null,null,t),Nr(e)}function Mr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,o&&null!==t&&(o=31-fe(n),null===(r=(e=i.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),i):null}function Nr(e){if(50<Ml)throw Ml=0,Nl=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var xr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(e,t,n,r){return new Lr(e,t,n,r)}function Dr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hr(e,t){var n=e.alternate;return null===n?((n=qr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fr(e,t,n,r,o,i){var s=0;if(r=e,"function"===typeof e)Dr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=qr(31,n,t,o)).elementType=_,e.lanes=i,e;case m:return Ur(n.children,o,i,t);case y:s=8,o|=24;break;case v:return(e=qr(12,n,t,2|o)).elementType=v,e.lanes=i,e;case S:return(e=qr(13,n,t,o)).elementType=S,e.lanes=i,e;case I:return(e=qr(19,n,t,o)).elementType=I,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:case C:s=10;break e;case b:s=9;break e;case k:s=11;break e;case T:s=14;break e;case A:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=qr(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Ur(e,t,n,r){return(e=qr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=qr(6,e,null,t)).lanes=n,e}function Kr(e,t,n){return(t=qr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var jr=[],Wr=0,Qr=null,Vr=0,Gr=[],Yr=0,Jr=null,$r=1,Xr="";function Zr(e,t){jr[Wr++]=Vr,jr[Wr++]=Qr,Qr=e,Vr=t}function eo(e,t,n){Gr[Yr++]=$r,Gr[Yr++]=Xr,Gr[Yr++]=Jr,Jr=e;var r=$r;e=Xr;var o=32-fe(r)-1;r&=~(1<<o),n+=1;var i=32-fe(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,$r=1<<32-fe(t)+o|n<<o|r,Xr=i+e}else $r=1<<i|n<<o|r,Xr=e}function to(e){null!==e.return&&(Zr(e,1),eo(e,1,0))}function no(e){for(;e===Qr;)Qr=jr[--Wr],jr[Wr]=null,Vr=jr[--Wr],jr[Wr]=null;for(;e===Jr;)Jr=Gr[--Yr],Gr[Yr]=null,Xr=Gr[--Yr],Gr[Yr]=null,$r=Gr[--Yr],Gr[Yr]=null}var ro=null,oo=null,io=!1,ao=null,so=!1,co=Error(a(519));function lo(e){throw mo(Ir(Error(a(418,"")),e)),co}function uo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Me]=e,t[Ne]=r,n){case"dialog":Du("cancel",t),Du("close",t);break;case"iframe":case"object":case"embed":Du("load",t);break;case"video":case"audio":for(n=0;n<xu.length;n++)Du(xu[n],t);break;case"source":Du("error",t);break;case"img":case"image":case"link":Du("error",t),Du("load",t);break;case"details":Du("toggle",t);break;case"input":Du("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Du("invalid",t);break;case"textarea":Du("invalid",t),Ct(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Ju(t.textContent,n)?(null!=r.popover&&(Du("beforetoggle",t),Du("toggle",t)),null!=r.onScroll&&Du("scroll",t),null!=r.onScrollEnd&&Du("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||lo(e)}function ho(e){for(ro=e.return;ro;)switch(ro.tag){case 5:case 13:return void(so=!1);case 27:case 3:return void(so=!0);default:ro=ro.return}}function fo(e){if(e!==ro)return!1;if(!io)return ho(e),io=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&oo&&lo(e),ho(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){oo=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}oo=null}}else 27===n?(n=oo,fd(e.type)?(e=vd,vd=null,oo=e):oo=n):oo=ro?yd(e.stateNode.nextSibling):null;return!0}function po(){oo=ro=null,io=!1}function go(){var e=ao;return null!==e&&(null===wl?wl=e:wl.push.apply(wl,e),ao=null),e}function mo(e){null===ao?ao=[e]:ao.push(e)}var yo=z(null),vo=null,wo=null;function bo(e,t,n){U(yo,t._currentValue),t._currentValue=n}function Co(e){e._currentValue=yo.current,F(yo)}function ko(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function So(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var s=o.child;i=i.firstContext;e:for(;null!==i;){var c=i;i=o;for(var l=0;l<t.length;l++)if(c.context===t[l]){i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),ko(i.return,n,e),r||(s=null);break e}i=c.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),ko(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function Io(e,t,n,r){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(0!==(524288&o.flags))i=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var c=o.type;Yn(o.pendingProps.value,s.value)||(null!==e?e.push(c):e=[c])}}else if(o===W.current){if(null===(s=o.alternate))throw Error(a(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}o=o.return}null!==e&&So(t,e,n,r),t.flags|=262144}function To(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ao(e){vo=e,wo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function _o(e){return Po(vo,e)}function Eo(e,t){return null===vo&&Ao(e),Po(e,t)}function Po(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===wo){if(null===e)throw Error(a(308));wo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wo=wo.next=t;return n}var Ro="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Oo=r.unstable_scheduleCallback,Mo=r.unstable_NormalPriority,No={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xo(){return{controller:new Ro,data:new Map,refCount:0}}function Lo(e){e.refCount--,0===e.refCount&&Oo(Mo,function(){e.controller.abort()})}var qo=null,Do=0,Ho=0,zo=null;function Fo(){if(0===--Do&&null!==qo){null!==zo&&(zo.status="fulfilled");var e=qo;qo=null,Ho=0,zo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Uo=x.S;x.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===qo){var n=qo=[];Do=0,Ho=Pu(),zo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Do++,t.then(Fo,Fo)}(0,t),null!==Uo&&Uo(e,t)};var Bo=z(null);function Ko(){var e=Bo.current;return null!==e?e:rl.pooledCache}function jo(e,t){U(Bo,null===t?Bo.current:t.pool)}function Wo(){var e=Ko();return null===e?null:{parent:No._currentValue,pool:e}}var Qo=Error(a(460)),Vo=Error(a(474)),Go=Error(a(542)),Yo={then:function(){}};function Jo(e){return"fulfilled"===(e=e.status)||"rejected"===e}function $o(){}function Xo(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then($o,$o),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ti(e=t.reason),e;default:if("string"===typeof t.status)t.then($o,$o);else{if(null!==(e=rl)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ti(e=t.reason),e}throw Zo=t,Qo}}var Zo=null;function ei(){if(null===Zo)throw Error(a(459));var e=Zo;return Zo=null,e}function ti(e){if(e===Qo||e===Go)throw Error(a(483))}var ni=!1;function ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ii(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ai(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nl)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Nr(e),Mr(e,null,n),t}return Pr(e,r,t,n),Nr(e)}function si(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}function ci(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ui(){if(li){if(null!==zo)throw zo}}function di(e,t,n,r){li=!1;var o=e.updateQueue;ni=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var f=-536870913&s.lane,p=f!==s.lane;if(p?(il&f)===f:(r&f)===f){0!==f&&f===Ho&&(li=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var g=e,m=s;f=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(y,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(y,d,f):g)||void 0===f)break e;d=h({},d,f);break e;case 2:ni=!0}}null!==(f=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=o.callbacks)?o.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=p,c=d):u=u.next=p,a|=f;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(p=s).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null===i&&(o.shared.lanes=0),fl|=a,e.lanes=a,e.memoizedState=d}}function hi(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function fi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hi(n[e],t)}var pi=z(null),gi=z(0);function mi(e,t){U(gi,e=dl),U(pi,t),dl=e|t.baseLanes}function yi(){U(gi,dl),U(pi,pi.current)}function vi(){dl=gi.current,F(pi),F(gi)}var wi=0,bi=null,Ci=null,ki=null,Si=!1,Ii=!1,Ti=!1,Ai=0,_i=0,Ei=null,Pi=0;function Ri(){throw Error(a(321))}function Oi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Mi(e,t,n,r,o,i){return wi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,x.H=null===e||null===e.memoizedState?Qa:Va,Ti=!1,i=n(r,o),Ti=!1,Ii&&(i=xi(t,n,r,o)),Ni(e),i}function Ni(e){x.H=Wa;var t=null!==Ci&&null!==Ci.next;if(wi=0,ki=Ci=bi=null,Si=!1,_i=0,Ei=null,t)throw Error(a(300));null===e||_s||null!==(e=e.dependencies)&&To(e)&&(_s=!0)}function xi(e,t,n,r){bi=e;var o=0;do{if(Ii&&(Ei=null),_i=0,Ii=!1,25<=o)throw Error(a(301));if(o+=1,ki=Ci=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}x.H=Ga,i=t(n,r)}while(Ii);return i}function Li(){var e=x.H,t=e.useState()[0];return t="function"===typeof t.then?Ui(t):t,e=e.useState()[0],(null!==Ci?Ci.memoizedState:null)!==e&&(bi.flags|=1024),t}function qi(){var e=0!==Ai;return Ai=0,e}function Di(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Hi(e){if(Si){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Si=!1}wi=0,ki=Ci=bi=null,Ii=!1,_i=Ai=0,Ei=null}function zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ki?bi.memoizedState=ki=e:ki=ki.next=e,ki}function Fi(){if(null===Ci){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=Ci.next;var t=null===ki?bi.memoizedState:ki.next;if(null!==t)ki=t,Ci=e;else{if(null===e){if(null===bi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Ci=e).memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},null===ki?bi.memoizedState=ki=e:ki=ki.next=e}return ki}function Ui(e){var t=_i;return _i+=1,null===Ei&&(Ei=[]),e=Xo(Ei,e,t),t=bi,null===(null===ki?t.memoizedState:ki.next)&&(t=t.alternate,x.H=null===t||null===t.memoizedState?Qa:Va),e}function Bi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ui(e);if(e.$$typeof===C)return _o(e)}throw Error(a(438,String(e)))}function Ki(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=E;return t.index++,n}function ji(e,t){return"function"===typeof t?t(e):t}function Wi(e){return Qi(Fi(),Ci,e)}function Qi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var o=e.baseQueue,i=r.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}t.baseQueue=o=i,r.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var c=s=null,l=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(il&h)===h:(wi&h)===h){var f=u.revertLane;if(0===f)null!==l&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ho&&(d=!0);else{if((wi&f)===f){u=u.next,f===Ho&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=h,s=i):l=l.next=h,bi.lanes|=f,fl|=f}h=u.action,Ti&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=f,s=i):l=l.next=f,bi.lanes|=h,fl|=h;u=u.next}while(null!==u&&u!==t);if(null===l?s=i:l.next=c,!Yn(i,e.memoizedState)&&(_s=!0,d&&null!==(n=zo)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=l,r.lastRenderedState=i}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Vi(e){var t=Fi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);Yn(i,t.memoizedState)||(_s=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Gi(e,t,n){var r=bi,o=Fi(),i=io;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Yn((Ci||o).memoizedState,n);if(s&&(o.memoizedState=n,_s=!0),o=o.queue,ya(2048,8,$i.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==ki&&1&ki.memoizedState.tag){if(r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ji.bind(null,r,o,n,t),null),null===rl)throw Error(a(349));i||0!==(124&wi)||Yi(r,t,n)}return n}function Yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ji(e,t,n,r){t.value=n,t.getSnapshot=r,Xi(t)&&Zi(e)}function $i(e,t,n){return n(function(){Xi(t)&&Zi(e)})}function Xi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Zi(e){var t=Or(e,2);null!==t&&ql(t,e,2)}function ea(e){var t=zi();if("function"===typeof e){var n=e;if(e=n(),Ti){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Qi(e,Ci,"function"===typeof r?r:ji)}function na(e,t,n,r,o){if(Ba(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==x.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,ra(t,i)):(i.next=n.next,t.pending=n.next=i)}}function ra(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=x.T,a={};x.T=a;try{var s=n(o,r),c=x.S;null!==c&&c(a,s),oa(e,t,s)}catch(l){aa(e,t,l)}finally{x.T=i}}else try{oa(e,t,i=n(o,r))}catch(u){aa(e,t,u)}}function oa(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return aa(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ca(e,t){return t}function la(e,t){if(io){var n=rl.formState;if(null!==n){e:{var r=bi;if(io){if(oo){t:{for(var o=oo,i=so;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=yd(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){oo=yd(o.nextSibling),r="F!"===o.data;break e}}lo(r)}r=!1}r&&(t=n[0])}}return(n=zi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},n.queue=r,n=za.bind(null,bi,r),r.dispatch=n,r=ea(!1),i=Ua.bind(null,bi,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=zi()).queue=o,n=na.bind(null,bi,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function ua(e){return da(Fi(),Ci,e)}function da(e,t,n){if(t=Qi(e,t,ca)[0],e=Wi(ji)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Ui(t)}catch(a){if(a===Qo)throw Go;throw a}else r=t;var o=(t=Fi()).queue,i=o.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,pa(9,{destroy:void 0,resource:void 0},ha.bind(null,o,n),null)),[r,i,e]}function ha(e,t){e.action=t}function fa(e){var t=Fi(),n=Ci;if(null!==n)return da(t,n,e);Fi(),t=t.memoizedState;var r=(n=Fi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(){return Fi().memoizedState}function ma(e,t,n,r){var o=zi();r=void 0===r?null:r,bi.flags|=e,o.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function ya(e,t,n,r){var o=Fi();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==Ci&&null!==r&&Oi(r,Ci.memoizedState.deps)?o.memoizedState=pa(t,i,n,r):(bi.flags|=e,o.memoizedState=pa(1|t,i,n,r))}function va(e,t){ma(8390656,8,e,t)}function wa(e,t){ya(2048,8,e,t)}function ba(e,t){return ya(4,2,e,t)}function Ca(e,t){return ya(4,4,e,t)}function ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Sa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,4,ka.bind(null,t,e),n)}function Ia(){}function Ta(e,t){var n=Fi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Oi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Aa(e,t){var n=Fi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Oi(t,r[1]))return r[0];if(r=e(),Ti){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function _a(e,t,n){return void 0===n||0!==(1073741824&wi)?e.memoizedState=t:(e.memoizedState=n,e=Ll(),bi.lanes|=e,fl|=e,n)}function Ea(e,t,n,r){return Yn(n,t)?n:null!==pi.current?(e=_a(e,n,r),Yn(e,t)||(_s=!0),e):0===(42&wi)?(_s=!0,e.memoizedState=n):(e=Ll(),bi.lanes|=e,fl|=e,t)}function Pa(e,t,n,r,o){var i=L.p;L.p=0!==i&&8>i?i:8;var a=x.T,s={};x.T=s,Ua(e,!1,t,n);try{var c=o(),l=x.S;if(null!==l&&l(s,c),null!==c&&"object"===typeof c&&"function"===typeof c.then)Fa(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(c,r),xl());else Fa(e,t,r,xl())}catch(u){Fa(e,t,{then:function(){},status:"rejected",reason:u},xl())}finally{L.p=i,x.T=a}}function Ra(){}function Oa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var o=Ma(e).queue;Pa(e,o,t,q,null===n?Ra:function(){return Na(e),n(r)})}function Ma(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:q},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Na(e){Fa(e,Ma(e).next.queue,{},xl())}function xa(){return _o(Gd)}function La(){return Fi().memoizedState}function qa(){return Fi().memoizedState}function Da(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=xl(),r=ai(t,e=ii(n),n);return null!==r&&(ql(r,t,n),si(r,t,n)),t={cache:xo()},void(e.payload=t)}t=t.return}}function Ha(e,t,n){var r=xl();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ba(e)?Ka(t,n):null!==(n=Rr(e,t,n,r))&&(ql(n,e,r),ja(n,t,r))}function za(e,t,n){Fa(e,t,n,xl())}function Fa(e,t,n,r){var o={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ba(e))Ka(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,Yn(s,a))return Pr(e,t,o,0),null===rl&&Er(),!1}catch(c){}if(null!==(n=Rr(e,t,o,r)))return ql(n,e,r),ja(n,t,r),!0}return!1}function Ua(e,t,n,r){if(r={lane:2,revertLane:Pu(),action:r,hasEagerState:!1,eagerState:null,next:null},Ba(e)){if(t)throw Error(a(479))}else null!==(t=Rr(e,n,r,2))&&ql(t,e,2)}function Ba(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function Ka(e,t){Ii=Si=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ja(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}var Wa={readContext:_o,use:Bi,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useLayoutEffect:Ri,useInsertionEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useSyncExternalStore:Ri,useId:Ri,useHostTransitionStatus:Ri,useFormState:Ri,useActionState:Ri,useOptimistic:Ri,useMemoCache:Ri,useCacheRefresh:Ri},Qa={readContext:_o,use:Bi,useCallback:function(e,t){return zi().memoizedState=[e,void 0===t?null:t],e},useContext:_o,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4194308,4,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){ma(4,2,e,t)},useMemo:function(e,t){var n=zi();t=void 0===t?null:t;var r=e();if(Ti){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zi();if(void 0!==n){var o=n(t);if(Ti){he(!0);try{n(t)}finally{he(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=Ha.bind(null,bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zi().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=za.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ia,useDeferredValue:function(e,t){return _a(zi(),e,t)},useTransition:function(){var e=ea(!1);return e=Pa.bind(null,bi,e.queue,!0,!1),zi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bi,o=zi();if(io){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rl)throw Error(a(349));0!==(124&il)||Yi(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,va($i.bind(null,r,i,e),[e]),r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ji.bind(null,r,i,n,t),null),n},useId:function(){var e=zi(),t=rl.identifierPrefix;if(io){var n=Xr;t="\xab"+t+"R"+(n=($r&~(1<<32-fe($r)-1)).toString(32)+n),0<(n=Ai++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Pi++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:xa,useFormState:la,useActionState:la,useOptimistic:function(e){var t=zi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ua.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ki,useCacheRefresh:function(){return zi().memoizedState=Da.bind(null,bi)}},Va={readContext:_o,use:Bi,useCallback:Ta,useContext:_o,useEffect:wa,useImperativeHandle:Sa,useInsertionEffect:ba,useLayoutEffect:Ca,useMemo:Aa,useReducer:Wi,useRef:ga,useState:function(){return Wi(ji)},useDebugValue:Ia,useDeferredValue:function(e,t){return Ea(Fi(),Ci.memoizedState,e,t)},useTransition:function(){var e=Wi(ji)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Gi,useId:La,useHostTransitionStatus:xa,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ta(Fi(),0,e,t)},useMemoCache:Ki,useCacheRefresh:qa},Ga={readContext:_o,use:Bi,useCallback:Ta,useContext:_o,useEffect:wa,useImperativeHandle:Sa,useInsertionEffect:ba,useLayoutEffect:Ca,useMemo:Aa,useReducer:Vi,useRef:ga,useState:function(){return Vi(ji)},useDebugValue:Ia,useDeferredValue:function(e,t){var n=Fi();return null===Ci?_a(n,e,t):Ea(n,Ci.memoizedState,e,t)},useTransition:function(){var e=Vi(ji)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Gi,useId:La,useHostTransitionStatus:xa,useFormState:fa,useActionState:fa,useOptimistic:function(e,t){var n=Fi();return null!==Ci?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ki,useCacheRefresh:qa},Ya=null,Ja=0;function $a(e){var t=Ja;return Ja+=1,null===Ya&&(Ya=[]),Xo(Ya,e,t)}function Xa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Za(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Hr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&es(i)===t.type)?(Xa(t=o(t,n.props),n),t.return=e,t):(Xa(t=Fr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Ur(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Xa(n=Fr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case A:return h(e,t=(0,t._init)(t._payload),n)}if(N(t)||R(t))return(t=Ur(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,$a(t),n);if(t.$$typeof===C)return h(e,Eo(e,t),n);Za(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===o?l(e,t,n,r):null;case g:return n.key===o?u(e,t,n,r):null;case A:return f(e,t,n=(o=n._init)(n._payload),r)}if(N(n)||R(n))return null!==o?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,$a(n),r);if(n.$$typeof===C)return f(e,t,Eo(e,n),r);Za(e,n)}return null}function y(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case A:return y(e,t,n,r=(0,r._init)(r._payload),o)}if(N(r)||R(r))return d(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return y(e,t,n,$a(r),o);if(r.$$typeof===C)return y(e,t,n,Eo(t,r),o);Za(t,r)}return null}function v(c,l,u,d){if("object"===typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var w=u.key;null!==l;){if(l.key===w){if((w=u.type)===m){if(7===l.tag){n(c,l.sibling),(d=o(l,u.props.children)).return=c,c=d;break e}}else if(l.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===A&&es(w)===l.type){n(c,l.sibling),Xa(d=o(l,u.props),u),d.return=c,c=d;break e}n(c,l);break}t(c,l),l=l.sibling}u.type===m?((d=Ur(u.props.children,c.mode,d,u.key)).return=c,c=d):(Xa(d=Fr(u.type,u.key,u.props,null,c.mode,d),u),d.return=c,c=d)}return s(c);case g:e:{for(w=u.key;null!==l;){if(l.key===w){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){n(c,l.sibling),(d=o(l,u.children||[])).return=c,c=d;break e}n(c,l);break}t(c,l),l=l.sibling}(d=Kr(u,c.mode,d)).return=c,c=d}return s(c);case A:return v(c,l,u=(w=u._init)(u._payload),d)}if(N(u))return function(o,a,s,c){for(var l=null,u=null,d=a,p=a=0,g=null;null!==d&&p<s.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=f(o,d,s[p],c);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(o,d),a=i(m,a,p),null===u?l=m:u.sibling=m,u=m,d=g}if(p===s.length)return n(o,d),io&&Zr(o,p),l;if(null===d){for(;p<s.length;p++)null!==(d=h(o,s[p],c))&&(a=i(d,a,p),null===u?l=d:u.sibling=d,u=d);return io&&Zr(o,p),l}for(d=r(d);p<s.length;p++)null!==(g=y(d,o,p,s[p],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),a=i(g,a,p),null===u?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),io&&Zr(o,p),l}(c,l,u,d);if(R(u)){if("function"!==typeof(w=R(u)))throw Error(a(150));return function(o,s,c,l){if(null==c)throw Error(a(151));for(var u=null,d=null,p=s,g=s=0,m=null,v=c.next();null!==p&&!v.done;g++,v=c.next()){p.index>g?(m=p,p=null):m=p.sibling;var w=f(o,p,v.value,l);if(null===w){null===p&&(p=m);break}e&&p&&null===w.alternate&&t(o,p),s=i(w,s,g),null===d?u=w:d.sibling=w,d=w,p=m}if(v.done)return n(o,p),io&&Zr(o,g),u;if(null===p){for(;!v.done;g++,v=c.next())null!==(v=h(o,v.value,l))&&(s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return io&&Zr(o,g),u}for(p=r(p);!v.done;g++,v=c.next())null!==(v=y(p,o,g,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(o,e)}),io&&Zr(o,g),u}(c,l,u=w.call(u),d)}if("function"===typeof u.then)return v(c,l,$a(u),d);if(u.$$typeof===C)return v(c,l,Eo(c,u),d);Za(c,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==l&&6===l.tag?(n(c,l.sibling),(d=o(l,u)).return=c,c=d):(n(c,l),(d=Br(u,c.mode,d)).return=c,c=d),s(c)):n(c,l)}return function(e,t,n,r){try{Ja=0;var o=v(e,t,n,r);return Ya=null,o}catch(a){if(a===Qo||a===Go)throw a;var i=qr(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var ns=ts(!0),rs=ts(!1),os=z(null),is=null;function as(e){var t=e.alternate;U(us,1&us.current),U(os,e),null===is&&(null===t||null!==pi.current||null!==t.memoizedState)&&(is=e)}function ss(e){if(22===e.tag){if(U(us,us.current),U(os,e),null===is){var t=e.alternate;null!==t&&null!==t.memoizedState&&(is=e)}}else cs()}function cs(){U(us,us.current),U(os,os.current)}function ls(e){F(os),is===e&&(is=null),F(us)}var us=z(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||md(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xl(),o=ii(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=ai(e,o,r))&&(ql(t,e,r),si(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xl(),o=ii(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=ai(e,o,r))&&(ql(t,e,r),si(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xl(),r=ii(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ai(e,r,n))&&(ql(t,e,n),si(t,e,n))}};function ps(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(o,i))}function gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fs.enqueueReplaceState(t,t.state,null)}function ms(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=h({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}var ys="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vs(e){ys(e)}function ws(e){console.error(e)}function bs(e){ys(e)}function Cs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ks(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ss(e,t,n){return(n=ii(n)).tag=3,n.payload={element:null},n.callback=function(){Cs(e,t)},n}function Is(e){return(e=ii(e)).tag=3,e}function Ts(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){ks(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){ks(t,n,r),"function"!==typeof o&&(null===Il?Il=new Set([this]):Il.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var As=Error(a(461)),_s=!1;function Es(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function Ps(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Ao(t),r=Mi(e,t,n,a,i,o),s=qi(),null===e||_s?(io&&s&&to(t),t.flags|=1,Es(e,t,r,o),t.child):(Di(e,t,o),Ys(e,t,o))}function Rs(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Dr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Fr(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Os(e,t,i,r,o))}if(i=e.child,!Js(e,o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(a,r)&&e.ref===t.ref)return Ys(e,t,o)}return t.flags|=1,(e=Hr(i,r)).ref=t.ref,e.return=t,t.child=e}function Os(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(Jn(i,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=i,!Js(e,o))return t.lanes=e.lanes,Ys(e,t,o);0!==(131072&e.flags)&&(_s=!0)}}return Ls(e,t,n,r,o)}function Ms(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(o=t.child=e.child,i=0;null!==o;)i=i|o.lanes|o.childLanes,o=o.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Ns(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ns(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&jo(0,null!==i?i.cachePool:null),null!==i?mi(t,i):yi(),ss(t)}else null!==i?(jo(0,i.cachePool),mi(t,i),cs(),t.memoizedState=null):(null!==e&&jo(0,null),yi(),cs());return Es(e,t,o,n),t.child}function Ns(e,t,n,r){var o=Ko();return o=null===o?null:{parent:No._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&jo(0,null),yi(),ss(t),null!==e&&Io(e,t,r,!0),null}function xs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ls(e,t,n,r,o){return Ao(t),n=Mi(e,t,n,r,void 0,o),r=qi(),null===e||_s?(io&&r&&to(t),t.flags|=1,Es(e,t,n,o),t.child):(Di(e,t,o),Ys(e,t,o))}function qs(e,t,n,r,o,i){return Ao(t),t.updateQueue=null,n=xi(t,r,n,o),Ni(e),r=qi(),null===e||_s?(io&&r&&to(t),t.flags|=1,Es(e,t,n,i),t.child):(Di(e,t,i),Ys(e,t,i))}function Ds(e,t,n,r,o){if(Ao(t),null===t.stateNode){var i=xr,a=n.contextType;"object"===typeof a&&null!==a&&(i=_o(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=fs,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ri(t),a=n.contextType,i.context="object"===typeof a&&null!==a?_o(a):xr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(hs(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&fs.enqueueReplaceState(i,i.state,null),di(t,r,i,o),ui(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,c=ms(n,s);i.props=c;var l=i.context,u=n.contextType;a=xr,"object"===typeof u&&null!==u&&(a=_o(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||l!==a)&&gs(t,i,r,a),ni=!1;var h=t.memoizedState;i.state=h,di(t,r,i,o),ui(),l=t.memoizedState,s||h!==l||ni?("function"===typeof d&&(hs(t,n,d,r),l=t.memoizedState),(c=ni||ps(t,n,c,r,h,l,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=a,r=c):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,oi(e,t),u=ms(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,l=n.contextType,c=xr,"object"===typeof l&&null!==l&&(c=_o(l)),(l="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==c)&&gs(t,i,r,c),ni=!1,h=t.memoizedState,i.state=h,di(t,r,i,o),ui();var f=t.memoizedState;a!==d||h!==f||ni||null!==e&&null!==e.dependencies&&To(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),f=t.memoizedState),(u=ni||ps(t,n,u,r,h,f,c)||null!==e&&null!==e.dependencies&&To(e.dependencies))?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=c,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,xs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,o),t.child=ns(t,null,n,o)):Es(e,t,n,o),t.memoizedState=i.state,e=t.child):e=Ys(e,t,o),e}function Hs(e,t,n,r){return po(),t.flags|=256,Es(e,t,n,r),t.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fs(e){return{baseLanes:e,cachePool:Wo()}}function Us(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=ml),e}function Bs(e,t,n){var r,o=t.pendingProps,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&us.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(io){if(i?as(t):cs(),io){var c,l=oo;if(c=l){e:{for(c=l,l=so;8!==c.nodeType;){if(!l){l=null;break e}if(null===(c=yd(c.nextSibling))){l=null;break e}}l=c}null!==l?(t.memoizedState={dehydrated:l,treeContext:null!==Jr?{id:$r,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(c=qr(18,null,null,0)).stateNode=l,c.return=t,t.child=c,ro=t,oo=null,c=!0):c=!1}c||lo(t)}if(null!==(l=t.memoizedState)&&null!==(l=l.dehydrated))return md(l)?t.lanes=32:t.lanes=536870912,null;ls(t)}return l=o.children,o=o.fallback,i?(cs(),l=js({mode:"hidden",children:l},i=t.mode),o=Ur(o,i,n,null),l.return=t,o.return=t,l.sibling=o,t.child=l,(i=t.child).memoizedState=Fs(n),i.childLanes=Us(e,r,n),t.memoizedState=zs,o):(as(t),Ks(t,l))}if(null!==(c=e.memoizedState)&&null!==(l=c.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Ws(e,t,n)):null!==t.memoizedState?(cs(),t.child=e.child,t.flags|=128,t=null):(cs(),i=o.fallback,l=t.mode,o=js({mode:"visible",children:o.children},l),(i=Ur(i,l,n,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,ns(t,e.child,null,n),(o=t.child).memoizedState=Fs(n),o.childLanes=Us(e,r,n),t.memoizedState=zs,t=i);else if(as(t),md(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(a(419))).stack="",o.digest=r,mo({value:o,source:null,stack:null}),t=Ws(e,t,n)}else if(_s||Io(e,t,n,!1),r=0!==(n&e.childLanes),_s||r){if(null!==(r=rl)&&(0!==(o=0!==((o=0!==(42&(o=n&-n))?1:Ee(o))&(r.suspendedLanes|n))?0:o)&&o!==c.retryLane))throw c.retryLane=o,Or(e,o),ql(r,e,o),As;"$?"===l.data||Vl(),t=Ws(e,t,n)}else"$?"===l.data?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,oo=yd(l.nextSibling),ro=t,io=!0,ao=null,so=!1,null!==e&&(Gr[Yr++]=$r,Gr[Yr++]=Xr,Gr[Yr++]=Jr,$r=e.id,Xr=e.overflow,Jr=t),(t=Ks(t,o.children)).flags|=4096);return t}return i?(cs(),i=o.fallback,l=t.mode,u=(c=e.child).sibling,(o=Hr(c,{mode:"hidden",children:o.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?i=Hr(u,i):(i=Ur(i,l,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,null===(l=e.child.memoizedState)?l=Fs(n):(null!==(c=l.cachePool)?(u=No._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=Wo(),l={baseLanes:l.baseLanes|n,cachePool:c}),i.memoizedState=l,i.childLanes=Us(e,r,n),t.memoizedState=zs,o):(as(t),e=(n=e.child).sibling,(n=Hr(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ks(e,t){return(t=js({mode:"visible",children:t},e.mode)).return=e,e.child=t}function js(e,t){return(e=qr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ws(e,t,n){return ns(t,e.child,null,n),(e=Ks(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ko(e.return,t,n)}function Vs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Gs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Es(e,t,r.children,n),0!==(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qs(e,n,t);else if(19===e.tag)Qs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(us,r),o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Vs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ds(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Vs(t,!0,n,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fl|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Io(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Hr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Js(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!To(e))}function $s(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_s=!0;else{if(!Js(e,n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),bo(0,No,e.memoizedState.cache),po();break;case 27:case 5:G(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:bo(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(as(t),null!==(e=Ys(e,t,n))?e.sibling:null);as(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Io(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),U(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n);case 24:bo(0,No,e.memoizedState.cache)}return Ys(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,io&&0!==(1048576&t.flags)&&eo(t,Vr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((o=r.$$typeof)===k){t.tag=11,t=Ps(null,t,r,e,n);break e}if(o===T){t.tag=14,t=Rs(null,t,r,e,n);break e}}throw t=M(r)||r,Error(a(306,t,""))}Dr(r)?(e=ms(r,e),t.tag=1,t=Ds(null,t,r,e,n)):(t.tag=0,t=Ls(null,t,r,e,n))}return t;case 0:return Ls(e,t,t.type,t.pendingProps,n);case 1:return Ds(e,t,r=t.type,o=ms(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;o=i.element,oi(e,t),di(t,r,null,n);var s=t.memoizedState;if(r=s.cache,bo(0,No,r),r!==i.cache&&So(t,[No],n,!0),ui(),r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Hs(e,t,r,n);break e}if(r!==o){mo(o=Ir(Error(a(424)),t)),t=Hs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(oo=yd(e.firstChild),ro=t,io=!0,ao=null,so=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===o){t=Ys(e,t,n);break e}Es(e,t,r,n)}t=t.child}return t;case 26:return xs(e,t),null===e?(n=Ed(t.type,null,t.pendingProps,null))?t.memoizedState=n:io||(n=t.type,e=t.pendingProps,(r=rd(j.current).createElement(n))[Me]=t,r[Ne]=e,ed(r,n,e),We(r),t.stateNode=r):t.memoizedState=Ed(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&io&&(r=t.stateNode=bd(t.type,t.pendingProps,j.current),ro=t,so=!0,o=oo,fd(t.type)?(vd=o,oo=yd(r.firstChild)):oo=o),Es(e,t,t.pendingProps.children,n),xs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&io&&((o=r=oo)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,so))?(t.stateNode=r,ro=t,oo=yd(r.firstChild),so=!1,o=!0):o=!1),o||lo(t)),G(t),o=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,ad(o,i)?r=null:null!==s&&ad(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=Mi(e,t,Li,null,null,n),Gd._currentValue=o),xs(e,t),Es(e,t,r,n),t.child;case 6:return null===e&&io&&((e=n=oo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,so))?(t.stateNode=n,ro=t,oo=null,e=!0):e=!1),e||lo(t)),null;case 13:return Bs(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Es(e,t,r,n),t.child;case 11:return Ps(e,t,t.type,t.pendingProps,n);case 7:return Es(e,t,t.pendingProps,n),t.child;case 8:case 12:return Es(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bo(0,t.type,r.value),Es(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Ao(t),r=r(o=_o(o)),t.flags|=1,Es(e,t,r,n),t.child;case 14:return Rs(e,t,t.type,t.pendingProps,n);case 15:return Os(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=js(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Hr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ms(e,t,n);case 24:return Ao(t),r=_o(No),null===e?(null===(o=Ko())&&(o=rl,i=xo(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:r,cache:o},ri(t),bo(0,No,o)):(0!==(e.lanes&n)&&(oi(e,t),di(t,null,null,n),ui()),o=e.memoizedState,i=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),bo(0,No,r)):(r=i.cache,bo(0,No,r),r!==o.cache&&So(t,[No],n,!0))),Es(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Xs(e){e.flags|=4}function Zs(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ud(t)){if(null!==(t=os.current)&&((4194048&il)===il?null!==is:(62914560&il)!==il&&0===(536870912&il)||t!==is))throw Zo=Yo,Vo;e.flags|=8192}}function ec(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yl|=t)}function tc(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rc(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nc(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Co(No),V(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fo(t)?Xs(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,go())),nc(t),null;case 26:return n=t.memoizedState,null===e?(Xs(t),null!==n?(nc(t),Zs(t,n)):(nc(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xs(t),nc(t),Zs(t,n)):(nc(t),t.flags&=-16777217):(e.memoizedProps!==r&&Xs(t),nc(t),t.flags&=-16777217),null;case 27:Y(t),n=j.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xs(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nc(t),null}e=B.current,fo(t)?uo(t):(e=bd(o,r,n),t.stateNode=e,Xs(t))}return nc(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xs(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nc(t),null}if(e=B.current,fo(t))uo(t);else{switch(o=rd(j.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?o.createElement(n,{is:r.is}):o.createElement(n)}}e[Me]=t,e[Ne]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xs(t)}}return nc(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Xs(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=j.current,fo(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=ro))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Me]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Ju(e.nodeValue,n)))||lo(t)}else(e=rd(e).createTextNode(r))[Me]=t,t.stateNode=e}return nc(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[Me]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nc(t),o=!1}else o=go(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(ls(t),t):(ls(t),null)}if(ls(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ec(t,t.updateQueue),nc(t),null;case 4:return V(),null===e&&Fu(t.stateNode.containerInfo),nc(t),null;case 10:return Co(t.type),nc(t),null;case 19:if(F(us),null===(o=t.memoizedState))return nc(t),null;if(r=0!==(128&t.flags),null===(i=o.rendering))if(r)tc(o,!1);else{if(0!==hl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=ds(e))){for(t.flags|=128,tc(o,!1),e=i.updateQueue,t.updateQueue=e,ec(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return U(us,1&us.current|2),t.child}e=e.sibling}null!==o.tail&&te()>kl&&(t.flags|=128,r=!0,tc(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ec(t,e),tc(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!io)return nc(t),null}else 2*te()-o.renderingStartTime>kl&&536870912!==n&&(t.flags|=128,r=!0,tc(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=o.last)?e.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=te(),t.sibling=null,e=us.current,U(us,r?1&e|2:1&e),t):(nc(t),null);case 22:case 23:return ls(t),vi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nc(t),6&t.subtreeFlags&&(t.flags|=8192)):nc(t),null!==(n=t.updateQueue)&&ec(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&F(Bo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Co(No),nc(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function oc(e,t){switch(no(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Co(No),V(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ls(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(us),null;case 4:return V(),null;case 10:return Co(t.type),null;case 22:case 23:return ls(t),vi(),null!==e&&F(Bo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Co(No),null;default:return null}}function ic(e,t){switch(no(t),t.tag){case 3:Co(No),V();break;case 26:case 27:case 5:Y(t);break;case 4:V();break;case 13:ls(t);break;case 19:F(us);break;case 10:Co(t.type);break;case 22:case 23:ls(t),vi(),null!==e&&F(Bo);break;case 24:Co(No)}}function ac(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==o)}}catch(s){uu(t,t.return,s)}}function sc(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,o=t;var c=n,l=s;try{l()}catch(u){uu(o,c,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function cc(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fi(t,n)}catch(r){uu(e,e.return,r)}}}function lc(e,t,n){n.props=ms(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function uc(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(o){uu(e,t,o)}}function dc(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){uu(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){uu(e,e.return,o)}}function fc(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,s=null,c=null,l=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":l=h;default:r.hasOwnProperty(p)||Xu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":o=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":c=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Xu(e,t,f,p,r,h)}}return void mt(e,s,c,l,u,d,i,o);case"select":for(i in p=s=c=f=null,n)if(l=n[i],n.hasOwnProperty(i)&&null!=l)switch(i){case"value":break;case"multiple":p=l;default:r.hasOwnProperty(i)||Xu(e,t,i,null,r,l)}for(o in r)if(i=r[o],l=n[o],r.hasOwnProperty(o)&&(null!=i||null!=l))switch(o){case"value":f=i;break;case"defaultValue":c=i;break;case"multiple":s=i;default:i!==l&&Xu(e,t,o,i,r,l)}return t=c,n=s,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(c in p=f=null,n)if(o=n[c],n.hasOwnProperty(c)&&null!=o&&!r.hasOwnProperty(c))switch(c){case"value":case"children":break;default:Xu(e,t,c,null,r,o)}for(s in r)if(o=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=o||null!=i))switch(s){case"value":f=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(a(91));break;default:o!==i&&Xu(e,t,s,o,r,i)}return void bt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Xu(e,t,g,null,r,f);for(l in r)if(f=r[l],p=n[l],r.hasOwnProperty(l)&&f!==p&&(null!=f||null!=p))if("selected"===l)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Xu(e,t,l,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Xu(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Xu(e,t,u,f,r,p)}return;default:if(At(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Zu(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Xu(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Xu(e,t,h,f,r,p)}(r,e.type,n,t),r[Ne]=t}catch(o){uu(e,e.return,o)}}function pc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function gc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function mc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(mc(e,t,n),e=e.sibling;null!==e;)mc(e,t,n),e=e.sibling}function yc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yc(e,t,n),e=e.sibling;null!==e;)yc(e,t,n),e=e.sibling}function vc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ed(t,r,n),t[Me]=e,t[Ne]=n}catch(i){uu(e,e.return,i)}}var wc=!1,bc=!1,Cc=!1,kc="function"===typeof WeakSet?WeakSet:Set,Sc=null;function Ic(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Dc(e,n),4&r&&ac(5,n);break;case 1:if(Dc(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var o=ms(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){uu(n,n.return,s)}}64&r&&cc(n),512&r&&uc(n,n.return);break;case 3:if(Dc(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fi(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&vc(n);case 26:case 5:Dc(e,n),null===t&&4&r&&hc(n),512&r&&uc(n,n.return);break;case 12:Dc(e,n);break;case 13:Dc(e,n),4&r&&Rc(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wc)){t=null!==t&&null!==t.memoizedState||bc,o=wc;var i=bc;wc=r,(bc=t)&&!i?zc(e,n,0!==(8772&n.subtreeFlags)):Dc(e,n),wc=o,bc=i}break;case 30:break;default:Dc(e,n)}}function Tc(e){var t=e.alternate;null!==t&&(e.alternate=null,Tc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Fe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ac=null,_c=!1;function Ec(e,t,n){for(n=n.child;null!==n;)Pc(e,t,n),n=n.sibling}function Pc(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:bc||dc(n,t),Ec(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bc||dc(n,t);var r=Ac,o=_c;fd(n.type)&&(Ac=n.stateNode,_c=!1),Ec(e,t,n),Cd(n.stateNode),Ac=r,_c=o;break;case 5:bc||dc(n,t);case 6:if(r=Ac,o=_c,Ac=null,Ec(e,t,n),_c=o,null!==(Ac=r))if(_c)try{(9===Ac.nodeType?Ac.body:"HTML"===Ac.nodeName?Ac.ownerDocument.body:Ac).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Ac.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Ac&&(_c?(pd(9===(e=Ac).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_h(e)):pd(Ac,n.stateNode));break;case 4:r=Ac,o=_c,Ac=n.stateNode.containerInfo,_c=!0,Ec(e,t,n),Ac=r,_c=o;break;case 0:case 11:case 14:case 15:bc||sc(2,n,t),bc||sc(4,n,t),Ec(e,t,n);break;case 1:bc||(dc(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&lc(n,t,r)),Ec(e,t,n);break;case 21:Ec(e,t,n);break;case 22:bc=(r=bc)||null!==n.memoizedState,Ec(e,t,n),bc=r;break;default:Ec(e,t,n)}}function Rc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_h(e)}catch(n){uu(t,t.return,n)}}function Oc(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kc),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],i=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 27:if(fd(c.type)){Ac=c.stateNode,_c=!1;break e}break;case 5:Ac=c.stateNode,_c=!1;break e;case 3:case 4:Ac=c.stateNode.containerInfo,_c=!0;break e}c=c.return}if(null===Ac)throw Error(a(160));Pc(i,s,o),Ac=null,_c=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)xc(t,e),t=t.sibling}var Nc=null;function xc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mc(t,e),Lc(e),4&r&&(sc(3,e,e.return),ac(3,e),sc(5,e,e.return));break;case 1:Mc(t,e),Lc(e),512&r&&(bc||null===n||dc(n,n.return)),64&r&&wc&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Nc;if(Mc(t,e),Lc(e),512&r&&(bc||null===n||dc(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(i=o.getElementsByTagName("title")[0])||i[ze]||i[Me]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),ed(i,r,n),i[Me]=e,We(i),r=i;break e;case"link":var s=zd("link","href",o).get(r+(n.href||""));if(s)for(var c=0;c<s.length;c++)if((i=s[c]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(c,1);break t}ed(i=o.createElement(r),r,n),o.head.appendChild(i);break;case"meta":if(s=zd("meta","content",o).get(r+(n.content||"")))for(c=0;c<s.length;c++)if((i=s[c]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(c,1);break t}ed(i=o.createElement(r),r,n),o.head.appendChild(i);break;default:throw Error(a(468,r))}i[Me]=e,We(i),r=i}e.stateNode=r}else Fd(o,e.type,e.stateNode);else e.stateNode=xd(o,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Fd(o,e.type,e.stateNode):xd(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Mc(t,e),Lc(e),512&r&&(bc||null===n||dc(n,n.return)),null!==n&&4&r&&fc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Mc(t,e),Lc(e),512&r&&(bc||null===n||dc(n,n.return)),32&e.flags){o=e.stateNode;try{kt(o,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fc(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(Cc=!0);break;case 6:if(Mc(t,e),Lc(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Hd=null,o=Nc,Nc=Id(t.containerInfo),Mc(t,e),Nc=o,Lc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_h(t.containerInfo)}catch(p){uu(e,e.return,p)}Cc&&(Cc=!1,qc(e));break;case 4:r=Nc,Nc=Id(e.stateNode.containerInfo),Mc(t,e),Lc(e),Nc=r;break;case 12:default:Mc(t,e),Lc(e);break;case 13:Mc(t,e),Lc(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Cl=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Oc(e,r)));break;case 22:o=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,u=wc,d=bc;if(wc=u||o,bc=d||l,Mc(t,e),bc=d,wc=u,Lc(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||l||wc||bc||Hc(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(i=l.stateNode,o)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{c=l.stateNode;var h=l.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;c.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(l,l.return,p)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(p){uu(l,l.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Oc(e,n))));break;case 19:Mc(t,e),Lc(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Oc(e,r)));case 30:case 21:}}function Lc(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pc(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var o=n.stateNode;yc(e,gc(e),o);break;case 5:var i=n.stateNode;32&n.flags&&(kt(i,""),n.flags&=-33),yc(e,gc(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;mc(e,gc(e),s);break;default:throw Error(a(161))}}catch(c){uu(e,e.return,c)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function qc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;qc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Dc(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ic(e,t.alternate,t),t=t.sibling}function Hc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sc(4,t,t.return),Hc(t);break;case 1:dc(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&lc(t,t.return,n),Hc(t);break;case 27:Cd(t.stateNode);case 26:case 5:dc(t,t.return),Hc(t);break;case 22:null===t.memoizedState&&Hc(t);break;default:Hc(t)}e=e.sibling}}function zc(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:zc(o,i,n),ac(4,i);break;case 1:if(zc(o,i,n),"function"===typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(l){uu(r,r.return,l)}if(null!==(o=(r=i).updateQueue)){var s=r.stateNode;try{var c=o.shared.hiddenCallbacks;if(null!==c)for(o.shared.hiddenCallbacks=null,o=0;o<c.length;o++)hi(c[o],s)}catch(l){uu(r,r.return,l)}}n&&64&a&&cc(i),uc(i,i.return);break;case 27:vc(i);case 26:case 5:zc(o,i,n),n&&null===r&&4&a&&hc(i),uc(i,i.return);break;case 12:zc(o,i,n);break;case 13:zc(o,i,n),n&&4&a&&Rc(o,i);break;case 22:null===i.memoizedState&&zc(o,i,n),uc(i,i.return);break;case 30:break;default:zc(o,i,n)}t=t.sibling}}function Fc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Lo(n))}function Uc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Lo(e))}function Bc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Kc(e,t,n,r),t=t.sibling}function Kc(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Bc(e,t,n,r),2048&o&&ac(9,t);break;case 1:case 13:default:Bc(e,t,n,r);break;case 3:Bc(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Lo(e)));break;case 12:if(2048&o){Bc(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,s=i.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(c){uu(t,t.return,c)}}else Bc(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Bc(e,t,n,r):Wc(e,t):2&i._visibility?Bc(e,t,n,r):(i._visibility|=2,jc(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&o&&Fc(a,t);break;case 24:Bc(e,t,n,r),2048&o&&Uc(t.alternate,t)}}function jc(e,t,n,r,o){for(o=o&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,s=n,c=r,l=a.flags;switch(a.tag){case 0:case 11:case 15:jc(i,a,s,c,o),ac(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?jc(i,a,s,c,o):Wc(i,a):(u._visibility|=2,jc(i,a,s,c,o)),o&&2048&l&&Fc(a.alternate,a);break;case 24:jc(i,a,s,c,o),o&&2048&l&&Uc(a.alternate,a);break;default:jc(i,a,s,c,o)}t=t.sibling}}function Wc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:Wc(n,r),2048&o&&Fc(r.alternate,r);break;case 24:Wc(n,r),2048&o&&Uc(r.alternate,r);break;default:Wc(n,r)}t=t.sibling}}var Qc=8192;function Vc(e){if(e.subtreeFlags&Qc)for(e=e.child;null!==e;)Gc(e),e=e.sibling}function Gc(e){switch(e.tag){case 26:Vc(e),e.flags&Qc&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(a(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var o=Pd(n.href),i=e.querySelector(Rd(o));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=jd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void We(i);i=e.ownerDocument||e,n=Od(n),(o=kd.get(o))&&qd(n,o),We(i=i.createElement("link"));var s=i;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=jd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Nc,e.memoizedState,e.memoizedProps);break;case 5:default:Vc(e);break;case 3:case 4:var t=Nc;Nc=Id(e.stateNode.containerInfo),Vc(e),Nc=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Qc,Qc=16777216,Vc(e),Qc=t):Vc(e))}}function Yc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sc=r,Zc(r,e)}Yc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$c(e),e=e.sibling}function $c(e){switch(e.tag){case 0:case 11:case 15:Jc(e),2048&e.flags&&sc(9,e,e.return);break;case 3:case 12:default:Jc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xc(e)):Jc(e)}}function Xc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sc=r,Zc(r,e)}Yc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sc(8,t,t.return),Xc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xc(t));break;default:Xc(t)}e=e.sibling}}function Zc(e,t){for(;null!==Sc;){var n=Sc;switch(n.tag){case 0:case 11:case 15:sc(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Lo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sc=r;else e:for(n=e;null!==Sc;){var o=(r=Sc).sibling,i=r.return;if(Tc(r),r===n){Sc=null;break e}if(null!==o){o.return=i,Sc=o;break e}Sc=i}}}var el={getCacheForType:function(e){var t=_o(No),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tl="function"===typeof WeakMap?WeakMap:Map,nl=0,rl=null,ol=null,il=0,al=0,sl=null,cl=!1,ll=!1,ul=!1,dl=0,hl=0,fl=0,pl=0,gl=0,ml=0,yl=0,vl=null,wl=null,bl=!1,Cl=0,kl=1/0,Sl=null,Il=null,Tl=0,Al=null,_l=null,El=0,Pl=0,Rl=null,Ol=null,Ml=0,Nl=null;function xl(){if(0!==(2&nl)&&0!==il)return il&-il;if(null!==x.T){return 0!==Ho?Ho:Pu()}return Re()}function Ll(){0===ml&&(ml=0===(536870912&il)||io?ke():536870912);var e=os.current;return null!==e&&(e.flags|=32),ml}function ql(e,t,n){(e!==rl||2!==al&&9!==al)&&null===e.cancelPendingCommit||(Kl(e,0),Fl(e,il,ml,!1)),Te(e,n),0!==(2&nl)&&e===rl||(e===rl&&(0===(2&nl)&&(pl|=n),4===hl&&Fl(e,il,ml,!1)),ku(e))}function Dl(e,t,n){if(0!==(6&nl))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),o=r?function(e,t){var n=nl;nl|=2;var r=Wl(),o=Ql();rl!==e||il!==t?(Sl=null,kl=te()+500,Kl(e,t)):ll=be(e,t);e:for(;;)try{if(0!==al&&null!==ol){t=ol;var i=sl;t:switch(al){case 1:al=0,sl=null,Zl(e,t,i,1);break;case 2:case 9:if(Jo(i)){al=0,sl=null,Xl(t);break}t=function(){2!==al&&9!==al||rl!==e||(al=7),ku(e)},i.then(t,t);break e;case 3:al=7;break e;case 4:al=5;break e;case 7:Jo(i)?(al=0,sl=null,Xl(t)):(al=0,sl=null,Zl(e,t,i,7));break;case 5:var s=null;switch(ol.tag){case 26:s=ol.memoizedState;case 5:case 27:var c=ol;if(!s||Ud(s)){al=0,sl=null;var l=c.sibling;if(null!==l)ol=l;else{var u=c.return;null!==u?(ol=u,eu(u)):ol=null}break t}}al=0,sl=null,Zl(e,t,i,5);break;case 6:al=0,sl=null,Zl(e,t,i,6);break;case 8:Bl(),hl=6;break e;default:throw Error(a(462))}}Jl();break}catch(d){jl(e,d)}return wo=vo=null,x.H=r,x.A=o,nl=n,null!==ol?0:(rl=null,il=0,Er(),hl)}(e,t):Gl(e,t,!0),i=r;;){if(0===o){ll&&!r&&Fl(e,t,0,!1);break}if(n=e.current.alternate,!i||zl(n)){if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var c=e;o=vl;var l=c.current.memoizedState.isDehydrated;if(l&&(Kl(c,s).flags|=256),2!==(s=Gl(c,s,!1))){if(ul&&!l){c.errorRecoveryDisabledLanes|=i,pl|=i,o=4;break e}i=wl,wl=o,null!==i&&(null===wl?wl=i:wl.push.apply(wl,i))}o=s}if(i=!1,2!==o)continue}}if(1===o){Kl(e,0),Fl(e,t,0,!0);break}e:{switch(r=e,i=o){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Fl(r,t,ml,!cl);break e;case 2:wl=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(o=Cl+300-te())){if(Fl(r,t,ml,!cl),0!==we(r,0,!0))break e;r.timeoutHandle=cd(Hl.bind(null,r,n,wl,Sl,bl,t,ml,pl,yl,cl,i,2,-0,0),o)}else Hl(r,n,wl,Sl,bl,t,ml,pl,yl,cl,i,0,-0,0)}break}o=Gl(e,t,!1),i=!1}ku(e)}function Hl(e,t,n,r,o,i,s,c,l,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:Kd},Gc(t),null!==(h=function(){if(null===Bd)throw Error(a(475));var e=Bd;return e.stylesheets&&0===e.count&&Qd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,o,s,c,l,d,1,f,p)),void Fl(e,i,s,!u);nu(e,t,i,n,r,o,s,c,l)}function zl(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Yn(i(),o))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fl(e,t,n,r){t&=~gl,t&=~pl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-fe(o),a=1<<i;r[i]=-1,o&=~a}0!==n&&Ae(e,n,t)}function Ul(){return 0!==(6&nl)||(Su(0,!1),!1)}function Bl(){if(null!==ol){if(0===al)var e=ol.return;else wo=vo=null,Hi(e=ol),Ya=null,Ja=0,e=ol;for(;null!==e;)ic(e.alternate,e),e=e.return;ol=null}}function Kl(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ld(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bl(),rl=e,ol=n=Hr(e.current,null),il=t,al=0,sl=null,cl=!1,ll=be(e,t),ul=!1,yl=ml=gl=pl=fl=hl=0,wl=vl=null,bl=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-fe(r),i=1<<o;t|=e[o],r&=~i}return dl=t,Er(),n}function jl(e,t){bi=null,x.H=Wa,t===Qo||t===Go?(t=ei(),al=3):t===Vo?(t=ei(),al=4):al=t===As?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sl=t,null===ol&&(hl=1,Cs(e,Ir(t,e.current)))}function Wl(){var e=x.H;return x.H=Wa,null===e?Wa:e}function Ql(){var e=x.A;return x.A=el,e}function Vl(){hl=4,cl||(4194048&il)!==il&&null!==os.current||(ll=!0),0===(134217727&fl)&&0===(134217727&pl)||null===rl||Fl(rl,il,ml,!1)}function Gl(e,t,n){var r=nl;nl|=2;var o=Wl(),i=Ql();rl===e&&il===t||(Sl=null,Kl(e,t)),t=!1;var a=hl;e:for(;;)try{if(0!==al&&null!==ol){var s=ol,c=sl;switch(al){case 8:Bl(),a=6;break e;case 3:case 2:case 9:case 6:null===os.current&&(t=!0);var l=al;if(al=0,sl=null,Zl(e,s,c,l),n&&ll){a=0;break e}break;default:l=al,al=0,sl=null,Zl(e,s,c,l)}}Yl(),a=hl;break}catch(u){jl(e,u)}return t&&e.shellSuspendCounter++,wo=vo=null,nl=r,x.H=o,x.A=i,null===ol&&(rl=null,il=0,Er()),a}function Yl(){for(;null!==ol;)$l(ol)}function Jl(){for(;null!==ol&&!Z();)$l(ol)}function $l(e){var t=$s(e.alternate,e,dl);e.memoizedProps=e.pendingProps,null===t?eu(e):ol=t}function Xl(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=qs(n,t,t.pendingProps,t.type,void 0,il);break;case 11:t=qs(n,t,t.pendingProps,t.type.render,t.ref,il);break;case 5:Hi(t);default:ic(n,t),t=$s(n,t=ol=zr(t,dl),dl)}e.memoizedProps=e.pendingProps,null===t?eu(e):ol=t}function Zl(e,t,n,r){wo=vo=null,Hi(t),Ya=null,Ja=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Io(t,n,o,!0),null!==(n=os.current)){switch(n.tag){case 13:return null===is?Vl():null===n.alternate&&0===hl&&(hl=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===Yo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,o)),!1;case 22:return n.flags|=65536,r===Yo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,o)),!1}throw Error(a(435,n.tag))}return du(e,r,o),Vl(),!1}if(io)return null!==(t=os.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==co&&mo(Ir(e=Error(a(422),{cause:r}),n))):(r!==co&&mo(Ir(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=Ir(r,n),ci(e,o=Ss(e.stateNode,r,o)),4!==hl&&(hl=2)),!1;var i=Error(a(520),{cause:r});if(i=Ir(i,n),null===vl?vl=[i]:vl.push(i),4!==hl&&(hl=2),null===t)return!0;r=Ir(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,ci(n,e=Ss(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Il||!Il.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Ts(o=Is(o),e,n,r),ci(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,il))return hl=1,Cs(e,Ir(n,e.current)),void(ol=null)}catch(i){if(null!==o)throw ol=o,i;return hl=1,Cs(e,Ir(n,e.current)),void(ol=null)}32768&t.flags?(io||1===r?e=!0:ll||0!==(536870912&il)?e=!1:(cl=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=os.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,cl);e=t.return;var n=rc(t.alternate,t,dl);if(null!==n)return void(ol=n);if(null!==(t=t.sibling))return void(ol=t);ol=t=e}while(null!==t);0===hl&&(hl=5)}function tu(e,t){do{var n=oc(e.alternate,e);if(null!==n)return n.flags&=32767,void(ol=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ol=e);ol=e=n}while(null!==e);hl=6,ol=null}function nu(e,t,n,r,o,i,s,c,l){e.cancelPendingCommit=null;do{su()}while(0!==Tl);if(0!==(6&nl))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,o,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;s[u]=0,c[u]=-1;var h=l[u];if(null!==h)for(l[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ae(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=_r,s,c,l),e===rl&&(ol=rl=null,il=0),_l=t,Al=e,El=n,Pl=i,Rl=o,Ol=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(ie,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=x.T,x.T=null,o=L.p,L.p=2,s=nl,nl|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(m){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==i||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(c=s),f===i&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sc=t;null!==Sc;)if(e=(t=Sc).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sc=e;else for(;null!==Sc;){switch(i=(t=Sc).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var g=ms(n.type,o,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Sc=e;break}Sc=t.return}}(e,t)}finally{nl=s,L.p=o,x.T=r}}Tl=1,ru(),ou(),iu()}}function ru(){if(1===Tl){Tl=0;var e=Al,t=_l,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=x.T,x.T=null;var r=L.p;L.p=2;var o=nl;nl|=4;try{xc(t,e);var i=nd,a=er(e.containerInfo),s=i.focusedElem,c=i.selectionRange;if(a!==s&&s&&s.ownerDocument&&Zn(s.ownerDocument.documentElement,s)){if(null!==c&&tr(s)){var l=c.start,u=c.end;if(void 0===u&&(u=l),"selectionStart"in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=s.textContent.length,g=Math.min(c.start,p),m=void 0===c.end?g:Math.min(c.end,p);!f.extend&&g>m&&(a=m,m=g,g=a);var y=Xn(s,g),v=Xn(s,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=d.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(d=[],f=s;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nh=!!td,nd=td=null}finally{nl=o,L.p=r,x.T=n}}e.current=t,Tl=2}}function ou(){if(2===Tl){Tl=0;var e=Al,t=_l,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=x.T,x.T=null;var r=L.p;L.p=2;var o=nl;nl|=4;try{Ic(e,t.alternate,t)}finally{nl=o,L.p=r,x.T=n}}Tl=3}}function iu(){if(4===Tl||3===Tl){Tl=0,ee();var e=Al,t=_l,n=El,r=Ol;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tl=5:(Tl=0,_l=Al=null,au(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Il=null),Pe(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(c){}if(null!==r){t=x.T,o=L.p,L.p=2,x.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];i(s.value,{componentStack:s.stack})}}finally{x.T=t,L.p=o}}0!==(3&El)&&su(),ku(e),o=e.pendingLanes,0!==(4194090&n)&&0!==(42&o)?e===Nl?Ml++:(Ml=0,Nl=e):Ml=0,Su(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Lo(t)))}function su(e){return ru(),ou(),iu(),cu()}function cu(){if(5!==Tl)return!1;var e=Al,t=Pl;Pl=0;var n=Pe(El),r=x.T,o=L.p;try{L.p=32>n?32:n,x.T=null,n=Rl,Rl=null;var i=Al,s=El;if(Tl=0,_l=Al=null,El=0,0!==(6&nl))throw Error(a(331));var c=nl;if(nl|=4,$c(i.current),Kc(i,i.current,s,n),nl=c,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(l){}return!0}finally{L.p=o,x.T=r,au(e,t)}}function lu(e,t,n){t=Ir(n,t),null!==(e=ai(e,t=Ss(e.stateNode,t,2),2))&&(Te(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)lu(e,e,n);else for(;null!==t;){if(3===t.tag){lu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Il||!Il.has(r))){e=Ir(n,e),null!==(r=ai(t,n=Is(2),2))&&(Ts(n,r,t,e),Te(r,2),ku(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(ul=!0,o.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rl===e&&(il&n)===n&&(4===hl||3===hl&&(62914560&il)===il&&300>te()-Cl?0===(2&nl)&&Kl(e,0):gl|=n,yl===il&&(yl=0)),ku(e)}function fu(e,t){0===t&&(t=Se()),null!==(e=Or(e,t))&&(Te(e,t),ku(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),fu(e,n)}var mu=null,yu=null,vu=!1,wu=!1,bu=!1,Cu=0;function ku(e){e!==yu&&null===e.next&&(null===yu?mu=yu=e:yu=yu.next=e),wu=!0,vu||(vu=!0,dd(function(){0!==(6&nl)?$(re,Iu):Tu()}))}function Su(e,t){if(!bu&&wu){bu=!0;do{for(var n=!1,r=mu;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var a=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=o&~(a&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Eu(r,i))}else i=il,0===(3&(i=we(r,r===rl?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,i)||(n=!0,Eu(r,i));r=r.next}}while(n);bu=!1}}function Iu(){Tu()}function Tu(){wu=vu=!1;var e=0;0!==Cu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=Cu),Cu=0);for(var t=te(),n=null,r=mu;null!==r;){var o=r.next,i=Au(r,t);0===i?(r.next=null,null===n?mu=o:n.next=o,null===o&&(yu=n)):(n=r,(0!==e||0!==(3&i))&&(wu=!0)),r=o}Su(e,!1)}function Au(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-fe(i),s=1<<a,c=o[a];-1===c?0!==(s&n)&&0===(s&r)||(o[a]=Ce(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}if(n=il,n=we(e,e===(t=rl)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===al||9===al)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),Pe(n)){case 2:case 8:n=oe;break;case 32:default:n=ie;break;case 268435456:n=se}return r=_u.bind(null,e),n=$(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function _u(e,t){if(0!==Tl&&5!==Tl)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(su()&&e.callbackNode!==n)return null;var r=il;return 0===(r=we(e,e===rl?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Dl(e,r,t),Au(e,te()),null!=e.callbackNode&&e.callbackNode===n?_u.bind(null,e):null)}function Eu(e,t){if(su())return null;Dl(e,t,!0)}function Pu(){return 0===Cu&&(Cu=ke()),Cu}function Ru(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Ou(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Mu=0;Mu<Cr.length;Mu++){var Nu=Cr[Mu];kr(Nu.toLowerCase(),"on"+(Nu[0].toUpperCase()+Nu.slice(1)))}kr(fr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(gr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(mr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(wr,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function qu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){ys(u)}o.currentTarget=null,i=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){ys(u)}o.currentTarget=null,i=c}}}}function Du(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(Uu(t,e,2,!1),n.add(r))}function Hu(e,t,n){var r=0;t&&(r|=4),Uu(n,e,r,t)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Fu(e){if(!e[zu]){e[zu]=!0,Qe.forEach(function(t){"selectionchange"!==t&&(Lu.has(t)||Hu(t,!1,e),Hu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zu]||(t[zu]=!0,Hu("selectionchange",!1,t))}}function Uu(e,t,n,r){switch(lh(t)){case 2:var o=rh;break;case 8:o=oh;break;default:o=ih}n=o.bind(null,t,n,e),o=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&a.stateNode.containerInfo===o)return;a=a.return}for(;null!==s;){if(null===(a=Ue(s)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=i=a;continue e}s=s.parentNode}}r=r.return}qt(function(){var r=i,o=Ot(n),a=[];e:{var s=br.get(e);if(void 0!==s){var l=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":l=gn;break;case"focusin":u="focus",l=an;break;case"focusout":u="blur",l=an;break;case"beforeblur":case"afterblur":l=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=yn;break;case fr:case pr:case gr:l=sn;break;case wr:l=vn;break;case"scroll":case"scrollend":l=tn;break;case"wheel":l=wn;break;case"copy":case"cut":case"paste":l=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=bn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==s?s+"Capture":null:s;d=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Dt(g,f))&&d.push(Ku(g,m,p)),h)break;g=g.return}0<d.length&&(s=new l(s,u,null,n,o),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Ue(u)&&!u[xe])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ue(u):null)&&(h=c(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(l=null,u=r),l!==u)){if(d=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==l?s:Ke(l),p=null==u?s:Ke(u),(s=new d(m,g+"leave",l,n,o)).target=h,s.relatedTarget=p,m=null,Ue(o)===r&&((d=new d(f,g+"enter",u,n,o)).target=p,d.relatedTarget=h,m=d),h=m,l&&u)e:{for(f=u,g=0,p=d=l;p;p=Wu(p))g++;for(p=0,m=f;m;m=Wu(m))p++;for(;0<g-p;)d=Wu(d),g--;for(;0<p-g;)f=Wu(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Wu(d),f=Wu(f)}d=null}else d=null;null!==l&&Qu(a,s,l,d,!1),null!==u&&null!==h&&Qu(a,h,u,d,!0)}if("select"===(l=(s=r?Ke(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Hn;else if(Mn(s))if(zn)y=Gn;else{y=Qn;var v=Wn}else!(l=s.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&At(r.elementType)&&(y=Hn):y=Vn;switch(y&&(y=y(e,r))?Nn(a,y,n,o):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),v=r?Ke(r):window,e){case"focusin":(Mn(v)||"true"===v.contentEditable)&&(rr=v,or=r,ir=null);break;case"focusout":ir=or=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,o);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,o)}var w;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rn?En(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Tn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Rn&&(w=jt()):(Bt="value"in(Ut=o)?Ut.value:Ut.textContent,Rn=!0)),0<(v=ju(r,b)).length&&(b=new ln(b,e,null,n,o),a.push({event:b,listeners:v}),w?b.data=w:null!==(w=Pn(n))&&(b.data=w))),(w=In?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(_n=!0,An);case"textInput":return(e=t.data)===An&&_n?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!kn&&En(e,t)?(e=jt(),Kt=Bt=Ut=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=ju(r,"onBeforeInput")).length&&(v=new ln("onBeforeInput","beforeinput",null,n,o),a.push({event:v,listeners:b}),v.data=w)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=Ru((o[Ne]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ne]||null)?Ru(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var s=new Zt("action","action",null,r,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Cu){var e=a?Ou(o,a):new FormData(o);Oa(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=a?Ou(o,a):new FormData(o),Oa(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(a,e,r,n,o)}qu(a,t)})}function Ku(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ju(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=Dt(e,n))&&r.unshift(Ku(e,o,i)),null!=(o=Dt(e,t))&&r.push(Ku(e,o,i))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Qu(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,null!==c&&c===r)break;5!==s&&26!==s&&27!==s||null===l||(c=l,o?null!=(l=Dt(n,i))&&a.unshift(Ku(n,l,c)):o||null!=(l=Dt(n,i))&&a.push(Ku(n,l,c))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Vu=/\r\n?/g,Gu=/\u0000|\uFFFD/g;function Yu(e){return("string"===typeof e?e:""+e).replace(Vu,"\n").replace(Gu,"")}function Ju(e,t){return t=Yu(t),Yu(e)===t}function $u(){}function Xu(e,t,n,r,o,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Tt(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Xu(e,t,"name",o.name,o,null),Xu(e,t,"formEncType",o.formEncType,o,null),Xu(e,t,"formMethod",o.formMethod,o,null),Xu(e,t,"formTarget",o.formTarget,o,null)):(Xu(e,t,"encType",o.encType,o,null),Xu(e,t,"method",o.method,o,null),Xu(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Du("beforetoggle",e),Du("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=_t.get(n)||n,r)}}function Zu(e,t,n,r,o,i){switch(n){case"style":Tt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ve.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Ne]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Du("error",e),Du("load",e);var r,o=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,r,s,n,null)}}return i&&Xu(e,t,"srcSet",n.srcSet,n,null),void(o&&Xu(e,t,"src",n.src,n,null));case"input":Du("invalid",e);var c=r=s=i=null,l=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":c=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Xu(e,t,o,d,n,null)}}return yt(e,r,c,l,u,s,i,!1),void dt(e);case"select":for(i in Du("invalid",e),o=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(c=n[i]))switch(i){case"value":r=c;break;case"defaultValue":s=c;break;case"multiple":o=c;default:Xu(e,t,i,c,n,null)}return t=r,n=s,e.multiple=!!o,void(null!=t?wt(e,!!o,t,!1):null!=n&&wt(e,!!o,n,!0));case"textarea":for(s in Du("invalid",e),r=i=o=null,n)if(n.hasOwnProperty(s)&&null!=(c=n[s]))switch(s){case"value":o=c;break;case"defaultValue":i=c;break;case"children":r=c;break;case"dangerouslySetInnerHTML":if(null!=c)throw Error(a(91));break;default:Xu(e,t,s,c,n,null)}return Ct(e,o,i,r),void dt(e);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(o=n[l]))if("selected"===l)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else Xu(e,t,l,o,n,null);return;case"dialog":Du("beforetoggle",e),Du("toggle",e),Du("cancel",e),Du("close",e);break;case"iframe":case"object":Du("load",e);break;case"video":case"audio":for(o=0;o<xu.length;o++)Du(xu[o],e);break;case"image":Du("error",e),Du("load",e);break;case"details":Du("toggle",e);break;case"embed":case"source":case"link":Du("error",e),Du("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,u,o,n,null)}return;default:if(At(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&Zu(e,t,d,o,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(null!=(o=n[c])&&Xu(e,t,c,o,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function od(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ld="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:cd;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,o=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Cd(a.documentElement),2&n&&Cd(a.body),4&n)for(Cd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,c=a.nodeName;a[ze]||"SCRIPT"===c||"STYLE"===c||"LINK"===c&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===o)return e.removeChild(i),void _h(t);o--}else"$"===n||"$?"===n||"$!"===n?o++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);_h(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Fe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function md(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Cd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Fe(e)}var kd=new Map,Sd=new Set;function Id(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Td=L.d;L.d={f:function(){var e=Td.f(),t=Ul();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Na(t):Td.r(e)},D:function(e){Td.D(e),_d("dns-prefetch",e,null)},C:function(e,t){Td.C(e,t),_d("preconnect",e,t)},L:function(e,t,n){Td.L(e,t,n);var r=Ad;if(r&&e&&t){var o='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+gt(n.imageSizes)+'"]')):o+='[href="'+gt(e)+'"]';var i=o;switch(t){case"style":i=Pd(e);break;case"script":i=Md(e)}kd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Rd(i))||"script"===t&&r.querySelector(Nd(i))||(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Td.m(e,t);var n=Ad;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Md(e)}if(!kd.has(i)&&(e=h({rel:"modulepreload",href:e},t),kd.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Nd(i)))return}ed(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Td.X(e,t);var n=Ad;if(n&&e){var r=je(n).hoistableScripts,o=Md(e),i=r.get(o);i||((i=n.querySelector(Nd(o)))||(e=h({src:e,async:!0},t),(t=kd.get(o))&&Dd(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){Td.S(e,t,n);var r=Ad;if(r&&e){var o=je(r).hoistableStyles,i=Pd(e);t=t||"default";var a=o.get(i);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Rd(i)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(i))&&qd(e,n);var c=a=r.createElement("link");We(c),ed(c,"link",e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener("load",function(){s.loading|=1}),c.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Ld(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},o.set(i,a)}}},M:function(e,t){Td.M(e,t);var n=Ad;if(n&&e){var r=je(n).hoistableScripts,o=Md(e),i=r.get(o);i||((i=n.querySelector(Nd(o)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(o))&&Dd(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var Ad="undefined"===typeof document?null:document;function _d(e,t,n){var r=Ad;if(r&&"string"===typeof t&&t){var o=gt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),Sd.has(o)||(Sd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Ed(e,t,n,r){var o,i,s,c,l=(l=j.current)?Id(l):null;if(!l)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Pd(n.href),(r=(n=je(l).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Pd(n.href);var u=je(l).hoistableStyles,d=u.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=l.querySelector(Rd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(o=l,i=e,s=n,c=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=o.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),ed(i,"link",s),We(i),o.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Md(n),(r=(n=je(l).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Pd(e){return'href="'+gt(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function Od(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Md(e){return'[src="'+gt(e)+'"]'}function Nd(e){return"script[async]"+e}function xd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var o=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",o),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":o=Pd(n.href);var i=e.querySelector(Rd(o));if(i)return t.state.loading|=4,t.instance=i,We(i),i;r=Od(n),(o=kd.get(o))&&qd(r,o),We(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(i,"link",r),t.state.loading|=4,Ld(i,n.precedence,e),t.instance=i;case"script":return i=Md(n.src),(o=e.querySelector(Nd(i)))?(t.instance=o,We(o),o):(r=n,(o=kd.get(i))&&Dd(r=h({},n),o),We(o=(e=e.ownerDocument||e).createElement("script")),ed(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)i=s;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function qd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Hd=null;function zd(e,t,n){if(null===Hd){var r=new Map,o=Hd=new Map;o.set(n,r)}else(r=(o=Hd).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[ze]||i[Me]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(i):r.set(a,[i])}}return r}function Fd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ud(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function Kd(){}function jd(){if(this.count--,0===this.count)if(this.stylesheets)Qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function Qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Vd,e),Wd=null,jd.call(e))}function Vd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var a=o[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(o=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,o),n.set(a,o),this.count++,r=jd.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:C,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function Yd(e,t,n,r,o,i,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ie(0),this.hiddenUpdates=Ie(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Jd(e,t,n,r,o,i,a,s,c,l,u,d){return e=new Yd(e,t,n,a,s,c,l,d),t=1,!0===i&&(t|=24),i=qr(3,null,null,t),e.current=i,i.stateNode=e,(t=xo()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ri(i),e}function $d(e){return e?e=xr:xr}function Xd(e,t,n,r,o,i){o=$d(o),null===r.context?r.context=o:r.pendingContext=o,(r=ii(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ai(e,r,t))&&(ql(n,0,t),si(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Or(e,67108864);null!==t&&ql(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var o=x.T;x.T=null;var i=L.p;try{L.p=2,ih(e,t,n,r)}finally{L.p=i,x.T=o}}function oh(e,t,n,r){var o=x.T;x.T=null;var i=L.p;try{L.p=8,ih(e,t,n,r)}finally{L.p=i,x.T=o}}function ih(e,t,n,r){if(nh){var o=ah(r);if(null===o)Bu(e,t,r,sh,n),vh(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return dh=wh(dh,e,t,n,r,o),!0;case"dragenter":return hh=wh(hh,e,t,n,r,o),!0;case"mouseover":return fh=wh(fh,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return ph.set(i,wh(ph.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,gh.set(i,wh(gh.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==o;){var i=Be(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ve(i.pendingLanes);if(0!==a){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var c=1<<31-fe(a);s.entanglements[1]|=c,a&=~c}ku(i),0===(6&nl)&&(kl=te()+500,Su(0,!1))}}break;case 13:null!==(s=Or(i,2))&&ql(s,0,2),Ul(),eh(i,2)}if(null===(i=ah(r))&&Bu(e,t,r,sh,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function ah(e){return ch(e=Ot(e))}var sh=null;function ch(e){if(sh=null,null!==(e=Ue(e))){var t=c(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sh=e,null}function lh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case oe:return 8;case ie:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,ph=new Map,gh=new Map,mh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function bh(e){var t=Ue(e.target);if(null!==t){var n=c(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=xl();e=Ee(e);var t=Or(n,e);null!==t&&ql(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function kh(e,t,n){Ch(e)&&n.delete(t)}function Sh(){uh=!1,null!==dh&&Ch(dh)&&(dh=null),null!==hh&&Ch(hh)&&(hh=null),null!==fh&&Ch(fh)&&(fh=null),ph.forEach(kh),gh.forEach(kh)}function Ih(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var Th=null;function Ah(e){Th!==e&&(Th=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Th===e&&(Th=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var i=Be(n);null!==i&&(e.splice(t,3),t-=3,Oa(i,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function _h(e){function t(t){return Ih(t,e)}null!==dh&&Ih(dh,e),null!==hh&&Ih(hh,e),null!==fh&&Ih(fh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<mh.length;n++){var r=mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<mh.length&&null===(n=mh[0]).blockedOn;)bh(n),null===n.blockedOn&&mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],a=o[Ne]||null;if("function"===typeof i)a||Ah(n);else if(a){var s=null;if(i&&i.hasAttribute("formAction")){if(o=i,a=i[Ne]||null)s=a.formAction;else if(null!==ch(o))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Ah(n)}}}function Eh(e){this._internalRoot=e}function Ph(e){this._internalRoot=e}Ph.prototype.render=Eh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Xd(t.current,xl(),e,t,null,null)},Ph.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Ul(),t[xe]=null}},Ph.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mh.length&&0!==t&&t<mh[n].priority;n++);mh.splice(n,0,e),0===n&&bh(e)}};var Rh=o.version;if("19.1.0"!==Rh)throw Error(a(527,Rh,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=c(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return u(o),e;if(i===r)return u(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Oh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{ue=Mh.inject(Oh),de=Mh}catch(xh){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",o=vs,i=ws,c=bs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(c=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,n,r,o,i,c,0,null),e[xe]=t.current,Fu(e),new Eh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,o="",i=vs,c=ws,l=bs,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(c=n.onCaughtError),void 0!==n.onRecoverableError&&(l=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jd(e,1,!0,t,0,r,o,i,c,l,0,u)).context=$d(null),n=t.current,(o=ii(r=Ee(r=xl()))).callback=null,ai(n,o,r),n=r,t.current.lanes=n,Te(t,n),ku(t),e[xe]=t.current,Fu(e),new Ph(t)},t.version="19.1.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,g(b,y.prototype),b.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function I(e,t,r,o,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function P(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c,l,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return P((u=e._init)(e._payload),t,o,i,a)}}if(u)return a=a(e),u=""===i?"."+_(e,0):i,C(a)?(o="",null!=u&&(o=u.replace(A,"$&/")+"/"),P(a,t,o,"",function(e){return e})):null!=a&&(T(a)&&(c=a,l=o+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+u,a=I(c.type,l,void 0,0,0,c.props)),t.push(a)),1;u=0;var d,p=""===i?".":i+":";if(C(e))for(var g=0;g<e.length;g++)u+=P(i=e[g],t,o,s=p+_(i,g),a);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(i=e.next()).done;)u+=P(i=i.value,t,o,s=p+_(i,g++),a);else if("object"===s){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],o=0;return P(e,r,"","",function(e){return t.call(n,e,o++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function N(){}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),s=0;s<i;s++)a[s]=arguments[s+2];r.children=a}return I(e.type,o,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var s=Array(a),c=0;c<a;c++)s[c]=arguments[c+2];o.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===o[r]&&(o[r]=a[r]);return I(e,i,void 0,0,0,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),o=k.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(N,M)}catch(i){M(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(o(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},t.useFormStatus=function(){return c.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element");function r(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<o&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function C(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function k(e){if(m=!1,C(e),!g)if(null!==r(l))g=!0,I||(I=!0,S());else{var t=r(u);null!==t&&M(k,t.startTime-e)}}var S,I=!1,T=-1,A=5,_=-1;function E(){return!!y||!(t.unstable_now()-_<A)}function P(){if(y=!1,I){var e=t.unstable_now();_=e;var n=!0;try{e:{g=!1,m&&(m=!1,w(T),T=-1),p=!0;var i=f;try{t:{for(C(e),h=r(l);null!==h&&!(h.expirationTime>e&&E());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,C(e),n=!0;break t}h===r(l)&&o(l),C(e)}else o(l);h=r(l)}if(null!==h)n=!0;else{var c=r(u);null!==c&&M(k,c.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?S():I=!1}}}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){v(P,0)};function M(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(m?(w(T),T=-1):m=!0,M(k,i-a))):(e.sortIndex=s,n(l,e),g||p||(g=!0,I||(I=!0,S()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}var r=n(43),o=n(391);const i={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},a=200,s=400,c=400,l=499,u=500,d=599,h=[i.OPENID_SCOPE,i.PROFILE_SCOPE,i.OFFLINE_ACCESS_SCOPE],f=[...h,i.EMAIL_SCOPE],p="Content-Type",g="Content-Length",m="Retry-After",y="X-AnchorMailbox",v="x-ms-request-id",w="x-ms-httpver",b="active-account-filters",C="common",k="organizations",S="consumers",I="access_token",T="xms_cc",A={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},_={PLAIN:"plain",S256:"S256"},E="code",P="id_token token refresh_token",R="query",O="fragment",M="query",N="authorization_code",x="refresh_token",L="MSSTS",q="ADFS",D="Generic",H="-",z=".",F={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},U="appmetadata",B="1",K="authority-metadata",j=86400,W="config",Q="cache",V="network",G="hardcoded_values",Y={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},J={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},$=60,X=3600,Z="throttling",ee="retry-after, h429",te="invalid_grant",ne="client_mismatch",re="1",oe="3",ie="4",ae="2",se="4",ce="5",le="0",ue="1",de="2",he="3",fe="4",pe="pop",ge="unexpected_error",me="post_request_failed",ye={[ge]:"Unexpected error in authentication.",[me]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ve extends Error{constructor(e,t,n){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,ve.prototype),this.errorCode=e||i.EMPTY_STRING,this.errorMessage=t||i.EMPTY_STRING,this.subError=n||i.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function we(e,t){return new ve(e,t?"".concat(ye[e]," ").concat(t):ye[e])}const be="storage_not_supported",Ce="stubbed_public_client_application_called",ke="in_mem_redirect_unavailable",Se={[be]:"Given storage configuration option was not supported.",[Ce]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ke]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Ie extends ve{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Ie.prototype)}}function Te(e){return new Ie(e,Se[e])}const Ae={initialize:()=>Promise.reject(Te(Ce)),acquireTokenPopup:()=>Promise.reject(Te(Ce)),acquireTokenRedirect:()=>Promise.reject(Te(Ce)),acquireTokenSilent:()=>Promise.reject(Te(Ce)),acquireTokenByCode:()=>Promise.reject(Te(Ce)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(Te(Ce)),loginPopup:()=>Promise.reject(Te(Ce)),loginRedirect:()=>Promise.reject(Te(Ce)),logout:()=>Promise.reject(Te(Ce)),logoutRedirect:()=>Promise.reject(Te(Ce)),logoutPopup:()=>Promise.reject(Te(Ce)),ssoSilent:()=>Promise.reject(Te(Ce)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw Te(Ce)},getLogger:()=>{throw Te(Ce)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Te(Ce)},hydrateCache:()=>Promise.reject(Te(Ce)),clearCache:()=>Promise.reject(Te(Ce))},_e="invalid_grant",Ee=483,Pe=600,Re="msal",Oe=30,Me="msal.js.browser",Ne="53ee284d-920a-4b59-9d30-a60315b26836",xe="ppnbnpeolgkicgegkbkbjmhlideopiji",Le="MATS",qe="MicrosoftEntra",De="DOM API",He="get-token-and-sign-out",ze="PlatformAuthDOMHandler",Fe="PlatformAuthExtensionHandler",Ue="Handshake",Be="HandshakeResponse",Ke="GetToken",je="Response",We="localStorage",Qe="sessionStorage",Ve="memoryStorage",Ge="GET",Ye="POST",Je="signin",$e="signout",Xe="request.origin",Ze="urlHash",et="request.params",tt="code.verifier",nt="interaction.status",rt="request.native",ot="msal.account.keys",it="msal.token.keys",at="msal.version",st="wrapper.sku",ct="wrapper.version",lt=861,ut=862,dt=863,ht=865,ft=866,pt=61,gt=961,mt=962;var yt;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(yt||(yt={}));const vt="startup",wt="login",bt="logout",Ct="acquireToken",kt="ssoSilent",St="handleRedirect",It="none",Tt={scopes:h},At="@azure/msal-react",_t="msal.db",Et="".concat(_t,".keys"),Pt=0,Rt=1,Ot=2,Mt=3,Nt=4,xt=5,Lt=[Pt,xt,Nt],qt="msal.browser.platform.auth.dom";var Dt;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Dt||(Dt={}));class Ht{constructor(e,t,n){this.level=Dt.Info;const r=e||Ht.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"===typeof r.logLevel?r.logLevel:Dt.Info,this.correlationId=r.correlationId||i.EMPTY_STRING,this.packageName=t||i.EMPTY_STRING,this.packageVersion=n||i.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Dt.Info}}clone(e,t,n){return new Ht({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=(new Date).toUTCString(),r="[".concat(n,"] : [").concat(t.correlationId||this.correlationId||"","]"),o="".concat(r," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(Dt[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:Dt.Error,containsPii:!1,correlationId:t||i.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Dt.Error,containsPii:!0,correlationId:t||i.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Dt.Warning,containsPii:!1,correlationId:t||i.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Dt.Warning,containsPii:!0,correlationId:t||i.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Dt.Info,containsPii:!1,correlationId:t||i.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Dt.Info,containsPii:!0,correlationId:t||i.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Dt.Verbose,containsPii:!1,correlationId:t||i.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Dt.Verbose,containsPii:!0,correlationId:t||i.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Dt.Trace,containsPii:!1,correlationId:t||i.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Dt.Trace,containsPii:!0,correlationId:t||i.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const zt={instance:Ae,inProgress:It,accounts:[],logger:new Ht({})},Ft=r.createContext(zt);Ft.Consumer;function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Bt(e){var t=function(e,t){if("object"!=Ut(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ut(t)?t:t+""}function Kt(e,t,n){return(t=Bt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach(function(t){Kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Qt="msal:initializeStart",Vt="msal:initializeEnd",Gt="msal:accountAdded",Yt="msal:accountRemoved",Jt="msal:activeAccountChanged",$t="msal:loginStart",Xt="msal:loginSuccess",Zt="msal:loginFailure",en="msal:acquireTokenStart",tn="msal:acquireTokenSuccess",nn="msal:acquireTokenFailure",rn="msal:acquireTokenFromNetworkStart",on="msal:ssoSilentStart",an="msal:ssoSilentSuccess",sn="msal:ssoSilentFailure",cn="msal:acquireTokenByCodeStart",ln="msal:acquireTokenByCodeSuccess",un="msal:acquireTokenByCodeFailure",dn="msal:handleRedirectStart",hn="msal:handleRedirectEnd",fn="msal:popupOpened",pn="msal:logoutStart",gn="msal:logoutSuccess",mn="msal:logoutFailure",yn="msal:logoutEnd",vn="msal:restoreFromBFCache";class wn{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case $t:return wt;case on:return kt;case en:if(e.interactionType===yt.Redirect||e.interactionType===yt.Popup)return Ct;break;case dn:return St;case pn:return bt;case an:case sn:if(t&&t!==kt)break;return It;case yn:if(t&&t!==bt)break;return It;case hn:if(t&&t!==St)break;return It;case Xt:case Zt:case tn:case nn:case vn:if(e.interactionType===yt.Redirect||e.interactionType===yt.Popup){if(t&&t!==wt&&t!==Ct)break;return It}}return null}}function bn(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every(e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)})}const Cn="3.0.13",kn="UNBLOCK_INPROGRESS",Sn="EVENT",In=(e,t)=>{const{type:n,payload:r}=t;let o=e.inProgress;switch(n){case kn:e.inProgress===vt&&(o=It,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Sn:const t=r.message,i=wn.getInteractionStatusFromEvent(t,e.inProgress);i&&(r.logger.info("MsalProvider - ".concat(t.eventType," results in setting inProgress from ").concat(e.inProgress," to ").concat(i)),o=i);break;default:throw new Error("Unknown action type: ".concat(n))}if(o===vt)return e;const i=r.instance.getAllAccounts();return o===e.inProgress||bn(i,e.accounts)?o!==e.inProgress?Wt(Wt({},e),{},{inProgress:o}):bn(i,e.accounts)?e:Wt(Wt({},e),{},{accounts:i}):Wt(Wt({},e),{},{inProgress:o,accounts:i})};function Tn(e){let{instance:t,children:n}=e;(0,r.useEffect)(()=>{t.initializeWrapperLibrary(At,Cn)},[t]);const o=(0,r.useMemo)(()=>t.getLogger().clone("@azure/msal-react",Cn),[t]),[i,a]=(0,r.useReducer)(In,void 0,()=>({inProgress:vt,accounts:[]}));(0,r.useEffect)(()=>{const e=t.addEventCallback(e=>{a({payload:{instance:t,logger:o,message:e},type:Sn})});return o.verbose("MsalProvider - Registered event callback with id: ".concat(e)),t.initialize().then(()=>{t.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:t,logger:o},type:kn})})}).catch(()=>{}),()=>{e&&(o.verbose("MsalProvider - Removing event callback ".concat(e)),t.removeEventCallback(e))}},[t,o]);const s={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:o};return r.createElement(Ft.Provider,{value:s},n)}const An=()=>(0,r.useContext)(Ft);function _n(e){const{accounts:t,inProgress:n}=An(),o=(0,r.useMemo)(()=>n!==vt&&function(e,t){return t&&(t.username||t.homeAccountId||t.localAccountId)?!!function(e,t){return e.length>0&&(t.homeAccountId||t.localAccountId||t.username)&&e.filter(e=>(!t.username||t.username.toLowerCase()===e.username.toLowerCase())&&(!t.homeAccountId||t.homeAccountId.toLowerCase()===e.homeAccountId.toLowerCase())&&(!t.localAccountId||t.localAccountId.toLowerCase()===e.localAccountId.toLowerCase()))[0]||null}(e,t):e.length>0}(t,e),[t,n,e]);return o}var En=n(579);const Pn=()=>{var e;const{instance:t,accounts:n}=An(),o=_n(),[i,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{t.handleRedirectPromise().then(()=>{0===n.length&&t.loginRedirect()}).finally(()=>{a(!1)})},[t,n]),i?null:o?(0,En.jsx)("div",{style:{padding:"2rem"},children:(0,En.jsxs)("h2",{children:["Welcome, ",null===(e=n[0])||void 0===e?void 0:e.username]})}):(0,En.jsx)("div",{style:{padding:"2rem"},children:(0,En.jsx)("p",{children:"Redirecting to sign in..."})})},Rn="AAD",On="OIDC",Mn="EAR",Nn="none",xn="client_info_decoding_error",Ln="client_info_empty_error",qn="token_parsing_error",Dn="null_or_empty_token",Hn="endpoints_resolution_error",zn="network_error",Fn="openid_config_error",Un="hash_not_deserialized",Bn="invalid_state",Kn="state_mismatch",jn="state_not_found",Wn="nonce_mismatch",Qn="auth_time_not_found",Vn="max_age_transpired",Gn="multiple_matching_tokens",Yn="multiple_matching_accounts",Jn="multiple_matching_appMetadata",$n="request_cannot_be_made",Xn="cannot_remove_empty_scope",Zn="cannot_append_scopeset",er="empty_input_scopeset",tr="device_code_polling_cancelled",nr="device_code_expired",rr="device_code_unknown_error",or="no_account_in_silent_request",ir="invalid_cache_record",ar="invalid_cache_environment",sr="no_account_found",cr="no_crypto_object",lr="unexpected_credential_type",ur="invalid_assertion",dr="invalid_client_credential",hr="token_refresh_required",fr="user_timeout_reached",pr="token_claims_cnf_required_for_signedjwt",gr="authorization_code_missing_from_server_response",mr="binding_key_not_removed",yr="end_session_endpoint_not_supported",vr="key_id_missing",wr="no_network_connectivity",br="user_canceled",Cr="missing_tenant_id_error",kr="method_not_implemented",Sr="nested_app_auth_bridge_disabled",Ir={[xn]:"The client info could not be parsed/decoded correctly",[Ln]:"The client info was empty",[qn]:"Token cannot be parsed",[Dn]:"The token is null or empty",[Hn]:"Endpoints cannot be resolved",[zn]:"Network request failed",[Fn]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Un]:"The hash parameters could not be deserialized",[Bn]:"State was not the expected format",[Kn]:"State mismatch error",[jn]:"State not found",[Wn]:"Nonce mismatch error",[Qn]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Vn]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Gn]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Yn]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Jn]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[$n]:"Token request cannot be made without authorization code or refresh token.",[Xn]:"Cannot remove null or empty scope from ScopeSet",[Zn]:"Cannot append ScopeSet",[er]:"Empty input ScopeSet cannot be processed",[tr]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[nr]:"Device code is expired.",[rr]:"Device code stopped polling for unknown reasons.",[or]:"Please pass an account object, silent flow is not supported without account information",[ir]:"Cache record object was null or undefined.",[ar]:"Invalid environment when attempting to create cache entry",[sr]:"No account found in cache for given key.",[cr]:"No crypto object detected.",[lr]:"Unexpected credential type.",[ur]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[dr]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[hr]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[fr]:"User defined timeout for device code polling reached",[pr]:"Cannot generate a POP jwt if the token_claims are not populated",[gr]:"Server response does not contain an authorization code to proceed",[mr]:"Could not remove the credential's binding key from storage.",[yr]:"The provided authority does not support logout",[vr]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[wr]:"No network connectivity. Check your internet connection.",[br]:"User cancelled the flow.",[Cr]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[kr]:"This method has not been implemented",[Sr]:"The nested app auth bridge is disabled"};class Tr extends ve{constructor(e,t){super(e,t?"".concat(Ir[e],": ").concat(t):Ir[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Tr.prototype)}}function Ar(e,t){return new Tr(e,t)}const _r={createNewGuid:()=>{throw Ar(kr)},base64Decode:()=>{throw Ar(kr)},base64Encode:()=>{throw Ar(kr)},base64UrlEncode:()=>{throw Ar(kr)},encodeKid:()=>{throw Ar(kr)},async getPublicKeyThumbprint(){throw Ar(kr)},async removeTokenBindingKey(){throw Ar(kr)},async clearKeystore(){throw Ar(kr)},async signJwt(){throw Ar(kr)},async hashString(){throw Ar(kr)}},Er="@azure/msal-common",Pr="15.7.1";function Rr(e,t){const n=function(e){if(!e)throw Ar(Dn);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Ar(qn);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(r){throw Ar(qn)}}function Or(e,t){if(0===t||Date.now()-3e5>e+t)throw Ar(Vn)}function Mr(){return Math.round((new Date).getTime()/1e3)}function Nr(e){return e.getTime()/1e3}function xr(e){return e?new Date(1e3*Number(e)):new Date}function Lr(e,t){const n=Number(e)||0;return Mr()+t>n}function qr(e){return[Ur(e),Br(e),Kr(e),jr(e),Wr(e)].join(H).toLowerCase()}function Dr(e,t,n,r,o){return{credentialType:F.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o}}function Hr(e,t,n,r,o,i,a,s,c,l,u,d,h,f,p){var g,m;const y={homeAccountId:e,credentialType:F.ACCESS_TOKEN,secret:n,cachedAt:Mr().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:u||J.BEARER};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),f&&(y.requestedClaims=f,y.requestedClaimsHash=p),(null===(g=y.tokenType)||void 0===g?void 0:g.toLowerCase())!==J.BEARER.toLowerCase())switch(y.credentialType=F.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case J.POP:const e=Rr(n,c);if(null===e||void 0===e||null===(m=e.cnf)||void 0===m||!m.kid)throw Ar(pr);y.keyId=e.cnf.kid;break;case J.SSH:y.keyId=h}return y}function zr(e,t,n,r,o,i,a){const s={credentialType:F.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function Fr(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function Ur(e){return[e.homeAccountId,e.environment].join(H).toLowerCase()}function Br(e){const t=e.credentialType===F.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(H).toLowerCase()}function Kr(e){return(e.target||"").toLowerCase()}function jr(e){return(e.requestedClaimsHash||"").toLowerCase()}function Wr(e){return e.tokenType&&e.tokenType.toLowerCase()!==J.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function Qr(){return Mr()+j}function Vr(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function Gr(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function Yr(e){return e.expiresAt<=Mr()}const Jr="redirect_uri_empty",$r="claims_request_parsing_error",Xr="authority_uri_insecure",Zr="url_parse_error",eo="empty_url_error",to="empty_input_scopes_error",no="invalid_prompt_value",ro="invalid_claims",oo="token_request_empty",io="logout_request_empty",ao="invalid_code_challenge_method",so="pkce_params_missing",co="invalid_cloud_discovery_metadata",lo="invalid_authority_metadata",uo="untrusted_authority",ho="missing_ssh_jwk",fo="missing_ssh_kid",po="missing_nonce_authentication_header",go="invalid_authentication_header",mo="cannot_set_OIDCOptions",yo="cannot_allow_platform_broker",vo="authority_mismatch",wo={[Jr]:"A redirect URI is required for all calls, and none has been set.",[$r]:"Could not parse the given claims request object.",[Xr]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Zr]:"URL could not be parsed into appropriate segments.",[eo]:"URL was empty or null.",[to]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[no]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[ro]:"Given claims parameter must be a stringified JSON object.",[oo]:"Token request was empty and not found in cache.",[io]:"The logout request was null or undefined.",[ao]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[so]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[co]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[lo]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[uo]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ho]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[fo]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[po]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[go]:"Invalid authentication header provided",[mo]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[yo]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[vo]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class bo extends ve{constructor(e){super(e,wo[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,bo.prototype)}}function Co(e){return new bo(e)}class ko{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(t){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach(e=>{if(e.trim()){const[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(t){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class So{constructor(e){const t=e?ko.trimArrayEntries([...e]):[],n=t?ko.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw Co(to);this.scopes=new Set,n.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||i.EMPTY_STRING).split(" ");return new So(t)}static createSearchScopes(e){const t=new So(e);return t.containsOnlyOIDCScopes()?t.removeScope(i.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new So(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e)))}containsOnlyOIDCScopes(){let e=0;return f.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(t){throw Ar(Zn)}}removeScope(e){if(!e)throw Ar(Xn);this.scopes.delete(e.trim())}removeOIDCScopes(){f.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ar(er);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw Ar(er);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return i.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Io(e,t){if(!e)throw Ar(Ln);try{const n=t(e);return JSON.parse(n)}catch(n){throw Ar(xn)}}function To(e){if(!e)throw Ar(xn);const t=e.split(z,2);return{uid:t[0],utid:t.length<2?i.EMPTY_STRING:t[1]}}function Ao(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const _o=["isHomeTenant"],Eo=["isHomeTenant"];function Po(e,t){return!!e&&!!t&&e===t.split(".")[1]}function Ro(e,t,n,r){if(r){const{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s}=r,c=o||a||s||"";return{tenantId:c,localAccountId:t||n||"",name:i,isHomeTenant:Po(c,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:Po(n,e)}}function Oo(e,t,n,r){let o=e;if(t){const{isHomeTenant:n}=t,r=Ao(t,_o);o=Wt(Wt({},e),r)}if(n){const t=Ro(e.homeAccountId,e.localAccountId,e.tenantId,n),{isHomeTenant:i}=t,a=Ao(t,Eo);return o=Wt(Wt(Wt({},o),a),{},{idTokenClaims:n,idToken:r}),o}return o}const Mo=0,No=1,xo=2,Lo=3;function qo(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class Do{generateAccountId(){return[this.homeAccountId,this.environment].join(H).toLowerCase()}generateAccountKey(){return Do.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(H).toLowerCase()}static createAccount(e,t,n){var r,o,i,a,s,c,l,u;const d=new Do;let h;t.authorityType===No?d.authorityType=q:t.protocolMode===On?d.authorityType=D:d.authorityType=L,e.clientInfo&&n&&(h=Io(e.clientInfo,n)),d.clientInfo=e.clientInfo,d.homeAccountId=e.homeAccountId,d.nativeAccountId=e.nativeAccountId;const f=e.environment||t&&t.getPreferredCache();if(!f)throw Ar(ar);d.environment=f,d.realm=(null===(r=h)||void 0===r?void 0:r.utid)||qo(e.idTokenClaims)||"",d.localAccountId=(null===(o=h)||void 0===o?void 0:o.uid)||(null===(i=e.idTokenClaims)||void 0===i?void 0:i.oid)||(null===(a=e.idTokenClaims)||void 0===a?void 0:a.sub)||"";const p=(null===(s=e.idTokenClaims)||void 0===s?void 0:s.preferred_username)||(null===(c=e.idTokenClaims)||void 0===c?void 0:c.upn),g=null!==(l=e.idTokenClaims)&&void 0!==l&&l.emails?e.idTokenClaims.emails[0]:null;if(d.username=p||g||"",d.name=(null===(u=e.idTokenClaims)||void 0===u?void 0:u.name)||"",d.cloudGraphHostName=e.cloudGraphHostName,d.msGraphHost=e.msGraphHost,e.tenantProfiles)d.tenantProfiles=e.tenantProfiles;else{const t=Ro(e.homeAccountId,d.localAccountId,d.realm,e.idTokenClaims);d.tenantProfiles=[t]}return d}static createFromAccountInfo(e,t,n){var r;const o=new Do;return o.authorityType=e.authorityType||D,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=n,o.tenantProfiles=Array.from((null===(r=e.tenantProfiles)||void 0===r?void 0:r.values())||[]),o}static generateHomeAccountId(e,t,n,r,o){if(t!==No&&t!==xo){if(e)try{const t=Io(e,r.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(i){}n.warning("No client info in response")}return(null===o||void 0===o?void 0:o.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function Ho(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function zo(e){if(!e||e.indexOf("=")<0)return null;try{const t=Ho(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch(t){throw Ar(Un)}return null}function Fo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=new Array;return e.forEach((e,o)=>{!t&&n&&o in n?r.push("".concat(o,"=").concat(e)):r.push("".concat(o,"=").concat(encodeURIComponent(e)))}),r.join("&")}class Uo{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Co(eo);e.includes("#")||(this._urlString=Uo.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return ko.endsWith(t,"?")?t=t.slice(0,-1):ko.endsWith(t,"?/")&&(t=t.slice(0,-2)),ko.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(t){throw Co(Zr)}if(!e.HostNameAndPort||!e.PathSegments)throw Co(Zr);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Co(Xr)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return Uo.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==C&&n[0]!==k||(n[0]=e),Uo.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Co(Zr);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter(e=>e&&e.length>0),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Co(Zr);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===i.FORWARD_SLASH){const n=new Uo(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Uo(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!zo(e)}}const Bo={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Ko={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},jo=new Set;function Wo(e,t,n,r){if(null===r||void 0===r||r.trace("getAliasesFromMetadata called with source: ".concat(n)),e&&t){const o=Qo(t,e);if(o)return null===r||void 0===r||r.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(n,", returning aliases")),o.aliases;null===r||void 0===r||r.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(n))}return null}function Qo(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}Ko.metadata.forEach(e=>{e.aliases.forEach(e=>{jo.add(e)})});const Vo="cache_quota_exceeded",Go="cache_error_unknown",Yo={[Vo]:"Exceeded cache storage capacity.",[Go]:"Unexpected error occurred when using cache storage."};class Jo extends Error{constructor(e,t){const n=t||(Yo[e]?Yo[e]:Yo[Go]);super("".concat(e,": ").concat(n)),Object.setPrototypeOf(this,Jo.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class $o{constructor(e,t,n,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(Er,Pr),this.staticAuthorityOptions=o,this.performanceClient=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort(e=>e.idTokenClaims?-1:1)[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,null===t||void 0===t?void 0:t.tenantId,t))}getTenantedAccountInfoByFilter(e,t,n,r){let o,i=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const a=this.getIdToken(e,t,n.tenantId);return a&&(o=Rr(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,r))?null:(i=Oo(e,n,o,null===a||void 0===a?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let o=r.tenantProfiles||new Map;const i=this.getTokenKeys();if(t){const e=o.get(t);if(!e)return[];o=new Map([[t,e]])}const a=[];return o.forEach(e=>{const t=this.getTenantedAccountInfoByFilter(r,i,e,n);t&&a.push(t)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw Ar(ir);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==(null===n||void 0===n?void 0:n.idToken)&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==(null===n||void 0===n?void 0:n.accessToken)&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==(null===n||void 0===n?void 0:n.refreshToken)&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(s){var r,o;if(null===(r=this.commonLogger)||void 0===r||r.error("CacheManager.saveCacheRecord: failed"),s instanceof Error){var i,a;if(null===(i=this.commonLogger)||void 0===i||i.errorPii("CacheManager.saveCacheRecord: ".concat(s.message),t),"QuotaExceededError"===s.name||"NS_ERROR_DOM_QUOTA_REACHED"===s.name||s.message.includes("exceeded the quota"))throw null===(a=this.commonLogger)||void 0===a||a.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new Jo(Vo);throw new Jo(s.name,s.message)}throw null===(o=this.commonLogger)||void 0===o||o.errorPii("CacheManager.saveCacheRecord: ".concat(s),t),new Jo(Go)}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=So.fromString(e.target);r.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const r=this.getAccessTokenCredential(e);if(r&&this.credentialMatchesFilter(r,n)){So.fromString(r.target).intersectingScopeSets(o)&&this.removeAccessToken(e,t)}}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach(t=>{var r;if(!this.isAccountKey(t,e.homeAccountId))return;const o=this.getAccount(t,this.commonLogger);if(!o)return;if(e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId))return;if(e.username&&!this.matchUsername(o.username,e.username))return;if(e.environment&&!this.matchEnvironment(o,e.environment))return;if(e.realm&&!this.matchRealm(o,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const i={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},a=null===(r=o.tenantProfiles)||void 0===r?void 0:r.filter(e=>this.tenantProfileMatchesFilter(e,i));a&&0===a.length||n.push(o)}),n}isAccountKey(e,t,n){return!(e.split(H).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(H).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(F.ID_TOKEN.toLowerCase())&&-1===t.indexOf(F.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(F.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(F.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(F.REFRESH_TOKEN.toLowerCase())>-1){const e="".concat(F.REFRESH_TOKEN).concat(H).concat(this.clientId).concat(H),n="".concat(F.REFRESH_TOKEN).concat(H).concat(B).concat(H);if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===F.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===J.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))}),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){const n=this.getAccount(e,this.commonLogger);n&&(this.removeAccountContext(n,t),this.removeItem(e))}removeAccountContext(e,t){const n=this.getTokenKeys(),r=e.generateAccountId();n.idToken.forEach(e=>{0===e.indexOf(r)&&this.removeIdToken(e)}),n.accessToken.forEach(e=>{0===e.indexOf(r)&&this.removeAccessToken(e,t)}),n.refreshToken.forEach(e=>{0===e.indexOf(r)&&this.removeRefreshToken(e)})}removeAccessToken(e,t){const n=this.getAccessTokenCredential(e);if(n&&(this.removeItem(e),n.credentialType.toLowerCase()===F.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&n.tokenType===J.POP)){const e=n.keyId;e&&this.cryptoImpl.removeTokenBindingKey(e).catch(()=>{var n;this.commonLogger.error("Failed to remove token binding key ".concat(e),t),null===(n=this.performanceClient)||void 0===n||n.incrementFields({removeTokenBindingKeyFailure:1},t)})}}removeAppMetadata(){return this.getKeys().forEach(e=>{this.isAppMetadata(e)&&this.removeItem(e)}),!0}readAccountFromCache(e){const t=Do.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:F.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){const n=new Map;a.forEach((t,r)=>{t.realm===e.tenantId&&n.set(r,t)});const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach((e,t)=>{this.removeIdToken(t)}),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach(t=>{if(!this.idTokenKeyMatchesFilter(t,Wt({clientId:this.clientId},e)))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)}),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r){const o=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);const i=So.createSearchScopes(t.scopes),a=t.authenticationScheme||J.BEARER,s=a&&a.toLowerCase()!==J.BEARER.toLowerCase()?F.ACCESS_TOKEN_WITH_AUTH_SCHEME:F.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:r||e.tenantId,target:i,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},l=n&&n.accessToken||this.getTokenKeys().accessToken,u=[];l.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,c)&&u.push(t)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),u.forEach(e=>{this.removeAccessToken(qr(e),o)}),this.performanceClient.addFields({multiMatchedAT:u.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),u[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach(t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)}),n}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?B:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:F.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}});const l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&r&&o&&r.addFields({multiMatchedRT:l},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map(e=>n[e]),o=r.length;if(o<1)return null;if(o>1)throw Ar(Jn);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==B)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var n;return!(t.toLowerCase()!==(null===(n=e.name)||void 0===n?void 0:n.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){var o;const i=new Uo(r).getUrlComponents().HostNameAndPort;n=Wo(i,null===(o=e.cloudDiscoveryMetadata)||void 0===o?void 0:o.metadata,W,t)||Wo(i,Ko.metadata,G,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var n;return!((null===(n=e.realm)||void 0===n?void 0:n.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==F.ACCESS_TOKEN&&e.credentialType!==F.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return So.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(U)}isAuthorityMetadata(e){return-1!==e.indexOf(K)}generateAuthorityMetadataCacheKey(e){return"".concat(K,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class Xo extends $o{async setAccount(){throw Ar(kr)}getAccount(){throw Ar(kr)}async setIdTokenCredential(){throw Ar(kr)}getIdTokenCredential(){throw Ar(kr)}async setAccessTokenCredential(){throw Ar(kr)}getAccessTokenCredential(){throw Ar(kr)}async setRefreshTokenCredential(){throw Ar(kr)}getRefreshTokenCredential(){throw Ar(kr)}setAppMetadata(){throw Ar(kr)}getAppMetadata(){throw Ar(kr)}setServerTelemetry(){throw Ar(kr)}getServerTelemetry(){throw Ar(kr)}setAuthorityMetadata(){throw Ar(kr)}getAuthorityMetadata(){throw Ar(kr)}getAuthorityMetadataKeys(){throw Ar(kr)}setThrottlingCache(){throw Ar(kr)}getThrottlingCache(){throw Ar(kr)}removeItem(){throw Ar(kr)}getKeys(){throw Ar(kr)}getAccountKeys(){throw Ar(kr)}getTokenKeys(){throw Ar(kr)}}const Zo="acquireTokenByCode",ei="acquireTokenByRefreshToken",ti="acquireTokenSilent",ni="acquireTokenSilentAsync",ri="acquireTokenPopup",oi="acquireTokenPreRedirect",ii="acquireTokenRedirect",ai="cryptoOptsGetPublicKeyThumbprint",si="cryptoOptsSignJwt",ci="silentCacheClientAcquireToken",li="silentIframeClientAcquireToken",ui="awaitConcurrentIframe",di="silentRefreshClientAcquireToken",hi="ssoSilent",fi="standardInteractionClientGetDiscoveredAuthority",pi="nativeInteractionClientAcquireToken",gi="networkClientSendPostRequestAsync",mi="refreshTokenClientExecutePostToTokenEndpoint",yi="authorizationCodeClientExecutePostToTokenEndpoint",vi="refreshTokenClientExecuteTokenRequest",wi="refreshTokenClientAcquireToken",bi="refreshTokenClientAcquireTokenWithCachedRefreshToken",Ci="refreshTokenClientAcquireTokenByRefreshToken",ki="refreshTokenClientCreateTokenRequestBody",Si="acquireTokenFromCache",Ii="silentFlowClientAcquireCachedToken",Ti="silentFlowClientGenerateResultFromCacheRecord",Ai="acquireTokenBySilentIframe",_i="initializeBaseRequest",Ei="initializeSilentRequest",Pi="initializeClientApplication",Ri="initializeCache",Oi="silentIframeClientTokenHelper",Mi="silentHandlerInitiateAuthRequest",Ni="silentHandlerMonitorIframeForHash",xi="silentHandlerLoadFrame",Li="silentHandlerLoadFrameSync",qi="standardInteractionClientCreateAuthCodeClient",Di="standardInteractionClientGetClientConfiguration",Hi="standardInteractionClientInitializeAuthorizationRequest",zi="getAuthCodeUrl",Fi="getStandardParams",Ui="handleCodeResponseFromServer",Bi="handleCodeResponse",Ki="handleResponseEar",ji="handleResponsePlatformBroker",Wi="handleResponseCode",Qi="updateTokenEndpointAuthority",Vi="authClientAcquireToken",Gi="authClientExecuteTokenRequest",Yi="authClientCreateTokenRequestBody",Ji="popTokenGenerateCnf",$i="popTokenGenerateKid",Xi="handleServerTokenResponse",Zi="deserializeResponse",ea="authorityFactoryCreateDiscoveredInstance",ta="authorityResolveEndpointsAsync",na="authorityGetCloudDiscoveryMetadataFromNetwork",ra="authorityUpdateCloudDiscoveryMetadata",oa="authorityGetEndpointMetadataFromNetwork",ia="authorityUpdateEndpointMetadata",aa="authorityUpdateMetadataWithRegionalInformation",sa="regionDiscoveryDetectRegion",ca="regionDiscoveryGetRegionFromIMDS",la="regionDiscoveryGetCurrentVersion",ua="acquireTokenByCodeAsync",da="handleRedirectPromise",ha="handleNativeRedirectPromise",fa="nativeMessageHandlerHandshake",pa="removeHiddenIframe",ga="clearTokensAndKeysWithClaims",ma="cacheManagerGetRefreshToken",ya="importExistingCache",va="setUserData",wa="localStorageUpdated",ba="generatePkceCodes",Ca="generateCodeVerifier",ka="generateCodeChallengeFromVerifier",Sa="sha256Digest",Ia="getRandomValues",Ta="generateHKDF",Aa="generateBaseKey",_a="base64Decode",Ea="urlEncodeArr",Pa="encrypt",Ra="decrypt",Oa="generateEarKey",Ma="decryptEarResponse",Na=(new Map([[Zo,"ATByCode"],[ei,"ATByRT"],[ti,"ATS"],[ni,"ATSAsync"],[ri,"ATPopup"],[ii,"ATRedirect"],[ai,"CryptoGetPKThumb"],[si,"CryptoSignJwt"],[ci,"SltCacheClientAT"],[li,"SltIframeClientAT"],[di,"SltRClientAT"],[hi,"SsoSlt"],[fi,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[pi,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[gi,"NetClientSendPost"],[mi,"RTClientExecPost"],[yi,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[vi,"RTClientExecTReq"],[wi,"RTClientAT"],[bi,"RTClientATWithCachedRT"],[Ci,"RTClientATByRT"],[ki,"RTClientCreateTReqBody"],[Si,"ATFromCache"],[Ii,"SltFlowClientATCached"],[Ti,"SltFlowClientGenResFromCache"],[Ai,"ATBySltIframe"],[_i,"InitBaseReq"],[Ei,"InitSltReq"],[Pi,"InitClientApplication"],[Ri,"InitCache"],[ya,"importCache"],[va,"setUserData"],[wa,"localStorageUpdated"],[Oi,"SIClientTHelper"],[Mi,"SHandlerInitAuthReq"],[Ni,"SltHandlerMonitorIframeForHash"],[xi,"SHandlerLoadFrame"],[Li,"SHandlerLoadFrameSync"],[qi,"StdIntClientCreateAuthCodeClient"],[Di,"StdIntClientGetClientConf"],[Hi,"StdIntClientInitAuthReq"],[zi,"GetAuthCodeUrl"],[Ui,"HandleCodeResFromServer"],[Bi,"HandleCodeResp"],[Ki,"HandleRespEar"],[Wi,"HandleRespCode"],[ji,"HandleRespPlatBroker"],[Qi,"UpdTEndpointAuth"],[Vi,"AuthClientAT"],[Gi,"AuthClientExecTReq"],[Yi,"AuthClientCreateTReqBody"],[Ji,"PopTGenCnf"],[$i,"PopTGenKid"],[Xi,"HandleServerTRes"],[Zi,"DeserializeRes"],[ea,"AuthFactCreateDiscInst"],[ta,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[na,"AuthGetCDMetaFromNet"],[ra,"AuthUpdCDMeta"],[oa,"AuthUpdCDMetaFromNet"],[ia,"AuthUpdEndpointMeta"],[aa,"AuthUpdMetaWithRegInfo"],[sa,"RegDiscDetectReg"],[ca,"RegDiscGetRegFromIMDS"],[la,"RegDiscGetCurrentVer"],[ua,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[da,"HandleRedirectPromise"],[ha,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[fa,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[pa,"RemoveHiddenIframe"],[ga,"ClearTAndKeysWithClaims"],[ma,"CacheManagerGetRT"],[ba,"GenPkceCodes"],[Ca,"GenCodeVerifier"],[ka,"GenCodeChallengeFromVerifier"],[Sa,"Sha256Digest"],[Ia,"GetRandomValues"],[Ta,"genHKDF"],[Aa,"genBaseKey"],[_a,"b64Decode"],[Ea,"urlEncArr"],[Pa,"encrypt"],[Ra,"decrypt"],[Oa,"genEarKey"],[Ma,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount"]);class xa{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class La{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Na,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new xa}}startPerformanceMeasurement(){return new xa}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const qa={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Da={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Dt.Info,correlationId:i.EMPTY_STRING},Ha={claimsBasedCachingEnabled:!1},za={async sendGetRequestAsync(){throw Ar(kr)},async sendPostRequestAsync(){throw Ar(kr)}},Fa={sku:i.SKU,version:Pr,cpu:i.EMPTY_STRING,os:i.EMPTY_STRING},Ua={clientSecret:i.EMPTY_STRING,clientAssertion:void 0},Ba={azureCloudInstance:Nn,tenant:"".concat(i.DEFAULT_COMMON_TENANT)},Ka={application:{appName:"",appVersion:""}};function ja(e){return e.authOptions.authority.options.protocolMode===On}const Wa={sendGetRequestAsync:()=>Promise.reject(Ar(kr)),sendPostRequestAsync:()=>Promise.reject(Ar(kr))};class Qa{navigateInternal(e,t){return Qa.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Qa.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(e=>{setTimeout(()=>{e(!0)},t.timeout)})}}class Va extends ve{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Va.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function Ga(e,t,n,r){return e.errorMessage="".concat(e.errorMessage,", additionalErrorInfo: error.name:").concat(null===r||void 0===r?void 0:r.name,", error.message:").concat(null===r||void 0===r?void 0:r.message),new Va(e,t,n)}const Ya="pkce_not_created",Ja="ear_jwk_empty",$a="ear_jwe_empty",Xa="crypto_nonexistent",Za="empty_navigate_uri",es="hash_empty_error",ts="no_state_in_hash",ns="hash_does_not_contain_known_properties",rs="unable_to_parse_state",os="state_interaction_type_mismatch",is="interaction_in_progress",as="popup_window_error",ss="empty_window_error",cs="user_cancelled",ls="monitor_popup_timeout",us="monitor_window_timeout",ds="redirect_in_iframe",hs="block_iframe_reload",fs="block_nested_popups",ps="iframe_closed_prematurely",gs="silent_logout_unsupported",ms="no_account_error",ys="silent_prompt_value_error",vs="no_token_request_cache_error",ws="unable_to_parse_token_request_cache_error",bs="auth_request_not_set_error",Cs="invalid_cache_type",ks="non_browser_environment",Ss="database_not_open",Is="no_network_connectivity",Ts="post_request_failed",As="get_request_failed",_s="failed_to_parse_response",Es="unable_to_load_token",Ps="crypto_key_not_found",Rs="auth_code_required",Os="auth_code_or_nativeAccountId_required",Ms="spa_code_and_nativeAccountId_present",Ns="database_unavailable",xs="unable_to_acquire_token_from_native_platform",Ls="native_handshake_timeout",qs="native_extension_not_installed",Ds="native_connection_not_established",Hs="uninitialized_public_client_application",zs="native_prompt_not_supported",Fs="invalid_base64_string",Us="invalid_pop_token_request",Bs="failed_to_build_headers",Ks="failed_to_parse_headers",js="failed_to_decrypt_ear_response",Ws="For more visit: aka.ms/msaljs/browser-errors",Qs={[Ya]:"The PKCE code challenge and verifier could not be generated.",[Ja]:"No EAR encryption key provided. This is unexpected.",[$a]:"Server response does not contain ear_jwe property. This is unexpected.",[Xa]:"The crypto object or function is not available.",[Za]:"Navigation URI is empty. Please check stack trace for more info.",[es]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(Ws),[ts]:"Hash does not contain state. Please verify that the request originated from msal.",[ns]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(Ws),[rs]:"Unable to parse state. Please verify that the request originated from msal.",[os]:"Hash contains state but the interaction type does not match the caller.",[is]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(Ws),[as]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[ss]:"window.open returned null or undefined window object.",[cs]:"User cancelled the flow.",[ls]:"Token acquisition in popup failed due to timeout.  ".concat(Ws),[us]:"Token acquisition in iframe failed due to timeout.  ".concat(Ws),[ds]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[hs]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(Ws),[fs]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[ps]:"The iframe being monitored was closed prematurely.",[gs]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[ms]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[ys]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[vs]:"No token request found in cache.",[ws]:"The cached token request could not be parsed.",[bs]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Cs]:"Invalid cache type",[ks]:"Login and token requests are not supported in non-browser environments.",[Ss]:"Database is not open!",[Is]:"No network connectivity. Check your internet connection.",[Ts]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[As]:"Network request failed. Please check the network trace to determine root cause.",[_s]:"Failed to parse network response. Check network trace.",[Es]:"Error loading token to cache.",[Ps]:"Cryptographic Key or Keypair not found in browser storage.",[Rs]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Os]:"An authorization code or nativeAccountId must be provided to this flow.",[Ms]:"Request cannot contain both spa code and native account id.",[Ns]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[xs]:"Unable to acquire token from native platform.  ".concat(Ws),[Ls]:"Timed out while attempting to establish connection to browser extension",[qs]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Ds]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(Ws),[Hs]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(Ws),[zs]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Fs]:"Invalid base64 encoded string.",[Us]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Bs]:"Failed to build request headers object.",[Ks]:"Failed to parse response headers",[js]:"Failed to decrypt ear response"};class Vs extends ve{constructor(e,t){super(e,Qs[e],t),Object.setPrototypeOf(this,Vs.prototype),this.name="BrowserAuthError"}}function Gs(e,t){return new Vs(e,t)}class Ys{async sendGetRequestAsync(e,t){let n,r={},o=0;const i=Js(t);try{n=await fetch(e,{method:Ge,headers:i})}catch(a){throw Ga(Gs(window.navigator.onLine?As:Is),void 0,void 0,a)}r=$s(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(a){throw Ga(Gs(_s),o,r,a)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=Js(t);let o,i=0,a={};try{o=await fetch(e,{method:Ye,headers:r,body:n})}catch(s){throw Ga(Gs(window.navigator.onLine?Ts:Is),void 0,void 0,s)}a=$s(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(s){throw Ga(Gs(_s),i,a,s)}}}function Js(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach(e=>{let[n,r]=e;t.append(n,r)}),t}catch(t){throw Ga(Gs(Bs),void 0,void 0,t)}}function $s(e){try{const t={};return e.forEach((e,n)=>{t[n]=e}),t}catch(t){throw Gs(Ks)}}function Xs(e){return encodeURIComponent(ec(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Zs(e){return tc(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ec(e){return tc((new TextEncoder).encode(e))}function tc(e){const t=Array.from(e,e=>String.fromCodePoint(e)).join("");return btoa(t)}function nc(e){return(new TextDecoder).decode(rc(e))}function rc(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Gs(Fs)}const n=atob(t);return Uint8Array.from(n,e=>e.codePointAt(0)||0)}const oc="AES-GCM",ic="HKDF",ac="SHA-256",sc=new Uint8Array([1,0,1]),cc="0123456789abcdef",lc=new Uint32Array(1),uc="raw",dc="encrypt",hc="decrypt",fc={name:"RSASSA-PKCS1-v1_5",hash:ac,modulusLength:2048,publicExponent:sc};async function pc(e,t,n){null===t||void 0===t||t.addQueueMeasurement(Sa,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(ac,r)}function gc(e){return window.crypto.getRandomValues(e)}function mc(){return window.crypto.getRandomValues(lc),lc[0]}function yc(){const e=Date.now(),t=1024*mc()+(1023&mc()),n=new Uint8Array(16),r=Math.trunc(t/2**30),o=t&2**30-1,i=mc();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=cc.charAt(n[s]>>>4),a+=cc.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function vc(e){return window.crypto.subtle.exportKey("jwk",e)}async function wc(){const e=await Cc(),t={alg:"dir",kty:"oct",k:Zs(new Uint8Array(e))};return ec(JSON.stringify(t))}async function bc(e,t){const n=t.split(".");if(5!==n.length)throw Gs(js,"jwe_length");const r=await async function(e){const t=nc(e),n=rc(JSON.parse(t).k);return window.crypto.subtle.importKey(uc,n,oc,!1,[hc])}(e).catch(()=>{throw Gs(js,"import_key")});try{const e=(new TextEncoder).encode(n[0]),t=rc(n[2]),o=rc(n[3]),i=rc(n[4]),a=8*i.byteLength,s=new Uint8Array(o.length+i.length);s.set(o),s.set(i,o.length);const c=await window.crypto.subtle.decrypt({name:oc,iv:t,tagLength:a,additionalData:e},r,s);return(new TextDecoder).decode(c)}catch(o){throw Gs(js,"decrypt")}}async function Cc(){const e=await window.crypto.subtle.generateKey({name:oc,length:256},!0,[dc,hc]);return window.crypto.subtle.exportKey(uc,e)}async function kc(e){return window.crypto.subtle.importKey(uc,e,ic,!1,["deriveKey"])}async function Sc(e,t,n){return window.crypto.subtle.deriveKey({name:ic,salt:t,hash:ac,info:(new TextEncoder).encode(n)},e,{name:oc,length:256},!1,[dc,hc])}async function Ic(e,t,n){const r=(new TextEncoder).encode(t),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await Sc(e,o,n),a=await window.crypto.subtle.encrypt({name:oc,iv:new Uint8Array(12)},i,r);return{data:Zs(new Uint8Array(a)),nonce:Zs(o)}}async function Tc(e,t,n,r){const o=rc(r),i=await Sc(e,rc(t),n),a=await window.crypto.subtle.decrypt({name:oc,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(a)}async function Ac(e){const t=await pc(e);return Zs(new Uint8Array(t))}function _c(e){e.location.hash="","function"===typeof e.history.replaceState&&e.history.replaceState(null,"","".concat(e.location.origin).concat(e.location.pathname).concat(e.location.search))}function Ec(){return window.parent!==window}function Pc(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Rc(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(Re,".")))throw Gs(fs)}function Oc(){if("undefined"===typeof window)throw Gs(ks)}function Mc(e){if(!e)throw Gs(Hs)}function Nc(e){Oc(),function(){if(Uo.hashContainsKnownProperties(window.location.hash)&&Ec())throw Gs(hs)}(),Rc(),Mc(e)}function xc(e,t){if(Nc(e),function(e){if(Ec()&&!e)throw Gs(ds)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===Ve&&!t.cache.storeAuthStateInCookie)throw Te(ke)}function Lc(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch(e){}},1e4)}const qc=1e4;const Dc="4.13.2";class Hc{static loggerCallback(e,t){switch(e){case Dt.Error:return void console.error(t);case Dt.Info:return void console.info(t);case Dt.Verbose:return void console.debug(t);case Dt.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,n;let r;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:o,telemetry:a}=e;const s={clientId:i.EMPTY_STRING,authority:"".concat(i.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:i.EMPTY_STRING,authorityMetadata:i.EMPTY_STRING,redirectUri:"undefined"!==typeof window?Pc():"",postLogoutRedirectUri:i.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Rn,OIDCOptions:{serverResponseType:O,defaultScopes:[i.OPENID_SCOPE,i.PROFILE_SCOPE,i.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Nn,tenant:i.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},c={cacheLocation:Qe,temporaryCacheLocation:Qe,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==We),claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:Dt.Info,piiLoggingEnabled:!1},u=Wt(Wt({},qa),{},{loggerOptions:l,networkClient:t?new Ys:Wa,navigationClient:new Qa,loadFrameTimeout:0,windowHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||6e4,iframeHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||qc,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(null===o||void 0===o?void 0:o.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:Oe}),d=Wt(Wt(Wt({},u),o),{},{loggerOptions:(null===o||void 0===o?void 0:o.loggerOptions)||l}),h={application:{appName:i.EMPTY_STRING,appVersion:i.EMPTY_STRING},client:new La};(null===n||void 0===n?void 0:n.protocolMode)!==On&&null!==n&&void 0!==n&&n.OIDCOptions&&new Ht(d.loggerOptions).warning(JSON.stringify(Co(mo)));if(null!==n&&void 0!==n&&n.protocolMode&&n.protocolMode===On&&null!==d&&void 0!==d&&d.allowPlatformBroker)throw Co(yo);return{auth:Wt(Wt(Wt({},s),n),{},{OIDCOptions:Wt(Wt({},s.OIDCOptions),null===n||void 0===n?void 0:n.OIDCOptions)}),cache:Wt(Wt({},c),r),system:d,telemetry:Wt(Wt({},h),a)}}(e,this.browserEnvironment);try{r=window[Qe]}catch(u){}const o=null===(t=r)||void 0===t?void 0:t.getItem("msal.browser.log.level"),a=null===(n=r)||void 0===n||null===(n=n.getItem("msal.browser.log.pii"))||void 0===n?void 0:n.toLowerCase(),s="true"===a||"false"!==a&&void 0,c=Wt({},this.config.system.loggerOptions),l=o&&Object.keys(Dt).includes(o)?Dt[o]:void 0;l&&(c.loggerCallback=Hc.loggerCallback,c.logLevel=l),void 0!==s&&(c.piiLoggingEnabled=s),this.logger=new Ht(c,"@azure/msal-browser",Dc),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class zc extends Hc{getModuleName(){return zc.MODULE_NAME}getId(){return zc.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}zc.MODULE_NAME="",zc.ID="StandardOperatingContext";const Fc="missing_kid_error",Uc="missing_alg_error",Bc={[Fc]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Uc]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Kc extends ve{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Kc.prototype)}}function jc(e){return new Kc(e,Bc[e])}class Wc{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw jc(Fc);if(!e.alg)throw jc(Uc);const t=new Wc({typ:e.typ||pe,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class Qc{constructor(){this.dbName=_t,this.version=1,this.tableName=Et,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",e=>{e.target.result.createObjectStore(this.tableName)}),n.addEventListener("success",t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()}),n.addEventListener("error",()=>t(Gs(Ns)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Gs(Ss));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",e=>{const n=e;this.closeConnection(),t(n.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Gs(Ss));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Gs(Ss));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",()=>{this.closeConnection(),t()}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(Gs(Ss));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",t=>{const n=t;this.closeConnection(),e(n.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),t(e)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Gs(Ss));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",e=>{const n=e;this.closeConnection(),t(1===n.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const n=window.indexedDB.deleteDatabase(_t),r=setTimeout(()=>t(!1),200);n.addEventListener("success",()=>(clearTimeout(r),e(!0))),n.addEventListener("blocked",()=>(clearTimeout(r),e(!0))),n.addEventListener("error",()=>(clearTimeout(r),t(!1)))})}}class Vc{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,n)=>{e.push(n)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class Gc{constructor(e){this.inMemoryCache=new Vc,this.indexedDBCache=new Qc,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Vs&&e.errorCode===Ns))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(n){this.handleDatabaseAccessError(n)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(n){this.handleDatabaseAccessError(n)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(n){this.handleDatabaseAccessError(n)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class Yc{constructor(e,t,n){this.logger=e,function(e){if(!window)throw Gs(ks);if(!window.crypto)throw Gs(Xa);if(!e&&!window.crypto.subtle)throw Gs(Xa,"crypto_subtle_undefined")}(null!==n&&void 0!==n&&n),this.cache=new Gc(this.logger),this.performanceClient=t}createNewGuid(){return yc()}base64Encode(e){return ec(e)}base64Decode(e){return nc(e)}base64UrlEncode(e){return Xs(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const n=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(ai,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(fc,e,t)}(Yc.EXTRACTABLE,Yc.POP_KEY_USAGES),o=await vc(r.publicKey),i=Jc({e:o.e,kty:o.kty,n:o.n}),a=await this.hashString(i),s=await vc(r.privateKey),c=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,fc,t,n)}(s,!1,["sign"]);return await this.cache.setItem(a,{privateKey:c,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){await this.cache.removeItem(e);if(await this.cache.containsKey(e))throw Ar(mr)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(e.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){var o;const i=null===(o=this.performanceClient)||void 0===o?void 0:o.startMeasurement(si,r),a=await this.cache.getItem(t);if(!a)throw Gs(Ps);const s=await vc(a.publicKey),c=Jc(s),l=Xs(JSON.stringify({kid:t})),u=Xs(Wc.getShrHeaderString(Wt(Wt({},null===n||void 0===n?void 0:n.header),{},{alg:s.alg,kid:l})));e.cnf={jwk:JSON.parse(c)};const d=Xs(JSON.stringify(e)),h="".concat(u,".").concat(d),f=(new TextEncoder).encode(h),p=await async function(e,t){return window.crypto.subtle.sign(fc,e,t)}(a.privateKey,f),g=Zs(new Uint8Array(p)),m="".concat(h,".").concat(g);return i&&i.end({success:!0}),m}async hashString(e){return Ac(e)}}function Jc(e){return JSON.stringify(e,Object.keys(e).sort())}Yc.POP_KEY_USAGES=["sign","verify"],Yc.EXTRACTABLE=!0;const $c=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}try{const r=e(...arguments);return null===i||void 0===i||i.end({success:!0}),n.trace("Returning result from ".concat(t)),r}catch(a){n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(a))}catch(a){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},a),a}},Xc=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}return null===r||void 0===r||r.setPreQueueTime(t,o),e(...arguments).then(e=>(n.trace("Returning result from ".concat(t)),null===i||void 0===i||i.end({success:!0}),e)).catch(e=>{n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},e),e})};class Zc{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(sa,this.correlationId);let r=e;if(r)t.region_source=oe;else{const e=Zc.IMDS_OPTIONS;try{const n=await Xc(this.getRegionFromIMDS.bind(this),ca,this.logger,this.performanceClient,this.correlationId)(i.IMDS_VERSION,e);if(n.status===a&&(r=n.body,t.region_source=ie),n.status===c){const n=await Xc(this.getCurrentVersion.bind(this),la,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=re,null;const o=await Xc(this.getRegionFromIMDS.bind(this),ca,this.logger,this.performanceClient,this.correlationId)(n,e);o.status===a&&(r=o.body,t.region_source=ie)}}catch(o){return t.region_source=re,null}}return r||(t.region_source=re),r||null}async getRegionFromIMDS(e,t){var n;return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ca,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(i.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,i.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(la,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(i.IMDS_ENDPOINT,"?format=json"),e);return t.status===c&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(n){return null}}}Zc.IMDS_OPTIONS={headers:{Metadata:"true"}};class el{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new Zc(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(i.CIAM_AUTH_URL))return Lo;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case i.ADFS:return No;case i.DSTS:return xo}return Mo}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Uo(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ar(Hn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ar(Hn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ar(Hn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ar(yr);return this.replacePath(this.metadata.end_session_endpoint)}throw Ar(Hn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ar(Hn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ar(Hn)}canReplaceTenant(e){return 1===e.PathSegments.length&&!el.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Mo&&this.protocolMode!==On}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new Uo(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){const e=new Uo(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(i," with id ").concat(e)),i=e)}e!==i&&(t=t.replace("/".concat(i,"/"),"/".concat(e,"/")))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===No||this.protocolMode===On&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(ta,this.correlationId);const n=this.getCurrentMetadataEntity(),r=await Xc(this.updateCloudDiscoveryMetadata.bind(this),ra,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await Xc(this.updateEndpointMetadata.bind(this),ia,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,r,{source:o}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Qr(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==Q&&(null===n||void 0===n?void 0:n.source)!==Q&&(e.expiresAt=Qr(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ia,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){var r;if(n.source===G)if(null!==(r=this.authorityOptions.azureRegionConfiguration)&&void 0!==r&&r.azureRegion&&n.metadata){Vr(e,await Xc(this.updateMetadataWithRegionalInformation.bind(this),aa,this.logger,this.performanceClient,this.correlationId)(n.metadata),!1),e.canonical_authority=this.canonicalAuthority}return n.source}let o=await Xc(this.getEndpointMetadataFromNetwork.bind(this),oa,this.logger,this.performanceClient,this.correlationId)();var i;if(o)return null!==(i=this.authorityOptions.azureRegionConfiguration)&&void 0!==i&&i.azureRegion&&(o=await Xc(this.updateMetadataWithRegionalInformation.bind(this),aa,this.logger,this.performanceClient,this.correlationId)(o)),Vr(e,o,!0),V;throw Ar(Fn,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Vr(e,t,!1),{source:W};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return Vr(e,t,!1),{source:G,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=Yr(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Q}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Uo(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Co(lo)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(oa,this.correlationId);const t={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(n));try{const e=await this.networkInterface.sendGetRequestAsync(n,t),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return r?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(r)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Bo?Bo[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(aa,this.correlationId);const r=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion;if(r){var o;if(r!==i.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ae,this.regionDiscoveryMetadata.region_used=r,el.replaceWithRegionalInformation(e,r);const t=await Xc(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),sa,this.logger,this.performanceClient,this.correlationId)(null===(o=this.authorityOptions.azureRegionConfiguration)||void 0===o?void 0:o.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=se,this.regionDiscoveryMetadata.region_used=t,el.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=ce}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ra,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await Xc(this.getCloudDiscoveryMetadataFromNetwork.bind(this),na,this.logger,this.performanceClient,this.correlationId)();if(r)return Gr(e,r,!0),V;throw Co(uo)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||i.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||i.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||i.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Gr(e,t,!1),W;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,Qo(Ko.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Gr(e,t,!1),G;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=Yr(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Q):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Lo)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),el.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Qo(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Co(co)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),el.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(na,this.correlationId);const t="".concat(i.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),n={};let r=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,n);let o,a;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))o=e.body,a=o.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(o.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),o=e.body,o.error===i.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(o.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(o.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Qo(a,this.hostnameAndPort)}catch(o){if(o instanceof ve)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(o.errorCode,"\nError Description: ").concat(o.errorMessage));else{const e=o;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=el.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&Uo.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==Nn){const e=t.tenant?t.tenant:i.DEFAULT_COMMON_TENANT;n="".concat(t.azureCloudInstance,"/").concat(e,"/")}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return i.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ar(Hn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return jo.has(e)}static isPublicCloudAuthority(e){return i.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new Uo(e);r.validateAsUri();const o=r.getUrlComponents();let a="".concat(t,".").concat(o.HostNameAndPort);this.isPublicCloudAuthority(o.HostNameAndPort)&&(a="".concat(t,".").concat(i.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const s=Uo.constructAuthorityUriFromObject(Wt(Wt({},r.getUrlComponents()),{},{HostNameAndPort:a})).urlString;return n?"".concat(s,"?").concat(n):s}static replaceWithRegionalInformation(e,t){const n=Wt({},e);return n.authorization_endpoint=el.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=el.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=el.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new Uo(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(i.CIAM_AUTH_URL)){const e=n.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(i.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function tl(e){return e.endsWith(i.FORWARD_SLASH)?e:"".concat(e).concat(i.FORWARD_SLASH)}el.reservedTenantDomains=new Set(["{tenant}","{tenantid}",C,S,k]);const nl="no_tokens_found",rl="native_account_unavailable",ol="refresh_token_expired",il="ux_not_allowed",al="bad_token",sl=["interaction_required","consent_required","login_required",al,il],cl=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],ll={[nl]:"No refresh token found in the cache. Please sign-in.",[rl]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[ol]:"Refresh token has expired.",[al]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[il]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class ul extends ve{constructor(e,t,n,r,o,a,s,c){super(e,t,n),Object.setPrototypeOf(this,ul.prototype),this.timestamp=r||i.EMPTY_STRING,this.traceId=o||i.EMPTY_STRING,this.correlationId=a||i.EMPTY_STRING,this.claims=s||i.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function dl(e,t,n){const r=!!e&&sl.indexOf(e)>-1,o=!!n&&cl.indexOf(n)>-1,i=!!t&&sl.some(e=>t.indexOf(e)>-1);return r||i||o}function hl(e){return new ul(e,ll[e])}function fl(e,t,n){var r;return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:n,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||(null===(r=t.tokenBodyParameters)||void 0===r?void 0:r.clientId)}}const pl=864e5,gl="Lax",ml="None";class yl{initialize(){return Promise.resolve()}getItem(e){const t="".concat(encodeURIComponent(e)),n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}getUserData(){throw Ar(kr)}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gl,i="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=").concat(o,";");if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*pl);return n.toUTCString()}(n);i+="expires=".concat(e,";")}(r||o===ml)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(Ar(kr))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])}),t}containsKey(e){return this.getKeys().includes(e)}}function vl(e){const t=e.getItem(ot);return t?JSON.parse(t):[]}function wl(e,t){const n=t.getItem("".concat(it,".").concat(e));if(n){const e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const bl="msal.cache.encryption";class Cl{constructor(e,t,n){if(!window.localStorage)throw Te(be);this.memoryStorage=new Vc,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new yl,n=t.getItem(bl);let r={key:"",id:""};if(n)try{r=JSON.parse(n)}catch(o){}if(r.key&&r.id){const t=$c(rc,_a,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:await Xc(kc,Ta,this.logger,this.performanceClient,e)(t)},await Xc(this.importExistingCache.bind(this),ya,this.logger,this.performanceClient,e)(e)}else{this.clear();const n=yc(),r=await Xc(Cc,Aa,this.logger,this.performanceClient,e)(),o=$c(Zs,Ea,this.logger,this.performanceClient,e)(new Uint8Array(r));this.encryptionCookie={id:n,key:await Xc(kc,Ta,this.logger,this.performanceClient,e)(r)};const i={id:n,key:o};t.setItem(bl,JSON.stringify(i),0,!0,ml)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Gs(Hs);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw Gs(Hs);const{data:r,nonce:o}=await Xc(Ic,Pa,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),i={id:this.encryptionCookie.id,nonce:o,data:r};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(i)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();vl(this).forEach(e=>this.removeItem(e));const e=wl(this.clientId,this);e.idToken.forEach(e=>this.removeItem(e)),e.accessToken.forEach(e=>this.removeItem(e)),e.refreshToken.forEach(e=>this.removeItem(e)),this.getKeys().forEach(e=>{(e.startsWith(i.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=vl(this);t=await this.importArray(t,e),this.setItem(ot,JSON.stringify(t));const n=wl(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),this.setItem("".concat(it,".").concat(this.clientId),JSON.stringify(n))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let r;try{r=JSON.parse(n)}catch(o){return null}return r.id&&r.nonce&&r.data?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):Xc(Tc,Ra,this.logger,this.performanceClient,t)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){const n=[],r=[];return e.forEach(e=>{const o=this.getItemFromEncryptedCache(e,t).then(t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)});r.push(o)}),await Promise.all(r),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(wa);t.add({isBackground:!0});const{key:n,value:r,context:o}=e.data;return n?o&&o!==this.clientId?(this.logger.trace("Ignoring broadcast event from clientId: ".concat(o)),void t.end({success:!1,errorCode:"contextMismatch"})):(r?(this.memoryStorage.setItem(n,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class kl{constructor(){if(!window.sessionStorage)throw Te(be)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}class Sl extends $o{constructor(e,t,n,r,o,i,a){super(e,n,r,o,a),this.cacheConfig=t,this.logger=r,this.internalStorage=new Vc,this.browserStorage=Il(e,t.cacheLocation,r,o),this.temporaryCacheStorage=Il(e,t.temporaryCacheLocation,r,o),this.cookieStorage=new yl,this.eventHandler=i}async initialize(e){await this.browserStorage.initialize(e),this.trackVersionChanges(e)}trackVersionChanges(e){const t=this.browserStorage.getItem(at);t&&(this.logger.info("MSAL.js was last initialized by version: ".concat(t)),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==Dc&&this.browserStorage.setItem(at,Dc)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&Do.isAccountEntity(n)?$o.toObject(new Do,n):(this.removeAccountKeyFromMap(e),null)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();await Xc(this.browserStorage.setUserData.bind(this.browserStorage),va,this.logger,this.performanceClient)(n,JSON.stringify(e),t);const r=this.addAccountKeyToMap(n);this.cacheConfig.cacheLocation===We&&r&&this.eventHandler.emitEvent(Gt,void 0,e.getAccountInfo())}getAccountKeys(){return vl(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const t=this.getAccountKeys();return-1===t.indexOf(e)?(t.push(e),this.browserStorage.setItem(ot,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.browserStorage.setItem(ot,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){super.removeAccount(e,t),this.removeAccountKeyFromMap(e)}removeAccountContext(e,t){super.removeAccountContext(e,t),this.cacheConfig.cacheLocation===We&&this.eventHandler.emitEvent(Yt,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,F.ID_TOKEN)}removeAccessToken(e,t){super.removeAccessToken(e,t),this.removeTokenKey(e,F.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,F.REFRESH_TOKEN)}getTokenKeys(){return wl(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case F.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case F.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case F.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),Ar(lr)}this.browserStorage.setItem("".concat(it,".").concat(this.clientId),JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case F.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ".concat(e," from map"));const r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case F.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ".concat(e," from map"));const o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case F.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ".concat(e," from map"));const i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),Ar(lr)}this.browserStorage.setItem("".concat(it,".").concat(this.clientId),JSON.stringify(n))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Fr(r)&&r.hasOwnProperty("realm")&&r.credentialType===F.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.ID_TOKEN),null);var r}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=qr(e);await Xc(this.browserStorage.setUserData.bind(this.browserStorage),va,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,F.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Fr(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===F.ACCESS_TOKEN||r.credentialType===F.ACCESS_TOKEN_WITH_AUTH_SCHEME)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.ACCESS_TOKEN),null);var r}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=qr(e);await Xc(this.browserStorage.setUserData.bind(this.browserStorage),va,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,F.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Fr(r)&&r.credentialType===F.REFRESH_TOKEN?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.REFRESH_TOKEN),null);var r}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=qr(e);await Xc(this.browserStorage.setUserData.bind(this.browserStorage),va,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,F.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(o=n)&&0===r.indexOf(U)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,o}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[U,t,n].join(H).toLowerCase()}(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(Y.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(K)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,t){this.internalStorage.setItem(st,e),this.internalStorage.setItem(ct,t)}getWrapperMetadata(){return[this.internalStorage.getItem(st)||i.EMPTY_STRING,this.internalStorage.getItem(ct)||i.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(b),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(b);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(n))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(Jt)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(Z));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===We){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{-1===e.indexOf(i.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{-1===e.indexOf(i.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(ga,e);const t=this.getTokenKeys();let n=0;t.accessToken.forEach(t=>{const r=this.getAccessTokenCredential(t);null!==r&&void 0!==r&&r.requestedClaimsHash&&t.includes(r.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(t,e),n++)}),n>0&&this.logger.warning("".concat(n," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):ko.startsWith(e,i.CACHE_PREFIX)?e:"".concat(i.CACHE_PREFIX,".").concat(this.clientId,".").concat(e)}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(et)),this.removeTemporaryItem(this.generateCacheKey(tt)),this.removeTemporaryItem(this.generateCacheKey(Xe)),this.removeTemporaryItem(this.generateCacheKey(Ze)),this.removeTemporaryItem(this.generateCacheKey(rt)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const n=ec(JSON.stringify(e));if(this.setTemporaryCache(et,n,!0),t){const e=ec(t);this.setTemporaryCache(tt,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(et,!0);if(!e)throw Gs(vs);const t=this.getTemporaryCache(tt,!0);let n,r="";try{n=JSON.parse(nc(e)),t&&(r=nc(t))}catch(o){throw this.logger.errorPii("Attempted to parse: ".concat(e)),this.logger.error("Parsing cached token request threw with error: ".concat(o)),Gs(ws)}return[n,r]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(rt,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var t;const n=null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e="".concat(i.CACHE_PREFIX,".").concat(nt),t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(n){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),_c(window),null}}setInteractionInProgress(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;const r="".concat(i.CACHE_PREFIX,".").concat(nt);if(e){if(this.getInteractionInProgress())throw Gs(is);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else e||(null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId)!==this.clientId||this.removeTemporaryItem(r)}async hydrateCache(e,t){var n,r,o;const i=Dr(null===(n=e.account)||void 0===n?void 0:n.homeAccountId,null===(r=e.account)||void 0===r?void 0:r.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const s={idToken:i,accessToken:Hr(null===(o=e.account)||void 0===o?void 0:o.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Nr(e.expiresOn):0,e.extExpiresOn?Nr(e.extExpiresOn):0,nc,void 0,e.tokenType,void 0,t.sshKid,t.claims,a)};return this.saveCacheRecord(s,e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(r){if(r instanceof Jo&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(r){}throw r}}}function Il(e,t,n,r){try{switch(t){case We:return new Cl(e,n,r);case Qe:return new kl}}catch(o){n.error(o)}return new Vc}class Tl{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Ht({}),"undefined"!==typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||yc();return this.eventCallbacks.has(r)?(this.logger.error("Event callback with id: ".concat(r," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(r)),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,n,r){var o;const i={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};switch(e){case Gt:case Yt:case Jt:null===(o=this.broadcastChannel)||void 0===o||o.postMessage(i);break;default:this.invokeCallbacks(i)}}invokeCallbacks(e){this.eventCallbacks.forEach((t,n)=>{let[r,o]=t;(0===o.length||o.includes(e.eventType))&&(this.logger.verbose("Emitting event to callback ".concat(n,": ").concat(e.eventType)),r.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}const Al="home_account_id",_l="UPN",El="client_id",Pl="redirect_uri",Rl="token_type",Ol="req_cnf",Ml="return_spa_code",Nl="x-client-xtra-sku",xl="brk_client_id",Ll="brk_redirect_uri",ql="instance_aware";function Dl(e,t,n){if(!t)return;const r=e.get(El);r&&e.has(xl)&&(null===n||void 0===n||n.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(Pl)},t))}function Hl(e,t){e.set("response_type",t)}function zl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;!n||r.includes("openid")||t.includes("openid")||r.push("openid");const o=n?[...t||[],...r]:t||[],i=new So(o);e.set("scope",i.printScopes())}function Fl(e,t){e.set(El,t)}function Ul(e,t){e.set(Pl,t)}function Bl(e,t){e.set("login_hint",t)}function Kl(e,t){e.set(y,"UPN:".concat(t))}function jl(e,t){e.set(y,"Oid:".concat(t.uid,"@").concat(t.utid))}function Wl(e,t){e.set("sid",t)}function Ql(e,t,n){const r=function(e,t){let n;if(e)try{n=JSON.parse(e)}catch(r){throw Co(ro)}else n={};t&&t.length>0&&(n.hasOwnProperty(I)||(n[I]={}),n[I][T]={values:t});return JSON.stringify(n)}(t,n);try{JSON.parse(r)}catch(o){throw Co(ro)}e.set("claims",r)}function Vl(e,t){e.set("client-request-id",t)}function Gl(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function Yl(e,t){null!==t&&void 0!==t&&t.appName&&e.set("x-app-name",t.appName),null!==t&&void 0!==t&&t.appVersion&&e.set("x-app-ver",t.appVersion)}function Jl(e,t){t&&e.set("state",t)}function $l(e,t){e.set("client_secret",t)}function Xl(e,t){t&&e.set("client_assertion",t)}function Zl(e,t){t&&e.set("client_assertion_type",t)}function eu(e,t){e.set("grant_type",t)}function tu(e){e.set("client_info","1")}function nu(e){e.has(ql)||e.set(ql,"true")}function ru(e,t){Object.entries(t).forEach(t=>{let[n,r]=t;!e.has(n)&&r&&e.set(n,r)})}function ou(e,t){t&&(e.set(Rl,J.POP),e.set(Ol,t))}function iu(e,t){t&&(e.set(Rl,J.SSH),e.set(Ol,t))}function au(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function su(e){e.set("x-ms-lib-capability",ee)}function cu(e,t,n){e.has(xl)||e.set(xl,t),e.has(Ll)||e.set(Ll,n)}async function lu(e,t,n,r,o,i,a){null===a||void 0===a||a.addQueueMeasurement(ea,i);const s=el.transformCIAMAuthority(tl(e)),c=new el(s,t,n,r,o,i,a);try{return await Xc(c.resolveEndpointsAsync.bind(c),ta,o,a,i)(),c}catch(l){throw Ar(Hn)}}class uu extends ve{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,uu.prototype)}}class du{static generateThrottlingStorageKey(e){return"".concat(Z,".").concat(JSON.stringify(e))}static preProcess(e,t){const n=du.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){var o;if(r.throttleTime<Date.now())return void e.removeItem(n);throw new uu((null===(o=r.errorCodes)||void 0===o?void 0:o.join(" "))||i.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(du.checkResponseStatus(n)||du.checkResponseForRetryAfter(n)){const r={throttleTime:du.calculateThrottleTime(parseInt(n.headers[m])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(du.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(m)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||$),n+X))}static removeThrottle(e,t,n,r){const o=fl(t,n,r),i=this.generateThrottlingStorageKey(o);e.removeItem(i)}}class hu{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:f}=e;const p=Wt(Wt({},Da),r);return{authOptions:(g=t,Wt({clientCapabilities:[],azureCloudOptions:Ba,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},g)),systemOptions:Wt(Wt({},qa),n),loggerOptions:p,cacheOptions:Wt(Wt({},Ha),o),storageInterface:i||new Xo(t.clientId,_r,new Ht(p),new La),networkInterface:a||za,cryptoInterface:s||_r,clientCredentials:c||Ua,libraryInfo:Wt(Wt({},Fa),l),telemetry:Wt(Wt({},Ka),u),serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:f||null};var g}(e),this.logger=new Ht(this.config.loggerOptions,Er,Pr),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[p]=i.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Al:try{const n=To(e.credential);t[y]="Oid:".concat(n.uid,"@").concat(n.utid)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case _l:t[y]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){var a;i&&(null===(a=this.performanceClient)||void 0===a||a.addQueueMeasurement(i,o));const s=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,n,r){let o;du.preProcess(this.cacheManager,e);try{var i,a;o=await Xc(this.networkClient.sendPostRequestAsync.bind(this.networkClient),gi,this.logger,this.performanceClient,r)(t,n);const e=o.headers||{};null===(i=this.performanceClient)||void 0===i||i.addFields({refreshTokenSize:(null===(a=o.body.refresh_token)||void 0===a?void 0:a.length)||0,httpVerToken:e[w]||"",requestId:e[v]||""},r)}catch(c){if(c instanceof Va){const e=c.responseHeaders;var s;if(e)null===(s=this.performanceClient)||void 0===s||s.addFields({httpVerToken:e[w]||"",requestId:e[v]||"",contentTypeHeader:e[p]||void 0,contentLengthHeader:e[g]||void 0,httpStatus:c.httpStatus},r);throw c.error}throw c instanceof ve?c:Ar(zn)}return du.postProcess(this.cacheManager,e,o),o}async updateAuthority(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Qi,t);const r="https://".concat(e,"/").concat(this.authority.tenant,"/"),o=await lu(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&cu(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&ru(t,e.tokenQueryParameters),Vl(t,e.correlationId),Dl(t,e.correlationId,this.performanceClient),Fo(t)}}class fu{static setRequestState(e,t,n){const r=fu.generateLibraryState(e,n);return t?"".concat(r).concat(i.RESOURCE_DELIM).concat(t):r}static generateLibraryState(e,t){if(!e)throw Ar(cr);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw Ar(cr);if(!t)throw Ar(Bn);try{const n=t.split(i.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(i.RESOURCE_DELIM):i.EMPTY_STRING,a=e.base64Decode(r),s=JSON.parse(a);return{userRequestState:o||i.EMPTY_STRING,libraryState:s}}catch(n){throw Ar(Bn)}}}const pu="sw";class gu{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ji,e.correlationId);const r=await Xc(this.generateKid.bind(this),Ji,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement($i,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:pu}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:c}=n,l=i?new Uo(i):void 0,u=null===l||void 0===l?void 0:l.getUrlComponents();return this.cryptoUtils.signJwt(Wt({at:e,ts:Mr(),m:null===o||void 0===o?void 0:o.toUpperCase(),u:null===u||void 0===u?void 0:u.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null===u||void 0===u?void 0:u.AbsolutePath,q:null!==u&&void 0!==u&&u.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0},r),t,c,n.correlationId)}}class mu{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class yu{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var n;const r="Error(s): ".concat(e.error_codes||i.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||i.NOT_AVAILABLE," - Description: ").concat(e.error_description||i.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||i.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||i.NOT_AVAILABLE),o=null!==(n=e.error_codes)&&void 0!==n&&n.length?e.error_codes[0]:void 0,a=new uu(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=u&&e.status<=d)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(a));if(t&&e.status&&e.status>=s&&e.status<=l)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(a));if(dl(e.error,e.error_description,e.suberror))throw new ul(e.error,e.error_description,e.suberror,e.timestamp||i.EMPTY_STRING,e.trace_id||i.EMPTY_STRING,e.correlation_id||i.EMPTY_STRING,e.claims||i.EMPTY_STRING,o);throw a}}async handleServerTokenResponse(e,t,n,r,o,a,s,c,l){var u;let d,h;if(null===(u=this.performanceClient)||void 0===u||u.addQueueMeasurement(Xi,e.correlation_id),e.id_token){if(d=Rr(e.id_token||i.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&d.nonce!==o.nonce)throw Ar(Wn);if(r.maxAge||0===r.maxAge){const e=d.auth_time;if(!e)throw Ar(Qn);Or(e,r.maxAge)}}this.homeAccountIdentifier=Do.generateHomeAccountId(e.client_info||i.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,d),o&&o.state&&(h=fu.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;const f=this.generateCacheRecord(e,t,n,r,d,a,o);let p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new mu(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p)),s&&!c&&f.account){const e=f.account.generateAccountKey();if(!this.cacheStorage.getAccount(e))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await yu.generateAuthenticationResult(this.cryptoObj,t,f,!1,r,d,h,void 0,l)}await this.cacheStorage.saveCacheRecord(f,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p))}return yu.generateAuthenticationResult(this.cryptoObj,t,f,!1,r,d,h,e,l)}generateCacheRecord(e,t,n,r,o,i,a){const s=t.getPreferredCache();if(!s)throw Ar(ar);const c=qo(o);let l,u;e.id_token&&o&&(l=Dr(this.homeAccountIdentifier,s,e.id_token,this.clientId,c||""),u=vu(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,s,c,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?So.fromString(e.scope):new So(r.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,f=h+l,p=u&&u>0?n+u:void 0;d=Hr(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",o.printScopes(),h,f,this.cryptoObj.base64Decode,p,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=zr(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:l,accessToken:d,refreshToken:h,appMetadata:f}}static async generateAuthenticationResult(e,t,n,r,o,a,s,c,l){var u,d,h,f,p;let g,m,y=i.EMPTY_STRING,v=[],w=null,b=i.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==J.POP||o.popKid)y=n.accessToken.secret;else{const t=new gu(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw Ar(vr);y=await t.signPopToken(r,i,o)}v=So.fromString(n.accessToken.target).asArray(),w=xr(n.accessToken.expiresOn),g=xr(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(m=xr(n.accessToken.refreshOn))}n.appMetadata&&(b=n.appMetadata.familyId===B?B:"");const C=(null===a||void 0===a?void 0:a.oid)||(null===a||void 0===a?void 0:a.sub)||"",k=(null===a||void 0===a?void 0:a.tid)||"";null!==c&&void 0!==c&&c.spa_accountid&&n.account&&(n.account.nativeAccountId=null===c||void 0===c?void 0:c.spa_accountid);const S=n.account?Oo(n.account.getAccountInfo(),void 0,a,null===(u=n.idToken)||void 0===u?void 0:u.secret):null;return{authority:t.canonicalAuthority,uniqueId:C,tenantId:k,scopes:v,account:S,idToken:(null===n||void 0===n||null===(d=n.idToken)||void 0===d?void 0:d.secret)||"",idTokenClaims:a||{},accessToken:y,fromCache:r,expiresOn:w,extExpiresOn:g,refreshOn:m,correlationId:o.correlationId,requestId:l||i.EMPTY_STRING,familyId:b,tokenType:(null===(h=n.accessToken)||void 0===h?void 0:h.tokenType)||i.EMPTY_STRING,state:s?s.userRequestState:i.EMPTY_STRING,cloudGraphHostName:(null===(f=n.account)||void 0===f?void 0:f.cloudGraphHostName)||i.EMPTY_STRING,msGraphHost:(null===(p=n.account)||void 0===p?void 0:p.msGraphHost)||i.EMPTY_STRING,code:null===c||void 0===c?void 0:c.spa_code,fromNativeBroker:!1}}}function vu(e,t,n,r,o,i,a,s,c,l,u){null===u||void 0===u||u.verbose("setCachedAccount called");const d=e.getAccountKeys().find(e=>e.startsWith(n));let h=null;d&&(h=e.getAccount(d));const f=h||Do.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:null===c||void 0===c?void 0:c.cloud_graph_host_name,msGraphHost:null===c||void 0===c?void 0:c.msgraph_host,nativeAccountId:l},t,r),p=f.tenantProfiles||[],g=s||f.realm;if(g&&!p.find(e=>e.tenantId===g)){const e=Ro(n,f.localAccountId,g,o);p.push(e)}return f.tenantProfiles=p,f}class wu{static validateRedirectUri(e){if(!e)throw Co(Jr)}static validatePrompt(e){const t=[];for(const n in A)t.push(A[n]);if(t.indexOf(e)<0)throw Co(no)}static validateClaims(e){try{JSON.parse(e)}catch(t){throw Co(ro)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Co(so);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([_.PLAIN,_.S256].indexOf(e)<0)throw Co(ao)}}async function bu(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class Cu extends hu{constructor(e,t){var n;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes}async acquireToken(e,t){var n,r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Vi,e.correlationId),!e.code)throw Ar($n);const o=Mr(),i=await Xc(this.executeTokenRequest.bind(this),Gi,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=null===(r=i.headers)||void 0===r?void 0:r[v],s=new yu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(i.body),Xc(s.handleServerTokenResponse.bind(s),Xi,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,o,e,t,void 0,void 0,void 0,a)}getLogoutUri(e){if(!e)throw Co(io);const t=this.createLogoutUrlQueryString(e);return Uo.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Gi,t.correlationId);const r=this.createTokenQueryParameters(t),o=Uo.appendQueryString(e.tokenEndpoint,r),i=await Xc(this.createTokenRequestBody.bind(this),Yi,this.logger,this.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const e=Io(t.clientInfo,this.cryptoUtils.base64Decode);a={credential:"".concat(e.uid).concat(z).concat(e.utid),type:Al}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}const s=this.createTokenRequestHeaders(a||t.ccsCredential),c=fl(this.config.authOptions.clientId,t);return Xc(this.executePostToTokenEndpoint.bind(this),yi,this.logger,this.performanceClient,t.correlationId)(o,i,s,c,t.correlationId,yi)}async createTokenRequestBody(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Yi,e.correlationId);const r=new Map;if(Fl(r,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[El])||this.config.authOptions.clientId),this.includeRedirectUri?Ul(r,e.redirectUri):wu.validateRedirectUri(e.redirectUri),zl(r,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(r,e.code),Gl(r,this.config.libraryInfo),Yl(r,this.config.telemetry.application),su(r),this.serverTelemetryManager&&!ja(this.config)&&au(r,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&$l(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;Xl(r,await bu(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Zl(r,t.assertionType)}if(eu(r,N),tu(r),e.authenticationScheme===J.POP){const t=new gu(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await Xc(t.generateCnf.bind(t),Ji,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}ou(r,n)}else if(e.authenticationScheme===J.SSH){if(!e.sshJwk)throw Co(ho);iu(r,e.sshJwk)}let o;if((!ko.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Ql(r,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=Io(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:"".concat(t.uid).concat(z).concat(t.utid),type:Al}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Al:try{jl(r,To(o.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case _l:Kl(r,o.credential)}return e.embeddedClientId&&cu(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&ru(r,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Ml]||ru(r,{[Ml]:"1"}),Dl(r,e.correlationId,this.performanceClient),Fo(r)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&Vl(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&Jl(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&ru(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&nu(t),Fo(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}function ku(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(null!==t&&void 0!==t&&t.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{var n,r;2===e.length&&null!==(n=e[0])&&void 0!==n&&n.length&&null!==(r=e[1])&&void 0!==r&&r.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:o}=e;if(n>=t.length)return;t[n]=[r,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}class Su{constructor(e,t){this.cacheOutcome=le,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||i.EMPTY_STRING,this.wrapperVer=e.wrapperVer||i.EMPTY_STRING,this.telemetryCacheKey=Y.CACHE_KEY+H+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(Y.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();null!==n&&void 0!==n&&n.length&&t.push("broker_error=".concat(n));const r=t.join(Y.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(Y.VALUE_SEPARATOR);return[Y.SCHEMA_VERSION,o,r].join(Y.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=Su.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(Y.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(Y.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?Y.OVERFLOW_TRUE:Y.OVERFLOW_FALSE].join(Y.VALUE_SEPARATOR);return[Y.SCHEMA_VERSION,e.cacheHits,n,r,i].join(Y.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Y.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ve?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Y.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=Su.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||i.EMPTY_STRING,a=e.failedRequests[2*t+1]||i.EMPTY_STRING,s=e.errors[t]||i.EMPTY_STRING;if(r+=o.toString().length+a.toString().length+s.length+3,!(r<Y.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||i.EMPTY_STRING),e.push(this.regionSource||i.EMPTY_STRING),e.push(this.regionOutcome||i.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return ku(e)}}class Iu{constructor(e,t,n,r,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.platformAuthProvider=s,this.correlationId=c||yc(),this.logger=r.clone(Me,Dc,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){Do.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{this.browserStorage.removeAccount(Do.generateAccountCacheKey(e),this.correlationId),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(this.correlationId),await this.browserCrypto.clearKeystore()}catch(n){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return Uo.getAbsoluteUrl(t,Pc())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Su(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(fi,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=null!==n&&void 0!==n&&n.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(Uo.getDomainFromUrl(o),t.environment):o,s=el.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await Xc(lu,ea,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw Co(vo);return c}}async function Tu(e,t,n,r){n.addQueueMeasurement(_i,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a=Wt(Wt({},e),{},{correlationId:e.correlationId,authority:o,scopes:i});if(a.authenticationScheme){if(a.authenticationScheme===J.SSH){if(!e.sshJwk)throw Co(ho);if(!e.sshKid)throw Co(fo)}r.verbose('Authentication Scheme set to "'.concat(a.authenticationScheme,'" as configured in Auth request'))}else a.authenticationScheme=J.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!ko.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await Ac(e.claims)),a}async function Au(e,t,n,r,o){r.addQueueMeasurement(Ei,e.correlationId);const i=await Xc(Tu,_i,o,r,e.correlationId)(e,n,r,o);return Wt(Wt(Wt({},e),i),{},{account:t,forceRefresh:e.forceRefresh||!1})}class _u extends Iu{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=Wt({correlationId:this.correlationId||yc()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Uo.getAbsoluteUrl(e.postLogoutRedirectUri,Pc())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Uo.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Pc())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Uo.getAbsoluteUrl(Pc(),Pc())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(qi,this.correlationId);const t=await Xc(this.getClientConfiguration.bind(this),Di,this.logger,this.performanceClient,this.correlationId)(e);return new Cu(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:a}=e;this.performanceClient.addQueueMeasurement(Di,this.correlationId);const s=await Xc(this.getDiscoveredAuthority.bind(this),fi,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:a}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Me,version:Dc,cpu:i.EMPTY_STRING,os:i.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(Hi,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=fu.setRequestState(this.browserCrypto,e&&e.state||i.EMPTY_STRING,r),a=await Xc(Tu,_i,this.logger,this.performanceClient,this.correlationId)(Wt(Wt({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),s=Wt(Wt({},a),{},{redirectUri:n,state:o,nonce:e.nonce||yc(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return s;const c=e.account||this.browserStorage.getActiveAccount();return c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(c.homeAccountId),this.correlationId),s.account=c),s}}function Eu(e,t,n){const r=zo(e);if(!r)throw Ho(e)?(n.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),n.errorPii("The ".concat(t," detected is: ").concat(e)),Gs(ns)):(n.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),Gs(es));return r}function Pu(e,t,n){if(!e.state)throw Gs(ts);const r=function(e,t){if(!t)return null;try{return fu.parseRequestState(e,t).libraryState.meta}catch(n){throw Ar(Bn)}}(t,e.state);if(!r)throw Gs(rs);if(r.interactionType!==n)throw Gs(os)}function Ru(e,t,n,r){var o,i;const a=t.correlationId,s=new Map;Fl(s,t.embeddedClientId||(null===(o=t.extraQueryParameters)||void 0===o?void 0:o[El])||e.clientId);if(zl(s,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,null===(i=e.authority.options.OIDCOptions)||void 0===i?void 0:i.defaultScopes),Ul(s,t.redirectUri),Vl(s,a),function(e,t){e.set("response_mode",t||M)}(s,t.responseMode),tu(s),t.prompt&&(!function(e,t){e.set("prompt",t)}(s,t.prompt),null===r||void 0===r||r.addFields({prompt:t.prompt},a)),t.domainHint&&(!function(e,t){e.set("domain_hint",t)}(s,t.domainHint),null===r||void 0===r||r.addFields({domainHintFromRequest:!0},a)),t.prompt!==A.SELECT_ACCOUNT)if(t.sid&&t.prompt===A.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Wl(s,t.sid),null===r||void 0===r||r.addFields({sidFromRequest:!0},a);else if(t.account){const e=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}(t.account);let o=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}(t.account);if(o&&t.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),o=null),o){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Bl(s,o),null===r||void 0===r||r.addFields({loginHintFromClaim:!0},a);try{jl(s,To(t.account.homeAccountId))}catch(c){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===A.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Wl(s,e),null===r||void 0===r||r.addFields({sidFromClaim:!0},a);try{jl(s,To(t.account.homeAccountId))}catch(c){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Bl(s,t.loginHint),Kl(s,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},a);else if(t.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Bl(s,t.account.username),null===r||void 0===r||r.addFields({loginHintFromUpn:!0},a);try{jl(s,To(t.account.homeAccountId))}catch(c){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Bl(s,t.loginHint),Kl(s,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},a));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&function(e,t){e.set("nonce",t)}(s,t.nonce),t.state&&Jl(s,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&Ql(s,t.claims,e.clientCapabilities),t.embeddedClientId&&cu(s,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(ql)||nu(s),s}function Ou(e,t,n,r){const o=Fo(t,n,r);return Uo.appendQueryString(e.authorizationEndpoint,o)}function Mu(e,t){if(!e.state||!t)throw e.state?Ar(jn,"Cached State"):Ar(jn,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(o){throw Ar(Bn,e.state)}try{r=decodeURIComponent(t)}catch(o){throw Ar(Bn,e.state)}if(n!==r)throw Ar(Kn);if(e.error||e.error_description||e.suberror){const t=function(e){var t,n;const r="code=",o=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(r);return o&&o>=0?null===(n=e.error_uri)||void 0===n?void 0:n.substring(o+r.length):void 0}(e);if(dl(e.error,e.error_description,e.suberror))throw new ul(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new uu(e.error||"",e.error_description,e.suberror,t)}}class Nu{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(Bi,t.correlationId);try{n=function(e,t){if(Mu(e,t),!e.code)throw Ar(gr);return e}(e,t.state)}catch(r){throw r instanceof uu&&r.subError===cs?Gs(cs):r}return Xc(this.handleCodeResponseFromServer.bind(this),Ui,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(Ui,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Xc(this.authModule.updateAuthority.bind(this.authModule),Qi,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await Xc(this.authModule.acquireToken.bind(this.authModule),Vi,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Al}:e.loginHint?{credential:e.loginHint,type:_l}:null}}const xu="user_switch",Lu={[xu]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class qu extends ve{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,qu.prototype),this.name="NativeAuthError",this.ext=n}}function Du(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function Hu(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return hl(rl);case"USER_INTERACTION_REQUIRED":return new ul(e,t);case"USER_CANCEL":return Gs(cs);case"NO_NETWORK":return Gs(Is);case"UX_NOT_ALLOWED":return hl(il)}return new qu(e,Lu[e]||t,n)}class zu extends hu{constructor(e,t){super(e,t)}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ii,e.correlationId);let n=le;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ko.isEmptyObj(e.claims))throw this.setCacheOutcome(ue,e.correlationId),Ar(hr);if(!e.account)throw Ar(or);const r=e.account.tenantId||function(e){var t;const n=null===(t=new Uo(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(n){case C:case k:case S:return;default:return n}}(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r);if(!i)throw this.setCacheOutcome(de,e.correlationId),Ar(hr);if(a=i.cachedAt,Number(a)>Mr()||Lr(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(he,e.correlationId),Ar(hr);var a;i.refreshOn&&Lr(i.refreshOn,0)&&(n=fe);const s=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Xc(this.generateResultFromCacheRecord.bind(this),Ti,this.logger,this.performanceClient,e.correlationId)(c,e),n]}setCacheOutcome(e,t){var n,r;null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(e),null===(r=this.performanceClient)||void 0===r||r.addFields({cacheOutcome:e},t),e!==le&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var n;let r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ti,t.correlationId),e.idToken&&(r=Rr(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var o;const e=null===(o=r)||void 0===o?void 0:o.auth_time;if(!e)throw Ar(Qn);Or(e,t.maxAge)}return yu.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class Fu extends _u{async acquireToken(e){this.performanceClient.addQueueMeasurement(ci,e.correlationId);const t=this.initializeServerTelemetryManager(pt),n=await Xc(this.getClientConfiguration.bind(this),Di,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new zu(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await Xc(r.acquireCachedToken.bind(r),Ii,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof Vs&&o.errorCode===Ps&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(null===t||void 0===t?void 0:t.account)}}const Uu=["prompt"],Bu=["scopes"];class Ku extends Iu{constructor(e,t,n,r,o,i,a,s,c,l,u,d){super(e,t,n,r,o,i,s,c,d),this.apiId=a,this.accountId=l,this.platformAuthProvider=c,this.nativeStorageManager=u,this.silentCacheClient=new Fu(e,this.nativeStorageManager,n,r,o,i,s,c,d);const h=this.platformAuthProvider.getExtensionName();this.skus=Su.makeExtraSkuString({libraryName:Me,libraryVersion:Dc,extensionName:h,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=Wt(Wt({},e.extraParameters),{},{[Nl]:this.skus})}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(pi,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(pi,e.correlationId),r=Mr(),o=this.initializeServerTelemetryManager(this.apiId);try{const a=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,a);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(i){if(t===Rt)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),i;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const s=await this.platformAuthProvider.sendMessage(a);return await this.handleNativeResponse(s,a,r).then(e=>(n.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),o.clearNativeBrokerErrorCode(),e)).catch(e=>{throw n.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e})}catch(i){throw i instanceof qu&&o.setNativeBrokerErrorCode(i.errorCode),i}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:So.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Ar(sr);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw Ar(sr);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o=Wt(Wt({},n),{},{idTokenClaims:null===r||void 0===r?void 0:r.idTokenClaims,idToken:null===r||void 0===r?void 0:r.idToken});return Wt(Wt({},r),{},{account:o})}catch(r){throw r}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n);try{await this.platformAuthProvider.sendMessage(r)}catch(a){if(a instanceof qu){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),Du(a))throw a}}this.browserStorage.setTemporaryCache(rt,JSON.stringify(r),!0);const o={apiId:lt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(i,o)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:r}=n,o=Ao(n,Uu);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(rt));const i=Mr();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.platformAuthProvider.sendMessage(o),t=await this.handleNativeResponse(e,o,i);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),t}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){var r,o;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=Rr(e.id_token,nc),a=this.createHomeAccountIdentifier(e,i),s=null===(r=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))||void 0===r?void 0:r.homeAccountId;if(null!==(o=t.extraParameters)&&void 0!==o&&o.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(a!==s&&e.account.id!==t.accountId)throw Hu(xu);const c=await this.getDiscoveredAuthority({requestAuthority:t.authority}),l=vu(this.browserStorage,c,a,nc,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const u=await this.generateAuthenticationResult(e,t,i,l,c.canonicalAuthority,n);return await this.cacheAccount(l),await this.cacheNativeTokens(e,t,a,i,e.access_token,u.tenantId,n),u}createHomeAccountIdentifier(e,t){return Do.generateHomeAccountId(e.client_info||i.EMPTY_STRING,Mo,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?So.fromString(t):So.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===J.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new gu(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw Ar(vr);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,o,a){const s=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},u=l.UID||n.oid||n.sub||i.EMPTY_STRING,d=l.TenantId||n.tid||i.EMPTY_STRING,h=Oo(r.getAccountInfo(),void 0,n,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const f=await this.generatePopAccessToken(e,t),p=t.tokenType===J.POP?J.POP:J.BEARER;return{authority:o,uniqueId:u,tenantId:d,scopes:c.asArray(),account:h,idToken:e.id_token,idTokenClaims:n,accessToken:f,fromCache:!!s&&this.isResponseFromCache(s),expiresOn:xr(a+e.expires_in),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,this.correlationId)}cacheNativeTokens(e,t,n,r,o,a,s){const c=Dr(n,t.authority,e.id_token||"",t.clientId,r.tid||""),l=s+(t.tokenType===J.POP?i.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),u=this.generateScopes(e.scope,t.scope),d={idToken:c,accessToken:Hr(n,t.authority,o,t.clientId,r.tid||a,u.printScopes(),l,0,nc,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(d,this.correlationId,t.storeInCache)}getExpiresInValue(e,t){return e===J.POP?i.SHR_NONCE_VALIDITY:("string"===typeof t?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch(t){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=await this.getCanonicalAuthority(e),{scopes:n}=e,r=Ao(e,Bu),o=new So(n||[]);o.appendScopes(h);const i=Wt(Wt({},r),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:o.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:Wt(Wt({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(i.signPopToken&&e.popKid)throw Gs(Us);if(this.handleExtraBrokerParams(i),i.extraParameters=i.extraParameters||{},i.extraParameters.telemetry=Le,e.authenticationScheme===J.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new gu(this.browserCrypto);let r;if(i.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:i.keyId})),i.signPopToken=!1;else{const o=await Xc(n.generateCnf.bind(n),Ji,this.logger,this.performanceClient,e.correlationId)(t,this.logger);r=o.reqCnfString,i.keyId=o.kid,i.signPopToken=!0}i.reqCnf=r}return this.addRequestSKUs(i),i}async getCanonicalAuthority(e){const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new Uo(t);return n.validateAsUri(),n}getPrompt(e){switch(this.apiId){case dt:case pt:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),A.NONE}if(e)switch(e){case A.NONE:case A.CONSENT:case A.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e," is not compatible with native flow")),Gs(zs)}else this.logger.trace("initializeNativeRequest: prompt was not provided")}handleExtraBrokerParams(e){var t;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(xl)&&e.extraParameters.hasOwnProperty(Ll)&&e.extraParameters.hasOwnProperty(El);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Ll],r=e.extraParameters[El]),e.extraParameters={child_client_id:r,child_redirect_uri:o},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}async function ju(e,t,n,r,o){const i=Ru(Wt(Wt({},e.auth),{},{authority:t}),n,r,o);if(Gl(i,{sku:Me,version:Dc,os:"",cpu:""}),e.auth.protocolMode!==On&&Yl(i,e.telemetry.application),n.platformBroker&&(function(e){e.set("nativebroker","1")}(i),n.authenticationScheme===J.POP)){const e=new Yc(r,o),t=new gu(e);let a;if(n.popKid)a=e.encodeKid(n.popKid);else{a=(await Xc(t.generateCnf.bind(t),Ji,r,o,n.correlationId)(n,r)).reqCnfString}ou(i,a)}return Dl(i,n.correlationId,o),i}async function Wu(e,t,n,r,o){if(!n.codeChallenge)throw Co(so);const a=await Xc(ju,Fi,r,o,n.correlationId)(e,t,n,r,o);return Hl(a,E),function(e,t,n){if(!t||!n)throw Co(so);e.set("code_challenge",t),e.set("code_challenge_method",n)}(a,n.codeChallenge,i.S256_CODE_CHALLENGE_METHOD),ru(a,n.extraQueryParameters||{}),Ou(t,a,e.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function Qu(e,t,n,r,o,i){if(!r.earJwk)throw Gs(Ja);const a=await ju(t,n,r,o,i);Hl(a,P),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(a,r.earJwk);const s=new Map;ru(s,r.extraQueryParameters||{});return function(e,t,n){const r=e.createElement("form");return r.method="post",r.action=t,n.forEach((t,n)=>{const o=e.createElement("input");o.hidden=!0,o.name=n,o.value=t,r.appendChild(o)}),e.body.appendChild(r),r}(e,Ou(n,s,t.auth.encodeExtraQueryParams,r.extraQueryParameters),a)}async function Vu(e,t,n,r,o,i,a,s,c,l){if(s.verbose("Account id found, calling WAM for token"),!l)throw Gs(Ds);const u=new Yc(s,c),d=new Ku(r,o,u,s,a,r.system.navigationClient,n,c,l,t,i,e.correlationId),{userRequestState:h}=fu.parseRequestState(u,e.state);return Xc(d.acquireToken.bind(d),pi,s,c,e.correlationId)(Wt(Wt({},e),{},{state:h,prompt:void 0}))}async function Gu(e,t,n,r,o,i,a,s,c,l,u,d){if(du.removeThrottle(a,o.auth.clientId,e),t.accountId)return Xc(Vu,ji,l,u,e.correlationId)(e,t.accountId,r,o,a,s,c,l,u,d);const h=Wt(Wt({},e),{},{code:t.code||"",codeVerifier:n}),f=new Nu(i,a,h,l,u);return await Xc(f.handleCodeResponse.bind(f),Bi,l,u,e.correlationId)(t,e)}async function Yu(e,t,n,r,o,i,a,s,c,l,u){if(du.removeThrottle(i,r.auth.clientId,e),Mu(t,e.state),!t.ear_jwe)throw Gs($a);if(!e.earJwk)throw Gs(Ja);const d=JSON.parse(await Xc(bc,Ma,c,l,e.correlationId)(e.earJwk,t.ear_jwe));if(d.accountId)return Xc(Vu,ji,c,l,e.correlationId)(e,d.accountId,n,r,i,a,s,c,l,u);const h=new yu(r.auth.clientId,i,new Yc(c,l),c,null,null,l);h.validateTokenResponse(d);const f={code:"",state:e.state,nonce:e.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await Xc(h.handleServerTokenResponse.bind(h),Xi,c,l,e.correlationId)(d,o,Mr(),e,f,void 0,void 0,void 0,void 0)}async function Ju(e,t,n){e.addQueueMeasurement(ba,n);const r=$c($u,Ca,t,e,n)(e,t,n);return{verifier:r,challenge:await Xc(Xu,ka,t,e,n)(r,e,t,n)}}function $u(e,t,n){try{const r=new Uint8Array(32);$c(gc,Ia,t,e,n)(r);return Zs(r)}catch(r){throw Gs(Ya)}}async function Xu(e,t,n,r){t.addQueueMeasurement(ka,r);try{const o=await Xc(pc,Sa,n,t,r)(e,t,r);return Zs(new Uint8Array(o))}catch(o){throw Gs(Ya)}}class Zu{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(fa),this.platformAuthType=Fe}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const t={method:Ke,request:e},n={channel:Ne,extensionId:this.extensionId,responseId:yc(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+" - Sending request to browser extension: ".concat(JSON.stringify(n))),this.messageChannel.port1.postMessage(n);const r=await new Promise((e,t)=>{this.resolvers.set(n.responseId,{resolve:e,reject:t})});return this.validatePlatformBrokerResponse(r)}static async createProvider(e,t,n){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const r=new Zu(e,t,n,xe);return await r.sendHandshakeRequest(),r}catch(r){const o=new Zu(e,t,n);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Ne,extensionId:this.extensionId,responseId:yc(),body:{method:Ue}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(Gs(Ls)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===Ne&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Ue){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace(this.platformAuthType+".onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(Gs(qs))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===je){if(!n)return;const e=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+" - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)n.reject(Hu(e.code,e.description,e.ext));else{if(!e.result)throw we(ge,"Event does not contain result.");e.result.code&&e.result.description?n.reject(Hu(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===Be){if(!r)return void this.logger.trace(this.platformAuthType+".onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+" - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(o)),this.logger.errorPii("Unable to parse ".concat(e)),n?n.reject(o):r&&r.reject(o)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw we(ge,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===xe?"chrome":null!==(e=this.getExtensionId())&&void 0!==e&&e.length?"unknown":void 0}}const ed=["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"];class td{constructor(e,t,n){this.logger=e,this.performanceClient=t,this.correlationId=n,this.platformAuthType=ze}static async createProvider(e,t,n){var r;if(e.trace("PlatformAuthDOMHandler: createProvider called"),null!==(r=window.navigator)&&void 0!==r&&r.platformAuthentication){const r=await window.navigator.platformAuthentication.getSupportedContracts(qe);if(null!==r&&void 0!==r&&r.includes(He))return e.trace("Platform auth api available in DOM"),new td(e,t,n)}}getExtensionId(){return qe}getExtensionVersion(){return""}getExtensionName(){return De}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const t=this.initializePlatformDOMRequest(e),n=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(n)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:n,authority:r,scope:o,redirectUri:i,correlationId:a,state:s,storeInCache:c,embeddedClientId:l,extraParameters:u}=e,d=Ao(e,ed),h=this.getDOMExtraParams(d);return{accountId:t,brokerId:this.getExtensionId(),authority:r,clientId:n,correlationId:a||this.correlationId,extraParameters:Wt(Wt({},u),h),isSecurityTokenService:!1,redirectUri:i,scope:o,state:s,storeInCache:c,embeddedClientId:l}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(!1===t.isSuccess&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Hu(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw we(ge,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){var t;this.logger.trace(this.platformAuthType+" - convertToNativeResponse called");return{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:null!==(t=e.extendedLifetimeToken)&&void 0!==t&&t,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return Wt({},Object.entries(e).reduce((e,t)=>{let[n,r]=t;return e[n]=String(r),e},{}))}}async function nd(e,t,n,r){e.trace("getPlatformAuthProvider called",n);const o=function(){let e;try{var t;return e=window[Qe],"true"===(null===(t=e)||void 0===t?void 0:t.getItem(qt))}catch(n){return!1}}();let i;e.trace("Has client allowed platform auth via DOM API: "+o);try{o&&(i=await td.createProvider(e,t,n)),i||(e.trace("Platform auth via DOM API not available, checking for extension"),i=await Zu.createProvider(e,r||2e3,t))}catch(a){e.trace("Platform auth not available",a)}return i}function rd(e,t,n,r){if(t.trace("isPlatformAuthAllowed called"),!e.system.allowPlatformBroker)return t.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case J.BEARER:case J.POP:return t.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class od extends _u{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s,this.eventHandler=o}acquireToken(e,t){try{var n;const r={popupName:this.generatePopupName(e.scopes||h,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(n=e.popupWindowParent)&&void 0!==n?n:window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r,t))}catch(r){return Promise.reject(r)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");const r=await Xc(this.initializeAuthorizationRequest.bind(this),Hi,this.logger,this.performanceClient,this.correlationId)(e,yt.Popup);t.popup&&Lc(r.authority);const o=rd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return r.platformBroker=o,this.config.auth.protocolMode===Mn?this.executeEarFlow(r,t):this.executeCodeFlow(r,t,n)}async executeCodeFlow(e,t,n){const r=e.correlationId,o=this.initializeServerTelemetryManager(ut),i=n||await Xc(Ju,ba,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),a=Wt(Wt({},e),{},{codeChallenge:i.challenge});try{const n=await Xc(this.createAuthCodeClient.bind(this),qi,this.logger,this.performanceClient,r)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),s=await Xc(Wu,zi,this.logger,this.performanceClient,r)(this.config,n.authority,a,this.logger,this.performanceClient),c=this.initiateAuthRequest(s,t);this.eventHandler.emitEvent(fn,yt.Popup,{popupWindow:c},null);const l=await this.monitorPopupForHash(c,t.popupWindowParent),u=$c(Eu,Zi,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Xc(Gu,Wi,this.logger,this.performanceClient,r)(e,u,i.verifier,ut,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}catch(c){var s;throw null===(s=t.popup)||void 0===s||s.close(),c instanceof ve&&(c.setCorrelationId(this.correlationId),o.cacheFailedRequest(c)),c}}async executeEarFlow(e,t){const n=e.correlationId,r=await Xc(this.getDiscoveredAuthority.bind(this),fi,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await Xc(wc,Oa,this.logger,this.performanceClient,n)(),i=Wt(Wt({},e),{},{earJwk:o}),a=t.popup||this.openPopup("about:blank",t);(await Qu(a.document,this.config,r,i,this.logger,this.performanceClient)).submit();const s=await Xc(this.monitorPopupForHash.bind(this),Ni,this.logger,this.performanceClient,n)(a,t.popupWindowParent),c=$c(Eu,Zi,this.logger,this.performanceClient,this.correlationId)(s,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Xc(Yu,Ki,this.logger,this.performanceClient,n)(i,c,ut,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(pn,yt.Popup,e);const o=this.initializeServerTelemetryManager(mt);try{await this.clearCacheOnLogout(e.account);const c=await Xc(this.createAuthCodeClient.bind(this),qi,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{c.authority.endSessionEndpoint}catch(l){var i;if(null!==(i=e.account)&&void 0!==i&&i.homeAccountId&&e.postLogoutRedirectUri&&c.authority.protocolMode===On){var a,s;if(this.browserStorage.removeAccount(null===(a=e.account)||void 0===a?void 0:a.homeAccountId,this.correlationId),this.eventHandler.emitEvent(gn,yt.Popup,e),r){const e={apiId:mt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Uo.getAbsoluteUrl(r,Pc());await this.navigationClient.navigateInternal(t,e)}return void(null===(s=t.popup)||void 0===s||s.close())}}const u=c.getLogoutUri(e);this.eventHandler.emitEvent(gn,yt.Popup,e);const d=this.openPopup(u,t);if(this.eventHandler.emitEvent(fn,yt.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,t.popupWindowParent).catch(()=>{}),r){const e={apiId:mt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Uo.getAbsoluteUrl(r,Pc());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(u){var c;throw null===(c=t.popup)||void 0===c||c.close(),u instanceof ve&&(u.setCorrelationId(this.correlationId),o.cacheFailedRequest(u)),this.eventHandler.emitEvent(mn,yt.Popup,null,u),this.eventHandler.emitEvent(yn,yt.Popup),u}this.eventHandler.emitEvent(yn,yt.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Gs(Za)}monitorPopupForHash(e,t){return new Promise((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(Gs(cs));let o="";try{o=e.location.href}catch(s){}if(!o||"about:blank"===o)return;clearInterval(r);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===R?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),n=this.openSizedPopup(e,t)),!n)throw Gs(ss);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),Gs(as)}}openSizedPopup(e,t){var n,r,o,i;let{popupName:a,popupWindowAttributes:s,popupWindowParent:c}=t;const l=c.screenLeft?c.screenLeft:c.screenX,u=c.screenTop?c.screenTop:c.screenY,d=c.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=c.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let f=null===(n=s.popupSize)||void 0===n?void 0:n.width,p=null===(r=s.popupSize)||void 0===r?void 0:r.height,g=null===(o=s.popupPosition)||void 0===o?void 0:o.top,m=null===(i=s.popupPosition)||void 0===i?void 0:i.left;return(!f||f<0||f>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),f=Ee),(!p||p<0||p>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),p=Pe),(!g||g<0||g>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),g=Math.max(0,h/2-Pe/2+u)),(!m||m<0||m>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),m=Math.max(0,d/2-Ee/2+l)),c.open(e,a,"width=".concat(f,", height=").concat(p,", top=").concat(g,", left=").concat(m,", scrollbars=yes"))}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return"".concat(Re,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(Re,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class id extends _u{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.nativeStorage=s}async acquireToken(e){const t=await Xc(this.initializeAuthorizationRequest.bind(this),Hi,this.logger,this.performanceClient,this.correlationId)(e,yt.Redirect);t.platformBroker=rd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const n=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(vn,yt.Redirect))},r=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii("Redirect start page: ".concat(r)),this.browserStorage.setTemporaryCache(Xe,r,!0),window.addEventListener("pageshow",n);try{this.config.auth.protocolMode===Mn?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(o){throw o instanceof ve&&o.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),o}}async executeCodeFlow(e,t){const n=e.correlationId,r=this.initializeServerTelemetryManager(lt),o=await Xc(Ju,ba,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),i=Wt(Wt({},e),{},{codeChallenge:o.challenge});this.browserStorage.cacheAuthorizeRequest(i,o.verifier);try{const n=await Xc(this.createAuthCodeClient.bind(this),qi,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),o=await Xc(Wu,zi,this.logger,this.performanceClient,e.correlationId)(this.config,n.authority,i,this.logger,this.performanceClient);return await this.initiateAuthRequest(o,t)}catch(a){throw a instanceof ve&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),a}}async executeEarFlow(e){const t=e.correlationId,n=await Xc(this.getDiscoveredAuthority.bind(this),fi,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await Xc(wc,Oa,this.logger,this.performanceClient,t)(),o=Wt(Wt({},e),{},{earJwk:r});this.browserStorage.cacheAuthorizeRequest(o);(await Qu(document,this.config,n,o,this.logger,this.performanceClient)).submit()}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const o=this.initializeServerTelemetryManager(ht);try{const[a,s]=this.getRedirectResponse(e||"");if(!a)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?r.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const c=this.browserStorage.getTemporaryCache(Xe,!0)||i.EMPTY_STRING,l=Uo.removeHashFromUrl(c);if(l===Uo.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(c);return await this.handleResponse(a,t,n,o)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(a,t,n,o);if(!Ec()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Ze,s,!0);const e={apiId:ht,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let r=!0;if(c&&"null"!==c)this.logger.verbose("Navigating to loginRequestUrl: ".concat(c)),r=await this.navigationClient.navigateInternal(c,e);else{const t=function(){const e=new Uo(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(Xe,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),r=await this.navigationClient.navigateInternal(t,e)}if(!r)return await this.handleResponse(a,t,n,o)}return null}catch(a){throw a instanceof ve&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===R?window.location.search:window.location.hash);let n=zo(t);if(n){try{Pu(n,this.browserCrypto,yt.Redirect)}catch(o){return o instanceof ve&&this.logger.error("Interaction type validation failed due to ".concat(o.errorCode,": ").concat(o.errorMessage)),[null,""]}return _c(window),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}const r=this.browserStorage.getTemporaryCache(Ze,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ze)),r&&(n=zo(r),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,r]):[null,""]}async handleResponse(e,t,n,r){if(!e.state)throw Gs(ts);if(e.ear_jwe){const n=await Xc(this.getDiscoveredAuthority.bind(this),fi,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return Xc(Yu,Ki,this.logger,this.performanceClient,t.correlationId)(t,e,lt,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const o=await Xc(this.createAuthCodeClient.bind(this),qi,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority});return Xc(Gu,Wi,this.logger,this.performanceClient,t.correlationId)(t,e,n,lt,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const n={apiId:lt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},r=t||this.config.auth.onRedirectNavigate;if("function"===typeof r){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==r(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Gs(Za)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(gt);try{this.eventHandler.emitEvent(pn,yt.Redirect,e),await this.clearCacheOnLogout(t.account);const a={apiId:gt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=await Xc(this.createAuthCodeClient.bind(this),qi,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(s.authority.protocolMode===On)try{s.authority.endSessionEndpoint}catch(i){var r,o;if(null!==(r=t.account)&&void 0!==r&&r.homeAccountId)return this.browserStorage.removeAccount(null===(o=t.account)||void 0===o?void 0:o.homeAccountId,this.correlationId),void this.eventHandler.emitEvent(gn,yt.Redirect,t)}const c=s.getLogoutUri(t);if(this.eventHandler.emitEvent(gn,yt.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,$e),void await this.navigationClient.navigateExternal(c,a);if(!1!==e.onRedirectNavigate(c))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,$e),void await this.navigationClient.navigateExternal(c,a);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(a){throw a instanceof ve&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),this.eventHandler.emitEvent(mn,yt.Redirect,null,a),this.eventHandler.emitEvent(yn,yt.Redirect),a}this.eventHandler.emitEvent(yn,yt.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Uo.getAbsoluteUrl(t,Pc())}}async function ad(e,t,n,r,o){if(t.addQueueMeasurement(Mi,r),!e)throw n.info("Navigate url is empty"),Gs(Za);return o?Xc(ld,xi,n,t,r)(e,o,t,r):$c(ud,Li,n,t,r)(e)}async function sd(e,t,n,r,o){const i=dd();if(!i.contentDocument)throw"No document associated with iframe!";return(await Qu(i.contentDocument,e,t,n,r,o)).submit(),i}async function cd(e,t,n,r,o,i,a){return r.addQueueMeasurement(Ni,i),new Promise((r,i)=>{t<qc&&o.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat(qc,"ms). This may result in timeouts."));const s=window.setTimeout(()=>{window.clearInterval(c),i(Gs(us))},t),c=window.setInterval(()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(i){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===R?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(c),r(o)},n)}).finally(()=>{$c(hd,pa,o,r,i)(e)})}function ld(e,t,n,r){return n.addQueueMeasurement(xi,r),new Promise((n,r)=>{const o=dd();window.setTimeout(()=>{o?(o.src=e,n(o)):r("Unable to load iframe")},t)})}function ud(e){const t=dd();return t.src=e,t}function dd(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function hd(e){document.body===e.parentNode&&document.body.removeChild(e)}class fd extends _u{constructor(e,t,n,r,o,i,a,s,c,l,u){super(e,t,n,r,o,i,s,l,u),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(li,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=Wt({},e);t.prompt?t.prompt!==A.NONE&&t.prompt!==A.NO_SESSION&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(A.NONE)),t.prompt=A.NONE):t.prompt=A.NONE;const n=await Xc(this.initializeAuthorizationRequest.bind(this),Hi,this.logger,this.performanceClient,e.correlationId)(t,yt.Silent);return n.platformBroker=rd(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme),Lc(n.authority),this.config.auth.protocolMode===Mn?this.executeEarFlow(n):this.executeCodeFlow(n)}async executeCodeFlow(e){let t;const n=this.initializeServerTelemetryManager(this.apiId);try{return t=await Xc(this.createAuthCodeClient.bind(this),qi,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await Xc(this.silentTokenHelper.bind(this),Oi,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(r){if(r instanceof ve&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),!t||!(r instanceof ve)||r.errorCode!==_e)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),await Xc(this.silentTokenHelper.bind(this),Oi,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,n=await Xc(this.getDiscoveredAuthority.bind(this),fi,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await Xc(wc,Oa,this.logger,this.performanceClient,t)(),o=Wt(Wt({},e),{},{earJwk:r}),i=await Xc(sd,Mi,this.logger,this.performanceClient,t)(this.config,n,o,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,s=await Xc(cd,Ni,this.logger,this.performanceClient,t)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),c=$c(Eu,Zi,this.logger,this.performanceClient,t)(s,a,this.logger);return Xc(Yu,Ki,this.logger,this.performanceClient,t)(o,c,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Gs(gs))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(Oi,n);const r=await Xc(Ju,ba,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),o=Wt(Wt({},t),{},{codeChallenge:r.challenge}),i=await Xc(Wu,zi,this.logger,this.performanceClient,n)(this.config,e.authority,o,this.logger,this.performanceClient),a=await Xc(ad,Mi,this.logger,this.performanceClient,n)(i,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,c=await Xc(cd,Ni,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),l=$c(Eu,Zi,this.logger,this.performanceClient,n)(c,s,this.logger);return Xc(Gu,Wi,this.logger,this.performanceClient,n)(t,l,r.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class pd extends hu{constructor(e,t){super(e,t)}async acquireToken(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(wi,e.correlationId);const r=Mr(),o=await Xc(this.executeTokenRequest.bind(this),vi,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=null===(n=o.headers)||void 0===n?void 0:n[v],a=new yu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(o.body),Xc(a.handleServerTokenResponse.bind(a),Xi,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var t;if(!e)throw Co(oo);if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ci,e.correlationId),!e.account)throw Ar(or);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Xc(this.acquireTokenWithCachedRefreshToken.bind(this),bi,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){const t=n instanceof ul&&n.errorCode===nl,r=n instanceof uu&&n.errorCode===te&&n.subError===ne;if(t||r)return Xc(this.acquireTokenWithCachedRefreshToken.bind(this),bi,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return Xc(this.acquireTokenWithCachedRefreshToken.bind(this),bi,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(bi,e.correlationId);const r=$c(this.cacheManager.getRefreshToken.bind(this.cacheManager),ma,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw hl(nl);var o;if(r.expiresOn&&Lr(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw null===(o=this.performanceClient)||void 0===o||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),hl(ol);const i=Wt(Wt({},e),{},{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||J.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Al}});try{return await Xc(this.acquireToken.bind(this),wi,this.logger,this.performanceClient,e.correlationId)(i)}catch(s){var a;if(s instanceof ul)if(null===(a=this.performanceClient)||void 0===a||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),s.subError===al){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=qr(r);this.cacheManager.removeRefreshToken(e)}throw s}}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(vi,e.correlationId);const r=this.createTokenQueryParameters(e),o=Uo.appendQueryString(t.tokenEndpoint,r),i=await Xc(this.createTokenRequestBody.bind(this),ki,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),s=fl(this.config.authOptions.clientId,e);return Xc(this.executePostToTokenEndpoint.bind(this),mi,this.logger,this.performanceClient,e.correlationId)(o,i,a,s,e.correlationId,mi)}async createTokenRequestBody(e){var t,n,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ki,e.correlationId);const o=new Map;if(Fl(o,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[El])||this.config.authOptions.clientId),e.redirectUri&&Ul(o,e.redirectUri),zl(o,e.scopes,!0,null===(r=this.config.authOptions.authority.options.OIDCOptions)||void 0===r?void 0:r.defaultScopes),eu(o,x),tu(o),Gl(o,this.config.libraryInfo),Yl(o,this.config.telemetry.application),su(o),this.serverTelemetryManager&&!ja(this.config)&&au(o,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(o,e.refreshToken),this.config.clientCredentials.clientSecret&&$l(o,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;Xl(o,await bu(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Zl(o,t.assertionType)}if(e.authenticationScheme===J.POP){const t=new gu(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await Xc(t.generateCnf.bind(t),Ji,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}ou(o,n)}else if(e.authenticationScheme===J.SSH){if(!e.sshJwk)throw Co(ho);iu(o,e.sshJwk)}if((!ko.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Ql(o,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Al:try{jl(o,To(e.ccsCredential.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case _l:Kl(o,e.ccsCredential.credential)}return e.embeddedClientId&&cu(o,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&ru(o,e.tokenBodyParameters),Dl(o,e.correlationId,this.performanceClient),Fo(o)}}class gd extends _u{async acquireToken(e){this.performanceClient.addQueueMeasurement(di,e.correlationId);const t=await Xc(Tu,_i,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n=Wt(Wt({},e),t);e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(pt),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return Xc(o.acquireTokenByRefreshToken.bind(o),Ci,this.logger,this.performanceClient,e.correlationId)(n).catch(e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e})}logout(){return Promise.reject(Gs(gs))}async createRefreshTokenClient(e){const t=await Xc(this.getClientConfiguration.bind(this),Di,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new pd(t,this.performanceClient)}}class md{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw Gs(ks);const r=e.correlationId||yc(),o=t.id_token?Rr(t.id_token,nc):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new el(el.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||yc()):void 0,s=await this.loadAccount(e,n.clientInfo||t.client_info||"",r,o,a),c=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,r),l=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,n,r),u=await this.loadRefreshToken(t,s.homeAccountId,s.environment,r);return this.generateAuthenticationResult(e,{account:s,idToken:c,accessToken:l,refreshToken:u},o,a)}async loadAccount(e,t,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=Do.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Gs(Es);const i=Do.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),a=null===r||void 0===r?void 0:r.tid,s=vu(this.storage,o,i,nc,r,t,o.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,n),s}async loadIdToken(e,t,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Dr(t,n,e.id_token,this.config.auth.clientId,r);return await this.storage.setIdTokenCredential(i,o),i}async loadAccessToken(e,t,n,r,o,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const s=t.scope?So.fromString(t.scope):new So(e.scopes),c=i.expiresOn||t.expires_in+Mr(),l=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Mr(),u=Hr(n,r,t.access_token,this.config.auth.clientId,o,s.printScopes(),c,l,nc);return await this.storage.setAccessTokenCredential(u,a),u}async loadRefreshToken(e,t,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=zr(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(o,r),o}generateAuthenticationResult(e,t,n,r){var o,i,a;let s,c="",l=[],u=null;null!==t&&void 0!==t&&t.accessToken&&(c=t.accessToken.secret,l=So.fromString(t.accessToken.target).asArray(),u=xr(t.accessToken.expiresOn),s=xr(t.accessToken.extendedExpiresOn));const d=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:l,account:d.getAccountInfo(),idToken:(null===(o=t.idToken)||void 0===o?void 0:o.secret)||"",idTokenClaims:n||{},accessToken:c,fromCache:!0,expiresOn:u,correlationId:e.correlationId||"",requestId:"",extExpiresOn:s,familyId:(null===(i=t.refreshToken)||void 0===i?void 0:i.familyId)||"",tokenType:(null===t||void 0===t||null===(a=t.accessToken)||void 0===a?void 0:a.tokenType)||"",state:e.state||"",cloudGraphHostName:d.cloudGraphHostName||"",msGraphHost:d.msGraphHost||"",fromNativeBroker:!1}}}class yd extends Cu{constructor(e){super(e),this.includeRedirectUri=!1}}class vd extends _u{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,s,c,l),this.apiId=a}async acquireToken(e){if(!e.code)throw Gs(Rs);const t=await Xc(this.initializeAuthorizationRequest.bind(this),Hi,this.logger,this.performanceClient,e.correlationId)(e,yt.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r=Wt(Wt({},t),{},{code:e.code}),o=await Xc(this.getClientConfiguration.bind(this),Di,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new yd(o);this.logger.verbose("Auth code client created");const a=new Nu(i,this.browserStorage,r,this.logger,this.performanceClient);return await Xc(a.handleCodeResponseFromServer.bind(a),Ui,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(r){throw r instanceof ve&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),r}}logout(){return Promise.reject(Gs(gs))}}function wd(e){const t=null===e||void 0===e?void 0:e.idTokenClaims;return null!==t&&void 0!==t&&t.tfp||null!==t&&void 0!==t&&t.acr?"B2C":null!==t&&void 0!==t&&t.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===(null===t||void 0===t?void 0:t.tid)?"MSA":"AAD":void 0}function bd(e,t){try{Nc(e)}catch(n){throw t.end({success:!1},n),n}}class Cd{constructor(e){var t,n,r,o;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Yc(this.logger,this.performanceClient):_r,this.eventHandler=new Tl(this.logger),this.browserStorage=this.isBrowserEnvironment?new Sl(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(r){throw Co(co)}return{canonicalAuthority:e.authority?tl(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)):(t=this.config.auth.clientId,n=this.logger,r=this.performanceClient,o=this.eventHandler,new Sl(t,{cacheLocation:Ve,temporaryCacheLocation:Ve,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},_r,n,r,o));const i={cacheLocation:Ve,temporaryCacheLocation:Ve,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Sl(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new md(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const n=new Cd(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(Vt);const n=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowPlatformBroker,o=this.performanceClient.startMeasurement(Pi,n);if(this.eventHandler.emitEvent(Qt),!t)try{this.logMultipleInstances(o)}catch(i){}if(await Xc(this.browserStorage.initialize.bind(this.browserStorage),Ri,this.logger,this.performanceClient,n)(n),r)try{this.platformAuthProvider=await nd(this.logger,this.performanceClient,n,this.config.system.nativeBrokerHandshakeTimeout)}catch(a){this.logger.verbose(a)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),$c(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),ga,this.logger,this.performanceClient,n)(n)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n),this.initialized=!0,this.eventHandler.emitEvent(Vt),o.end({allowPlatformBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),Mc(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var t;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if((null===(t=this.browserStorage.getInteractionInProgress())||void 0===t?void 0:t.type)===$e)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&this.platformAuthProvider&&!e;let i,a;this.eventHandler.emitEvent(dn,yt.Redirect);try{if(o&&this.platformAuthProvider){i=this.performanceClient.startMeasurement(ii,(null===r||void 0===r?void 0:r.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new Ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ht,this.performanceClient,this.platformAuthProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=Xc(e.handleRedirectPromise.bind(e),ha,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{const[t,n]=this.browserStorage.getCachedRequest(),r=t.correlationId;i=this.performanceClient.startMeasurement(ii,r),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const o=this.createRedirectClient(r);a=Xc(o.handleRedirectPromise.bind(o),da,this.logger,this.performanceClient,i.event.correlationId)(e,t,n,i)}}catch(s){throw this.browserStorage.resetRequestCache(),s}return a.then(e=>{if(e){this.browserStorage.resetRequestCache();n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Xt,yt.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(tn,yt.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:wd(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(hn,yt.Redirect),e}).catch(e=>{this.browserStorage.resetRequestCache();const t=e;throw n.length>0?this.eventHandler.emitEvent(nn,yt.Redirect,null,t):this.eventHandler.emitEvent(Zt,yt.Redirect,null,t),this.eventHandler.emitEvent(hn,yt.Redirect),i.end({success:!1},t),e})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(oi,t);n.add({accountType:wd(e.account),scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{const t="function"===typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const r="function"===typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}const o=this.getAllAccounts().length>0;try{let r;if(xc(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Je),o?this.eventHandler.emitEvent(en,yt.Redirect,e):this.eventHandler.emitEvent($t,yt.Redirect,e),this.platformAuthProvider&&this.canUsePlatformBroker(e)){r=new Ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,lt,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch(n=>{if(n instanceof qu&&Du(n)){this.platformAuthProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof ul){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw n})}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(i){throw this.browserStorage.resetRequestCache(),n.end({success:!1},i),o?this.eventHandler.emitEvent(nn,yt.Redirect,null,i):this.eventHandler.emitEvent(Zt,yt.Redirect,null,i),i}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(ri,t);n.add({scenarioId:e.scenarioId,accountType:wd(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),bd(this.initialized,n),this.browserStorage.setInteractionInProgress(!0,Je)}catch(a){return Promise.reject(a)}const r=this.getAllAccounts();let o;r.length>0?this.eventHandler.emitEvent(en,yt.Popup,e):this.eventHandler.emitEvent($t,yt.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))o=this.acquireTokenNative(Wt(Wt({},e),{},{correlationId:t}),ut).then(e=>(n.end({success:!0,isNativeBroker:!0,accountType:wd(e.account)}),e)).catch(n=>{if(n instanceof qu&&Du(n)){this.platformAuthProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(n instanceof ul){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw n});else{o=this.createPopupClient(t).acquireToken(e,i)}return o.then(e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Xt,yt.Popup,e):this.eventHandler.emitEvent(tn,yt.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:wd(e.account)}),e)).catch(e=>(r.length>0?this.eventHandler.emitEvent(nn,yt.Popup,null,e):this.eventHandler.emitEvent(Zt,yt.Popup,null,e),n.end({success:!1},e),Promise.reject(e))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,n;const r=this.getRequestCorrelationId(e),o=Wt(Wt({},e),{},{prompt:e.prompt,correlationId:r});let i;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(hi,r),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId,accountType:wd(e.account)}),bd(this.initialized,this.ssoSilentMeasurement),null===(n=this.ssoSilentMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(on,yt.Silent,o),this.canUsePlatformBroker(o))i=this.acquireTokenNative(o,dt).catch(e=>{if(e instanceof qu&&Du(e)){this.platformAuthProvider=void 0;return this.createSilentIframeClient(o.correlationId).acquireToken(o)}throw e});else{i=this.createSilentIframeClient(o.correlationId).acquireToken(o)}return i.then(e=>{var t;return this.eventHandler.emitEvent(an,yt.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:wd(e.account)}),e}).catch(e=>{var t;throw this.eventHandler.emitEvent(sn,yt.Silent,null,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(Zo,t);bd(this.initialized,n),this.eventHandler.emitEvent(cn,yt.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Gs(Ms);if(e.code){const r=e.code;let o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync(Wt(Wt({},e),{},{correlationId:t})).then(e=>(this.eventHandler.emitEvent(ln,yt.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:wd(e.account)}),e)).catch(e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(un,yt.Silent,null,e),n.end({success:!1},e),e}),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){const r=await this.acquireTokenNative(Wt(Wt({},e),{},{correlationId:t}),ft,e.nativeAccountId).catch(e=>{throw e instanceof qu&&Du(e)&&(this.platformAuthProvider=void 0),e});return n.end({accountType:wd(r.account),success:!0}),r}throw Gs(xs)}throw Gs(Os)}catch(r){throw this.eventHandler.emitEvent(un,yt.Silent,null,r),n.end({success:!1},r),r}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ua,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const n=this.createSilentAuthCodeClient(e.correlationId);return await n.acquireToken(e).then(e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e}).catch(e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(Si,e.correlationId),t){case Pt:case Rt:case Ot:const t=this.createSilentCacheClient(e.correlationId);return Xc(t.acquireToken.bind(t),ci,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ar(hr)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(ei,e.correlationId),t){case Pt:case Ot:case Mt:case Nt:const t=this.createSilentRefreshClient(e.correlationId);return Xc(t.acquireToken.bind(t),di,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ar(hr)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(Ai,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return Xc(t.acquireToken.bind(t),li,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(Wt({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);xc(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,$e);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);Nc(this.initialized),this.browserStorage.setInteractionInProgress(!0,$e);return this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,r){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=Do.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n,r){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw Gs(Ds);return new Ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,r)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!rd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case A.NONE:case A.CONSENT:case A.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace("canUsePlatformBroker: prompt = ".concat(e.prompt," is not compatible with platform broker flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new od(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new id(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new fd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,dt,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new Fu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new gd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new vd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ft,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Oc(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===We?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===We?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?yc():i.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(Wt({correlationId:t},e||Tt))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(Wt({correlationId:t},e||Tt))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(ti,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),bd(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw Gs(ms);return n.add({accountType:wd(r)}),this.acquireTokenSilentDeduped(e,r,t).then(r=>(n.end({success:!0,fromCache:r.fromCache,isNativeBroker:r.fromNativeBroker,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length}),Wt(Wt({},r),{},{state:e.state,correlationId:t}))).catch(e=>{throw e instanceof ve&&e.setCorrelationId(t),n.end({success:!1},e),e})}async acquireTokenSilentDeduped(e,t,n){const r=fl(this.config.auth.clientId,Wt(Wt({},e),{},{authority:e.authority||this.config.auth.authority,correlationId:n}),t.homeAccountId),o=JSON.stringify(r),i=this.activeSilentTokenRequests.get(o);if("undefined"===typeof i){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n),this.performanceClient.addFields({deduped:!1},n);const r=Xc(this.acquireTokenSilentAsync.bind(this),ni,this.logger,this.performanceClient,n)(Wt(Wt({},e),{},{correlationId:n}),t);return this.activeSilentTokenRequests.set(o,r),r.finally(()=>{this.activeSilentTokenRequests.delete(o)})}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),this.performanceClient.addFields({deduped:!0},n),i}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(ni,e.correlationId),this.eventHandler.emitEvent(en,yt.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await Xc(Au,Ei,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||Pt;return this.acquireTokenSilentNoIframe(r,o).catch(async e=>{const t=function(e,t){const n=!(e instanceof ul&&e.subError!==al),r=e.errorCode===_e||e.errorCode===hr,o=n&&r||e.errorCode===nl||e.errorCode===ol,i=Lt.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==xt){const[t,n]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(n),r.correlationId);const i=this.performanceClient.startMeasurement(ui,r.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(n," succeeded. Retrying cache and/or RT redemption"),r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info("Iframe request with correlationId: ".concat(n," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),Xc(this.acquireTokenBySilentIframe.bind(this),Ai,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise(t=>{e=t}),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),Xc(this.acquireTokenBySilentIframe.bind(this),Ai,this.logger,this.performanceClient,r.correlationId)(r).then(t=>(e(!0),t)).catch(t=>{throw e(!1),t}).finally(()=>{this.activeIframeRequest=void 0})}}throw e}).then(t=>(this.eventHandler.emitEvent(tn,yt.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t)).catch(e=>{throw this.eventHandler.emitEvent(nn,yt.Silent,null,e),e}).finally(()=>{document.removeEventListener("visibilitychange",n)})}async acquireTokenSilentNoIframe(e,t){return rd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,pt,e.account.nativeAccountId,t).catch(async e=>{if(e instanceof qu&&Du(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,Ar(hr);throw e})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Rt&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Xc(this.acquireTokenFromCache.bind(this),Si,this.logger,this.performanceClient,e.correlationId)(e,t).catch(n=>{if(t===Rt)throw n;return this.eventHandler.emitEvent(rn,yt.Silent,e),Xc(this.acquireTokenByRefreshToken.bind(this),ei,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Xc(Ju,ba,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?Wt({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose("".concat(t?"Found":"Did not find"," pre-generated PKCE codes")),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[];window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,n){var r;const o=(null===(r=window.msal)||void 0===r?void 0:r.clientIds)||[],i=o.length,a=o.filter(t=>t===e).length;a>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:i,sameClientIdInstanceCount:a})}(t,e,this.logger)}}class kd{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new zc(e);return await n.initialize(),Cd.createController(n,t)}(e);return new kd(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new Cd(new zc(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const Sd=new kd({auth:{clientId:"6080bbaa-4454-430b-8295-8ffe42fb7595",authority:"https://login.microsoftonline.com/5762dbac-7fd6-408e-89ff-7ce903fa9a52",redirectUri:"http://localhost:5000"}});Sd.handleRedirectPromise().catch(e=>{console.error("MSAL redirect error:",e)});o.createRoot(document.getElementById("root")).render((0,En.jsx)(r.StrictMode,{children:(0,En.jsx)(Tn,{instance:Sd,children:(0,En.jsx)(Pn,{})})}))})();
//# sourceMappingURL=main.e4aa320d.js.map